8aab97437555fd11ede6a11e3bb3a9cc
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock axios
jest.mock('../src/renderer/utils/axios', () => ({
    get: jest.fn(),
    post: jest.fn(),
    delete: jest.fn(),
}));
const react_1 = require("@testing-library/react");
const react_redux_1 = require("react-redux");
const toolkit_1 = require("@reduxjs/toolkit");
const styled_components_1 = require("styled-components");
const AdvancedFilter_1 = __importDefault(require("../src/renderer/features/TestCaseManagement/components/AdvancedFilter"));
const theme_1 = require("../src/renderer/shared/theme");
require("@testing-library/jest-dom");
const mockAxios = require('../src/renderer/utils/axios');
const createTestStore = () => {
    return (0, toolkit_1.configureStore)({
        reducer: {
        // 필요한 리듀서들 추가
        },
        preloadedState: {}
    });
};
const renderAdvancedFilter = (props = {}) => {
    const store = createTestStore();
    const defaultProps = {
        onSearch: jest.fn(),
        onClear: jest.fn(),
        ...props
    };
    return (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: store, children: (0, jsx_runtime_1.jsx)(styled_components_1.ThemeProvider, { theme: theme_1.theme, children: (0, jsx_runtime_1.jsx)(AdvancedFilter_1.default, { ...defaultProps }) }) }));
};
describe('AdvancedFilter Component', () => {
    beforeEach(() => {
        mockAxios.get.mockClear();
        mockAxios.post.mockClear();
        mockAxios.delete.mockClear();
    });
    describe('기본 렌더링', () => {
        it('should render advanced filter component', () => {
            renderAdvancedFilter();
            expect(react_1.screen.getByText('고급 검색')).toBeInTheDocument();
            expect(react_1.screen.getByText('키워드 검색')).toBeInTheDocument();
            expect(react_1.screen.getByText('폴더')).toBeInTheDocument();
            expect(react_1.screen.getByText('태그')).toBeInTheDocument();
            expect(react_1.screen.getByText('상태')).toBeInTheDocument();
            expect(react_1.screen.getByText('우선순위')).toBeInTheDocument();
            expect(react_1.screen.getByText('작성자')).toBeInTheDocument();
            expect(react_1.screen.getByText('생성일 (시작)')).toBeInTheDocument();
            expect(react_1.screen.getByText('생성일 (종료)')).toBeInTheDocument();
        });
        it('should render search and clear buttons', () => {
            renderAdvancedFilter();
            expect(react_1.screen.getByText('초기화')).toBeInTheDocument();
            expect(react_1.screen.getByText('검색')).toBeInTheDocument();
            expect(react_1.screen.getByText('현재 조건 저장')).toBeInTheDocument();
        });
    });
    describe('키워드 검색', () => {
        it('should handle keyword input', () => {
            const onSearch = jest.fn();
            renderAdvancedFilter({ onSearch });
            const keywordInput = react_1.screen.getByPlaceholderText('제목, 설명, 스텝에서 검색...');
            react_1.fireEvent.change(keywordInput, { target: { value: 'login test' } });
            expect(keywordInput).toHaveValue('login test');
        });
        it('should trigger search with keyword', () => {
            const onSearch = jest.fn();
            renderAdvancedFilter({ onSearch });
            const keywordInput = react_1.screen.getByPlaceholderText('제목, 설명, 스텝에서 검색...');
            react_1.fireEvent.change(keywordInput, { target: { value: 'login test' } });
            const searchButton = react_1.screen.getByText('검색');
            react_1.fireEvent.click(searchButton);
            expect(onSearch).toHaveBeenCalledWith({
                keyword: 'login test'
            });
        });
    });
    describe('다중 선택 필터', () => {
        it('should open folder dropdown when clicked', () => {
            renderAdvancedFilter();
            const folderSelect = react_1.screen.getByText('선택하세요');
            react_1.fireEvent.click(folderSelect);
            expect(react_1.screen.getByText('Smoke Tests')).toBeInTheDocument();
            expect(react_1.screen.getByText('Regression Tests')).toBeInTheDocument();
            expect(react_1.screen.getByText('Integration Tests')).toBeInTheDocument();
            expect(react_1.screen.getByText('Unit Tests')).toBeInTheDocument();
        });
        it('should select multiple folders', () => {
            const onSearch = jest.fn();
            renderAdvancedFilter({ onSearch });
            // 폴더 드롭다운 열기
            const folderSelect = react_1.screen.getByText('선택하세요');
            react_1.fireEvent.click(folderSelect);
            // Smoke Tests 선택
            react_1.fireEvent.click(react_1.screen.getByText('Smoke Tests'));
            // Regression Tests 선택
            react_1.fireEvent.click(react_1.screen.getByText('Regression Tests'));
            // 검색 버튼 클릭
            const searchButton = react_1.screen.getByText('검색');
            react_1.fireEvent.click(searchButton);
            expect(onSearch).toHaveBeenCalledWith({
                folders: ['Smoke Tests', 'Regression Tests']
            });
        });
        it('should select multiple tags', () => {
            const onSearch = jest.fn();
            renderAdvancedFilter({ onSearch });
            // 태그 드롭다운 열기
            const tagSelect = react_1.screen.getByText('선택하세요');
            react_1.fireEvent.click(tagSelect);
            // critical 태그 선택
            react_1.fireEvent.click(react_1.screen.getByText('critical'));
            // smoke 태그 선택
            react_1.fireEvent.click(react_1.screen.getByText('smoke'));
            // 검색 버튼 클릭
            const searchButton = react_1.screen.getByText('검색');
            react_1.fireEvent.click(searchButton);
            expect(onSearch).toHaveBeenCalledWith({
                tags: ['critical', 'smoke']
            });
        });
        it('should select status and priority', () => {
            const onSearch = jest.fn();
            renderAdvancedFilter({ onSearch });
            // 상태 드롭다운 열기
            const statusSelect = react_1.screen.getByText('선택하세요');
            react_1.fireEvent.click(statusSelect);
            react_1.fireEvent.click(react_1.screen.getByText('Active'));
            // 우선순위 드롭다운 열기
            const prioritySelect = react_1.screen.getByText('선택하세요');
            react_1.fireEvent.click(prioritySelect);
            react_1.fireEvent.click(react_1.screen.getByText('High'));
            // 검색 버튼 클릭
            const searchButton = react_1.screen.getByText('검색');
            react_1.fireEvent.click(searchButton);
            expect(onSearch).toHaveBeenCalledWith({
                status: ['Active'],
                priority: ['High']
            });
        });
    });
    describe('작성자 필터', () => {
        it('should handle author input', () => {
            const onSearch = jest.fn();
            renderAdvancedFilter({ onSearch });
            const authorInput = react_1.screen.getByPlaceholderText('작성자 입력...');
            react_1.fireEvent.change(authorInput, { target: { value: 'tester1, tester2' } });
            const searchButton = react_1.screen.getByText('검색');
            react_1.fireEvent.click(searchButton);
            expect(onSearch).toHaveBeenCalledWith({
                createdBy: ['tester1', 'tester2']
            });
        });
    });
    describe('날짜 범위 필터', () => {
        it('should handle date range inputs', () => {
            const onSearch = jest.fn();
            renderAdvancedFilter({ onSearch });
            const fromDateInput = react_1.screen.getByLabelText('생성일 (시작)');
            const toDateInput = react_1.screen.getByLabelText('생성일 (종료)');
            react_1.fireEvent.change(fromDateInput, { target: { value: '2024-01-01' } });
            react_1.fireEvent.change(toDateInput, { target: { value: '2024-12-31' } });
            const searchButton = react_1.screen.getByText('검색');
            react_1.fireEvent.click(searchButton);
            expect(onSearch).toHaveBeenCalledWith({
                dateRange: {
                    from: '2024-01-01',
                    to: '2024-12-31'
                }
            });
        });
    });
    describe('복합 필터', () => {
        it('should combine multiple filters', () => {
            const onSearch = jest.fn();
            renderAdvancedFilter({ onSearch });
            // 키워드 입력
            const keywordInput = react_1.screen.getByPlaceholderText('제목, 설명, 스텝에서 검색...');
            react_1.fireEvent.change(keywordInput, { target: { value: 'login' } });
            // 폴더 선택
            const folderSelect = react_1.screen.getByText('선택하세요');
            react_1.fireEvent.click(folderSelect);
            react_1.fireEvent.click(react_1.screen.getByText('Smoke Tests'));
            // 우선순위 선택
            const prioritySelect = react_1.screen.getAllByText('선택하세요')[3]; // 우선순위는 4번째
            react_1.fireEvent.click(prioritySelect);
            react_1.fireEvent.click(react_1.screen.getByText('High'));
            // 검색 버튼 클릭
            const searchButton = react_1.screen.getByText('검색');
            react_1.fireEvent.click(searchButton);
            expect(onSearch).toHaveBeenCalledWith({
                keyword: 'login',
                folders: ['Smoke Tests'],
                priority: ['High']
            });
        });
    });
    describe('초기화 기능', () => {
        it('should clear all filters when clear button is clicked', () => {
            const onClear = jest.fn();
            renderAdvancedFilter({ onClear });
            // 필터 설정
            const keywordInput = react_1.screen.getByPlaceholderText('제목, 설명, 스텝에서 검색...');
            react_1.fireEvent.change(keywordInput, { target: { value: 'test' } });
            // 초기화 버튼 클릭
            const clearButton = react_1.screen.getByText('초기화');
            react_1.fireEvent.click(clearButton);
            expect(onClear).toHaveBeenCalled();
            expect(keywordInput).toHaveValue('');
        });
    });
    describe('검색 프리셋', () => {
        it('should load and display saved presets', async () => {
            const mockPresets = [
                {
                    id: 'preset_1',
                    name: 'Critical Tests',
                    filters: { priority: ['High'], tags: ['critical'] },
                    createdBy: 'tester1',
                    createdAt: '2024-01-15T00:00:00Z'
                }
            ];
            mockAxios.get.mockResolvedValue({ data: mockPresets });
            renderAdvancedFilter();
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Critical Tests')).toBeInTheDocument();
            });
        });
        it('should open save preset modal when save button is clicked', () => {
            renderAdvancedFilter();
            const saveButton = react_1.screen.getByText('현재 조건 저장');
            react_1.fireEvent.click(saveButton);
            expect(react_1.screen.getByText('검색 조건 저장')).toBeInTheDocument();
            expect(react_1.screen.getByPlaceholderText('프리셋 이름을 입력하세요')).toBeInTheDocument();
        });
        it('should save preset when modal form is submitted', async () => {
            const mockPreset = {
                id: 'preset_123',
                name: 'My Preset',
                filters: {},
                createdBy: 'tester1',
                createdAt: '2024-01-15T00:00:00Z'
            };
            mockAxios.post.mockResolvedValue({ data: mockPreset });
            renderAdvancedFilter();
            // 저장 모달 열기
            const saveButton = react_1.screen.getByText('현재 조건 저장');
            react_1.fireEvent.click(saveButton);
            // 프리셋 이름 입력
            const nameInput = react_1.screen.getByPlaceholderText('프리셋 이름을 입력하세요');
            react_1.fireEvent.change(nameInput, { target: { value: 'My Preset' } });
            // 저장 버튼 클릭
            const modalSaveButton = react_1.screen.getByText('저장');
            react_1.fireEvent.click(modalSaveButton);
            await (0, react_1.waitFor)(() => {
                expect(mockAxios.post).toHaveBeenCalledWith('/api/testcases/search/presets', {
                    name: 'My Preset',
                    filters: {},
                    createdBy: 'current-user'
                });
            });
        });
        it('should load preset when preset tag is clicked', async () => {
            const onSearch = jest.fn();
            const mockPresets = [
                {
                    id: 'preset_1',
                    name: 'Critical Tests',
                    filters: { priority: ['High'], tags: ['critical'] },
                    createdBy: 'tester1',
                    createdAt: '2024-01-15T00:00:00Z'
                }
            ];
            mockAxios.get.mockResolvedValue({ data: mockPresets });
            renderAdvancedFilter({ onSearch });
            await (0, react_1.waitFor)(() => {
                const presetTag = react_1.screen.getByText('Critical Tests');
                react_1.fireEvent.click(presetTag);
            });
            expect(onSearch).toHaveBeenCalledWith({
                priority: ['High'],
                tags: ['critical']
            });
        });
    });
    describe('접근성', () => {
        it('should have proper ARIA labels', () => {
            renderAdvancedFilter();
            expect(react_1.screen.getByLabelText('키워드 검색')).toBeInTheDocument();
            expect(react_1.screen.getByLabelText('작성자')).toBeInTheDocument();
            expect(react_1.screen.getByLabelText('생성일 (시작)')).toBeInTheDocument();
            expect(react_1.screen.getByLabelText('생성일 (종료)')).toBeInTheDocument();
        });
        it('should support keyboard navigation', () => {
            renderAdvancedFilter();
            const keywordInput = react_1.screen.getByPlaceholderText('제목, 설명, 스텝에서 검색...');
            keywordInput.focus();
            expect(keywordInput).toHaveFocus();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC90ZXN0cy9hZHZhbmNlZC1maWx0ZXIudGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBU0EsYUFBYTtBQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUM5QyxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNkLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2YsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDbEIsQ0FBQyxDQUFDLENBQUM7QUFiSixrREFBNEU7QUFDNUUsNkNBQXVDO0FBQ3ZDLDhDQUFrRDtBQUNsRCx5REFBa0Q7QUFDbEQsMkhBQW1HO0FBQ25HLHdEQUFxRDtBQUNyRCxxQ0FBbUM7QUFTbkMsTUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7QUFFekQsTUFBTSxlQUFlLEdBQUcsR0FBRyxFQUFFO0lBQzNCLE9BQU8sSUFBQSx3QkFBYyxFQUFDO1FBQ3BCLE9BQU8sRUFBRTtRQUNQLGNBQWM7U0FDZjtRQUNELGNBQWMsRUFBRSxFQUFFO0tBQ25CLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQztBQUVGLE1BQU0sb0JBQW9CLEdBQUcsQ0FBQyxLQUFLLEdBQUcsRUFBRSxFQUFFLEVBQUU7SUFDMUMsTUFBTSxLQUFLLEdBQUcsZUFBZSxFQUFFLENBQUM7SUFDaEMsTUFBTSxZQUFZLEdBQUc7UUFDbkIsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbkIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsR0FBRyxLQUFLO0tBQ1QsQ0FBQztJQUVGLE9BQU8sSUFBQSxjQUFNLEVBQ1gsdUJBQUMsc0JBQVEsSUFBQyxLQUFLLEVBQUUsS0FBSyxZQUNwQix1QkFBQyxpQ0FBYSxJQUFDLEtBQUssRUFBRSxhQUFLLFlBQ3pCLHVCQUFDLHdCQUFjLE9BQUssWUFB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dC90ZXN0cy9hZHZhbmNlZC1maWx0ZXIudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgY29uZmlndXJlU3RvcmUgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcbmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgQWR2YW5jZWRGaWx0ZXIgZnJvbSAnLi4vc3JjL3JlbmRlcmVyL2ZlYXR1cmVzL1Rlc3RDYXNlTWFuYWdlbWVudC9jb21wb25lbnRzL0FkdmFuY2VkRmlsdGVyJztcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSAnLi4vc3JjL3JlbmRlcmVyL3NoYXJlZC90aGVtZSc7XG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuXG4vLyBNb2NrIGF4aW9zXG5qZXN0Lm1vY2soJy4uL3NyYy9yZW5kZXJlci91dGlscy9heGlvcycsICgpID0+ICh7XG4gIGdldDogamVzdC5mbigpLFxuICBwb3N0OiBqZXN0LmZuKCksXG4gIGRlbGV0ZTogamVzdC5mbigpLFxufSkpO1xuXG5jb25zdCBtb2NrQXhpb3MgPSByZXF1aXJlKCcuLi9zcmMvcmVuZGVyZXIvdXRpbHMvYXhpb3MnKTtcblxuY29uc3QgY3JlYXRlVGVzdFN0b3JlID0gKCkgPT4ge1xuICByZXR1cm4gY29uZmlndXJlU3RvcmUoe1xuICAgIHJlZHVjZXI6IHtcbiAgICAgIC8vIO2VhOyalO2VnCDrpqzrk4DshJzrk6Qg7LaU6rCAXG4gICAgfSxcbiAgICBwcmVsb2FkZWRTdGF0ZToge31cbiAgfSk7XG59O1xuXG5jb25zdCByZW5kZXJBZHZhbmNlZEZpbHRlciA9IChwcm9wcyA9IHt9KSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gY3JlYXRlVGVzdFN0b3JlKCk7XG4gIGNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgICBvblNlYXJjaDogamVzdC5mbigpLFxuICAgIG9uQ2xlYXI6IGplc3QuZm4oKSxcbiAgICAuLi5wcm9wc1xuICB9O1xuXG4gIHJldHVybiByZW5kZXIoXG4gICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XG4gICAgICA8VGhlbWVQcm92aWRlciB0aGVtZT17dGhlbWV9PlxuICAgICAgICA8QWR2YW5jZWRGaWx0ZXIgey4uLmRlZmF1bHRQcm9wc30gLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICA8L1Byb3ZpZGVyPlxuICApO1xufTtcblxuZGVzY3JpYmUoJ0FkdmFuY2VkRmlsdGVyIENvbXBvbmVudCcsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja0F4aW9zLmdldC5tb2NrQ2xlYXIoKTtcbiAgICBtb2NrQXhpb3MucG9zdC5tb2NrQ2xlYXIoKTtcbiAgICBtb2NrQXhpb3MuZGVsZXRlLm1vY2tDbGVhcigpO1xuICB9KTtcblxuICBkZXNjcmliZSgn6riw67O4IOugjOuNlOungScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbmRlciBhZHZhbmNlZCBmaWx0ZXIgY29tcG9uZW50JywgKCkgPT4ge1xuICAgICAgcmVuZGVyQWR2YW5jZWRGaWx0ZXIoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+qzoOq4iSDqsoDsg4knKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCftgqTsm4zrk5wg6rKA7IOJJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7Y+0642UJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7YOc6re4JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7IOB7YOcJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7Jqw7ISg7Iic7JyEJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7J6R7ISx7J6QJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7IOd7ISx7J28ICjsi5zsnpEpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7IOd7ISx7J28ICjsooXro4wpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBzZWFyY2ggYW5kIGNsZWFyIGJ1dHRvbnMnLCAoKSA9PiB7XG4gICAgICByZW5kZXJBZHZhbmNlZEZpbHRlcigpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7LSI6riw7ZmUJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn6rKA7IOJJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7ZiE7J6sIOyhsOqxtCDsoIDsnqUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+2CpOybjOuTnCDqsoDsg4knLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUga2V5d29yZCBpbnB1dCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG9uU2VhcmNoID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyQWR2YW5jZWRGaWx0ZXIoeyBvblNlYXJjaCB9KTtcblxuICAgICAgY29uc3Qga2V5d29yZElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KCfsoJzrqqksIOyEpOuqhSwg7Iqk7YWd7JeQ7IScIOqygOyDiS4uLicpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShrZXl3b3JkSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnbG9naW4gdGVzdCcgfSB9KTtcblxuICAgICAgZXhwZWN0KGtleXdvcmRJbnB1dCkudG9IYXZlVmFsdWUoJ2xvZ2luIHRlc3QnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJpZ2dlciBzZWFyY2ggd2l0aCBrZXl3b3JkJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWFyY2ggPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXJBZHZhbmNlZEZpbHRlcih7IG9uU2VhcmNoIH0pO1xuXG4gICAgICBjb25zdCBrZXl3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoJ+ygnOuqqSwg7ISk66qFLCDsiqTthZ3sl5DshJwg6rKA7IOJLi4uJyk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGtleXdvcmRJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdsb2dpbiB0ZXN0JyB9IH0pO1xuXG4gICAgICBjb25zdCBzZWFyY2hCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCfqsoDsg4knKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzZWFyY2hCdXR0b24pO1xuXG4gICAgICBleHBlY3Qob25TZWFyY2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAga2V5d29yZDogJ2xvZ2luIHRlc3QnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+uLpOykkSDshKDtg50g7ZWE7YSwJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgb3BlbiBmb2xkZXIgZHJvcGRvd24gd2hlbiBjbGlja2VkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyQWR2YW5jZWRGaWx0ZXIoKTtcblxuICAgICAgY29uc3QgZm9sZGVyU2VsZWN0ID0gc2NyZWVuLmdldEJ5VGV4dCgn7ISg7YOd7ZWY7IS47JqUJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZm9sZGVyU2VsZWN0KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Ntb2tlIFRlc3RzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUmVncmVzc2lvbiBUZXN0cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ludGVncmF0aW9uIFRlc3RzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVW5pdCBUZXN0cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZWxlY3QgbXVsdGlwbGUgZm9sZGVycycsICgpID0+IHtcbiAgICAgIGNvbnN0IG9uU2VhcmNoID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyQWR2YW5jZWRGaWx0ZXIoeyBvblNlYXJjaCB9KTtcblxuICAgICAgLy8g7Y+0642UIOuTnOuhreuLpOyatCDsl7TquLBcbiAgICAgIGNvbnN0IGZvbGRlclNlbGVjdCA9IHNjcmVlbi5nZXRCeVRleHQoJ+yEoO2Dne2VmOyEuOyalCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGZvbGRlclNlbGVjdCk7XG5cbiAgICAgIC8vIFNtb2tlIFRlc3RzIOyEoO2DnVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ1Ntb2tlIFRlc3RzJykpO1xuICAgICAgXG4gICAgICAvLyBSZWdyZXNzaW9uIFRlc3RzIOyEoO2DnVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ1JlZ3Jlc3Npb24gVGVzdHMnKSk7XG5cbiAgICAgIC8vIOqygOyDiSDrsoTtirwg7YG066atXG4gICAgICBjb25zdCBzZWFyY2hCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCfqsoDsg4knKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzZWFyY2hCdXR0b24pO1xuXG4gICAgICBleHBlY3Qob25TZWFyY2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZm9sZGVyczogWydTbW9rZSBUZXN0cycsICdSZWdyZXNzaW9uIFRlc3RzJ11cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZWxlY3QgbXVsdGlwbGUgdGFncycsICgpID0+IHtcbiAgICAgIGNvbnN0IG9uU2VhcmNoID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyQWR2YW5jZWRGaWx0ZXIoeyBvblNlYXJjaCB9KTtcblxuICAgICAgLy8g7YOc6re4IOuTnOuhreuLpOyatCDsl7TquLBcbiAgICAgIGNvbnN0IHRhZ1NlbGVjdCA9IHNjcmVlbi5nZXRCeVRleHQoJ+yEoO2Dne2VmOyEuOyalCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHRhZ1NlbGVjdCk7XG5cbiAgICAgIC8vIGNyaXRpY2FsIO2DnOq3uCDshKDtg51cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdjcml0aWNhbCcpKTtcbiAgICAgIFxuICAgICAgLy8gc21va2Ug7YOc6re4IOyEoO2DnVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ3Ntb2tlJykpO1xuXG4gICAgICAvLyDqsoDsg4kg67KE7Yq8IO2BtOumrVxuICAgICAgY29uc3Qgc2VhcmNoQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgn6rKA7IOJJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2VhcmNoQnV0dG9uKTtcblxuICAgICAgZXhwZWN0KG9uU2VhcmNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHRhZ3M6IFsnY3JpdGljYWwnLCAnc21va2UnXVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlbGVjdCBzdGF0dXMgYW5kIHByaW9yaXR5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWFyY2ggPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXJBZHZhbmNlZEZpbHRlcih7IG9uU2VhcmNoIH0pO1xuXG4gICAgICAvLyDsg4Htg5wg65Oc66Gt64uk7Jq0IOyXtOq4sFxuICAgICAgY29uc3Qgc3RhdHVzU2VsZWN0ID0gc2NyZWVuLmdldEJ5VGV4dCgn7ISg7YOd7ZWY7IS47JqUJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc3RhdHVzU2VsZWN0KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdBY3RpdmUnKSk7XG5cbiAgICAgIC8vIOyasOyEoOyInOychCDrk5zroa3ri6TsmrQg7Je06riwXG4gICAgICBjb25zdCBwcmlvcml0eVNlbGVjdCA9IHNjcmVlbi5nZXRCeVRleHQoJ+yEoO2Dne2VmOyEuOyalCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHByaW9yaXR5U2VsZWN0KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdIaWdoJykpO1xuXG4gICAgICAvLyDqsoDsg4kg67KE7Yq8IO2BtOumrVxuICAgICAgY29uc3Qgc2VhcmNoQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgn6rKA7IOJJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2VhcmNoQnV0dG9uKTtcblxuICAgICAgZXhwZWN0KG9uU2VhcmNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN0YXR1czogWydBY3RpdmUnXSxcbiAgICAgICAgcHJpb3JpdHk6IFsnSGlnaCddXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+yekeyEseyekCDtlYTthLAnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYXV0aG9yIGlucHV0JywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWFyY2ggPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXJBZHZhbmNlZEZpbHRlcih7IG9uU2VhcmNoIH0pO1xuXG4gICAgICBjb25zdCBhdXRob3JJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgn7J6R7ISx7J6QIOyeheugpS4uLicpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShhdXRob3JJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICd0ZXN0ZXIxLCB0ZXN0ZXIyJyB9IH0pO1xuXG4gICAgICBjb25zdCBzZWFyY2hCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCfqsoDsg4knKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzZWFyY2hCdXR0b24pO1xuXG4gICAgICBleHBlY3Qob25TZWFyY2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgY3JlYXRlZEJ5OiBbJ3Rlc3RlcjEnLCAndGVzdGVyMiddXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+uCoOynnCDrspTsnIQg7ZWE7YSwJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGUgcmFuZ2UgaW5wdXRzJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWFyY2ggPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXJBZHZhbmNlZEZpbHRlcih7IG9uU2VhcmNoIH0pO1xuXG4gICAgICBjb25zdCBmcm9tRGF0ZUlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCfsg53shLHsnbwgKOyLnOyekSknKTtcbiAgICAgIGNvbnN0IHRvRGF0ZUlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCfsg53shLHsnbwgKOyiheujjCknKTtcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShmcm9tRGF0ZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJzIwMjQtMDEtMDEnIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHRvRGF0ZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJzIwMjQtMTItMzEnIH0gfSk7XG5cbiAgICAgIGNvbnN0IHNlYXJjaEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ+qygOyDiScpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNlYXJjaEJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChvblNlYXJjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBkYXRlUmFuZ2U6IHtcbiAgICAgICAgICBmcm9tOiAnMjAyNC0wMS0wMScsXG4gICAgICAgICAgdG86ICcyMDI0LTEyLTMxJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+uzte2VqSDtlYTthLAnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb21iaW5lIG11bHRpcGxlIGZpbHRlcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvblNlYXJjaCA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlckFkdmFuY2VkRmlsdGVyKHsgb25TZWFyY2ggfSk7XG5cbiAgICAgIC8vIO2CpOybjOuTnCDsnoXroKVcbiAgICAgIGNvbnN0IGtleXdvcmRJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgn7KCc66qpLCDshKTrqoUsIOyKpO2FneyXkOyEnCDqsoDsg4kuLi4nKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoa2V5d29yZElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ2xvZ2luJyB9IH0pO1xuXG4gICAgICAvLyDtj7TrjZQg7ISg7YOdXG4gICAgICBjb25zdCBmb2xkZXJTZWxlY3QgPSBzY3JlZW4uZ2V0QnlUZXh0KCfshKDtg53tlZjshLjsmpQnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhmb2xkZXJTZWxlY3QpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ1Ntb2tlIFRlc3RzJykpO1xuXG4gICAgICAvLyDsmrDshKDsiJzsnIQg7ISg7YOdXG4gICAgICBjb25zdCBwcmlvcml0eVNlbGVjdCA9IHNjcmVlbi5nZXRBbGxCeVRleHQoJ+yEoO2Dne2VmOyEuOyalCcpWzNdOyAvLyDsmrDshKDsiJzsnITripQgNOuyiOynuFxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHByaW9yaXR5U2VsZWN0KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdIaWdoJykpO1xuXG4gICAgICAvLyDqsoDsg4kg67KE7Yq8IO2BtOumrVxuICAgICAgY29uc3Qgc2VhcmNoQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgn6rKA7IOJJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2VhcmNoQnV0dG9uKTtcblxuICAgICAgZXhwZWN0KG9uU2VhcmNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGtleXdvcmQ6ICdsb2dpbicsXG4gICAgICAgIGZvbGRlcnM6IFsnU21va2UgVGVzdHMnXSxcbiAgICAgICAgcHJpb3JpdHk6IFsnSGlnaCddXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+y0iOq4sO2ZlCDquLDriqUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjbGVhciBhbGwgZmlsdGVycyB3aGVuIGNsZWFyIGJ1dHRvbiBpcyBjbGlja2VkJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25DbGVhciA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlckFkdmFuY2VkRmlsdGVyKHsgb25DbGVhciB9KTtcblxuICAgICAgLy8g7ZWE7YSwIOyEpOyglVxuICAgICAgY29uc3Qga2V5d29yZElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KCfsoJzrqqksIOyEpOuqhSwg7Iqk7YWd7JeQ7IScIOqygOyDiS4uLicpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShrZXl3b3JkSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAndGVzdCcgfSB9KTtcblxuICAgICAgLy8g7LSI6riw7ZmUIOuyhO2KvCDtgbTrpq1cbiAgICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgn7LSI6riw7ZmUJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soY2xlYXJCdXR0b24pO1xuXG4gICAgICBleHBlY3Qob25DbGVhcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KGtleXdvcmRJbnB1dCkudG9IYXZlVmFsdWUoJycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn6rKA7IOJIO2UhOumrOyFiycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGxvYWQgYW5kIGRpc3BsYXkgc2F2ZWQgcHJlc2V0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQcmVzZXRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwcmVzZXRfMScsXG4gICAgICAgICAgbmFtZTogJ0NyaXRpY2FsIFRlc3RzJyxcbiAgICAgICAgICBmaWx0ZXJzOiB7IHByaW9yaXR5OiBbJ0hpZ2gnXSwgdGFnczogWydjcml0aWNhbCddIH0sXG4gICAgICAgICAgY3JlYXRlZEJ5OiAndGVzdGVyMScsXG4gICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0xNVQwMDowMDowMFonXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIG1vY2tBeGlvcy5nZXQubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrUHJlc2V0cyB9KTtcblxuICAgICAgcmVuZGVyQWR2YW5jZWRGaWx0ZXIoKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDcml0aWNhbCBUZXN0cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG9wZW4gc2F2ZSBwcmVzZXQgbW9kYWwgd2hlbiBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyQWR2YW5jZWRGaWx0ZXIoKTtcblxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ+2YhOyerCDsobDqsbQg7KCA7J6lJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfqsoDsg4kg7KGw6rG0IOyggOyepScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgn7ZSE66as7IWLIOydtOumhOydhCDsnoXroKXtlZjshLjsmpQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2F2ZSBwcmVzZXQgd2hlbiBtb2RhbCBmb3JtIGlzIHN1Ym1pdHRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQcmVzZXQgPSB7XG4gICAgICAgIGlkOiAncHJlc2V0XzEyMycsXG4gICAgICAgIG5hbWU6ICdNeSBQcmVzZXQnLFxuICAgICAgICBmaWx0ZXJzOiB7fSxcbiAgICAgICAgY3JlYXRlZEJ5OiAndGVzdGVyMScsXG4gICAgICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMTVUMDA6MDA6MDBaJ1xuICAgICAgfTtcblxuICAgICAgbW9ja0F4aW9zLnBvc3QubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrUHJlc2V0IH0pO1xuXG4gICAgICByZW5kZXJBZHZhbmNlZEZpbHRlcigpO1xuXG4gICAgICAvLyDsoIDsnqUg66qo64usIOyXtOq4sFxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ+2YhOyerCDsobDqsbQg7KCA7J6lJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIC8vIO2UhOumrOyFiyDsnbTrpoQg7J6F66ClXG4gICAgICBjb25zdCBuYW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoJ+2UhOumrOyFiyDsnbTrpoTsnYQg7J6F66Cl7ZWY7IS47JqUJyk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKG5hbWVJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdNeSBQcmVzZXQnIH0gfSk7XG5cbiAgICAgIC8vIOyggOyepSDrsoTtirwg7YG066atXG4gICAgICBjb25zdCBtb2RhbFNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCfsoIDsnqUnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhtb2RhbFNhdmVCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tBeGlvcy5wb3N0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS90ZXN0Y2FzZXMvc2VhcmNoL3ByZXNldHMnLCB7XG4gICAgICAgICAgbmFtZTogJ015IFByZXNldCcsXG4gICAgICAgICAgZmlsdGVyczoge30sXG4gICAgICAgICAgY3JlYXRlZEJ5OiAnY3VycmVudC11c2VyJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2FkIHByZXNldCB3aGVuIHByZXNldCB0YWcgaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9uU2VhcmNoID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgbW9ja1ByZXNldHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3ByZXNldF8xJyxcbiAgICAgICAgICBuYW1lOiAnQ3JpdGljYWwgVGVzdHMnLFxuICAgICAgICAgIGZpbHRlcnM6IHsgcHJpb3JpdHk6IFsnSGlnaCddLCB0YWdzOiBbJ2NyaXRpY2FsJ10gfSxcbiAgICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0ZXIxJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTE1VDAwOjAwOjAwWidcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgbW9ja0F4aW9zLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tQcmVzZXRzIH0pO1xuXG4gICAgICByZW5kZXJBZHZhbmNlZEZpbHRlcih7IG9uU2VhcmNoIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgcHJlc2V0VGFnID0gc2NyZWVuLmdldEJ5VGV4dCgnQ3JpdGljYWwgVGVzdHMnKTtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHByZXNldFRhZyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG9uU2VhcmNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHByaW9yaXR5OiBbJ0hpZ2gnXSxcbiAgICAgICAgdGFnczogWydjcml0aWNhbCddXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+ygkeq3vOyEsScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIEFSSUEgbGFiZWxzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyQWR2YW5jZWRGaWx0ZXIoKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgn7YKk7JuM65OcIOqygOyDiScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgn7J6R7ISx7J6QJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCfsg53shLHsnbwgKOyLnOyekSknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ+yDneyEseydvCAo7KKF66OMKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGtleWJvYXJkIG5hdmlnYXRpb24nLCAoKSA9PiB7XG4gICAgICByZW5kZXJBZHZhbmNlZEZpbHRlcigpO1xuXG4gICAgICBjb25zdCBrZXl3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoJ+ygnOuqqSwg7ISk66qFLCDsiqTthZ3sl5DshJwg6rKA7IOJLi4uJyk7XG4gICAgICBrZXl3b3JkSW5wdXQuZm9jdXMoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGtleXdvcmRJbnB1dCkudG9IYXZlRm9jdXMoKTtcbiAgICB9KTtcbiAgfSk7XG59KTsgIl0sInZlcnNpb24iOjN9