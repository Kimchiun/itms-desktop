10081e301235bbc4da4fea62f28193be
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const cors_1 = __importDefault(require("cors"));
const passport_1 = __importDefault(require("./infrastructure/security/passport"));
const authController_1 = __importDefault(require("./domains/users/controllers/authController"));
// import testCaseController from './domains/testcases/controllers/testCaseController';
const releaseController_1 = __importDefault(require("./domains/releases/controllers/releaseController"));
const executionController_1 = __importDefault(require("./domains/executions/controllers/executionController"));
const treeController_1 = __importDefault(require("./domains/tree/controllers/treeController"));
const app = (0, express_1.default)();
// 미들웨어 설정
app.use((0, cors_1.default)());
app.use(express_1.default.json());
app.use(express_1.default.urlencoded({ extended: true }));
// Passport 초기화
app.use(passport_1.default.initialize());
// 라우터 설정
app.use('/api/auth', authController_1.default);
// app.use('/api/testcases', testCaseController); // 기존 API 비활성화 - 폴더 기반 API 사용
app.use('/api/releases', releaseController_1.default);
app.use('/api/executions', executionController_1.default);
app.use('/api/tree', treeController_1.default); // 새로운 트리 API
// 기본 라우트
app.get('/', (req, res) => {
    res.json({ message: 'Quest Desktop App API' });
});
// 404 핸들러
app.use('*', (req, res) => {
    res.status(404).json({ message: '요청한 리소스를 찾을 수 없습니다.' });
});
// 에러 핸들러
app.use((error, req, res, next) => {
    console.error('서버 에러:', error);
    res.status(500).json({
        message: '서버 내부 오류가 발생했습니다.',
        error: process.env.NODE_ENV === 'development' ? error.message : undefined
    });
});
exports.default = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvbWFpbi9hcHAvYXBwLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsc0RBQThCO0FBQzlCLGdEQUF3QjtBQUN4QixrRkFBMEQ7QUFDMUQsZ0dBQXdFO0FBQ3hFLHVGQUF1RjtBQUN2Rix5R0FBaUY7QUFDakYsK0dBQXVGO0FBQ3ZGLCtGQUF1RTtBQUV2RSxNQUFNLEdBQUcsR0FBRyxJQUFBLGlCQUFPLEdBQUUsQ0FBQztBQUV0QixVQUFVO0FBQ1YsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFBLGNBQUksR0FBRSxDQUFDLENBQUM7QUFDaEIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxpQkFBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7QUFDeEIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxpQkFBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFFaEQsZUFBZTtBQUNmLEdBQUcsQ0FBQyxHQUFHLENBQUMsa0JBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO0FBRS9CLFNBQVM7QUFDVCxHQUFHLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSx3QkFBYyxDQUFDLENBQUM7QUFDckMsK0VBQStFO0FBQy9FLEdBQUcsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLDJCQUFpQixDQUFDLENBQUM7QUFDNUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSw2QkFBbUIsQ0FBQyxDQUFDO0FBQ2hELEdBQUcsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLHdCQUFjLENBQUMsQ0FBQyxDQUFDLGFBQWE7QUFFbkQsU0FBUztBQUNULEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBQ3hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsQ0FBQyxDQUFDO0FBQ2pELENBQUMsQ0FBQyxDQUFDO0FBRUgsVUFBVTtBQUNWLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBQ3hCLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLENBQUMsQ0FBQztBQUMzRCxDQUFDLENBQUMsQ0FBQztBQUVILFNBQVM7QUFDVCxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBVSxFQUFFLEdBQW9CLEVBQUUsR0FBcUIsRUFBRSxJQUEwQixFQUFFLEVBQUU7SUFDOUYsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDL0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDbkIsT0FBTyxFQUFFLG1CQUFtQjtRQUM1QixLQUFLLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssYUFBYSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTO0tBQzFFLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsa0JBQWUsR0FBRyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy8zaS1hMS0yMDIxLTAxNy9EZXNrdG9wL215LXByb2plY3Qvc3JjL21haW4vYXBwL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJy4vaW5mcmFzdHJ1Y3R1cmUvc2VjdXJpdHkvcGFzc3BvcnQnO1xuaW1wb3J0IGF1dGhDb250cm9sbGVyIGZyb20gJy4vZG9tYWlucy91c2Vycy9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlcic7XG4vLyBpbXBvcnQgdGVzdENhc2VDb250cm9sbGVyIGZyb20gJy4vZG9tYWlucy90ZXN0Y2FzZXMvY29udHJvbGxlcnMvdGVzdENhc2VDb250cm9sbGVyJztcbmltcG9ydCByZWxlYXNlQ29udHJvbGxlciBmcm9tICcuL2RvbWFpbnMvcmVsZWFzZXMvY29udHJvbGxlcnMvcmVsZWFzZUNvbnRyb2xsZXInO1xuaW1wb3J0IGV4ZWN1dGlvbkNvbnRyb2xsZXIgZnJvbSAnLi9kb21haW5zL2V4ZWN1dGlvbnMvY29udHJvbGxlcnMvZXhlY3V0aW9uQ29udHJvbGxlcic7XG5pbXBvcnQgdHJlZUNvbnRyb2xsZXIgZnJvbSAnLi9kb21haW5zL3RyZWUvY29udHJvbGxlcnMvdHJlZUNvbnRyb2xsZXInO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbi8vIOuvuOuTpOybqOyWtCDshKTsoJVcbmFwcC51c2UoY29ycygpKTtcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5cbi8vIFBhc3Nwb3J0IOy0iOq4sO2ZlFxuYXBwLnVzZShwYXNzcG9ydC5pbml0aWFsaXplKCkpO1xuXG4vLyDrnbzsmrDthLAg7ISk7KCVXG5hcHAudXNlKCcvYXBpL2F1dGgnLCBhdXRoQ29udHJvbGxlcik7XG4vLyBhcHAudXNlKCcvYXBpL3Rlc3RjYXNlcycsIHRlc3RDYXNlQ29udHJvbGxlcik7IC8vIOq4sOyhtCBBUEkg67mE7Zmc7ISx7ZmUIC0g7Y+0642UIOq4sOuwmCBBUEkg7IKs7JqpXG5hcHAudXNlKCcvYXBpL3JlbGVhc2VzJywgcmVsZWFzZUNvbnRyb2xsZXIpO1xuYXBwLnVzZSgnL2FwaS9leGVjdXRpb25zJywgZXhlY3V0aW9uQ29udHJvbGxlcik7XG5hcHAudXNlKCcvYXBpL3RyZWUnLCB0cmVlQ29udHJvbGxlcik7IC8vIOyDiOuhnOyatCDtirjrpqwgQVBJXG5cbi8vIOq4sOuzuCDrnbzsmrDtirhcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oeyBtZXNzYWdlOiAnUXVlc3QgRGVza3RvcCBBcHAgQVBJJyB9KTtcbn0pO1xuXG4vLyA0MDQg7ZW465Ok65+sXG5hcHAudXNlKCcqJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ+yalOyyre2VnCDrpqzshozsiqTrpbwg7LC+7J2EIOyImCDsl4bsirXri4jri6QuJyB9KTtcbn0pO1xuXG4vLyDsl5Drn6wg7ZW465Ok65+sXG5hcHAudXNlKChlcnJvcjogYW55LCByZXE6IGV4cHJlc3MuUmVxdWVzdCwgcmVzOiBleHByZXNzLlJlc3BvbnNlLCBuZXh0OiBleHByZXNzLk5leHRGdW5jdGlvbikgPT4ge1xuICBjb25zb2xlLmVycm9yKCfshJzrsoQg7JeQ65+sOicsIGVycm9yKTtcbiAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICBtZXNzYWdlOiAn7ISc67KEIOuCtOu2gCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLicsXG4gICAgZXJyb3I6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZFxuICB9KTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcHA7ICJdLCJ2ZXJzaW9uIjozfQ==