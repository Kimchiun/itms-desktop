{"file":"/Users/3i-a1-2021-017/Desktop/my-project/src/main/app/domains/testcases/controllers/testCaseController.ts","mappings":"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","names":[],"sources":["/Users/3i-a1-2021-017/Desktop/my-project/src/main/app/domains/testcases/controllers/testCaseController.ts"],"sourcesContent":["import { Router } from 'express';\nimport { createTestCaseWithVersion, updateTestCaseWithVersion, deleteTestCaseWithIndex, getTestCaseVersions } from '../services/testCaseService';\nimport { listTestCases, getTestCaseById } from '../repositories/testCaseRepository';\nimport { searchTestCases } from '../elasticsearch/testCaseIndexer';\nimport { advancedSearch, saveSearchPreset, getSearchPresets, deleteSearchPreset, AdvancedSearchFilter } from '../elasticsearch/advancedSearchService';\n\nconst router = Router();\n\nrouter.get('/', async (req, res) => {\n    const cases = await listTestCases();\n    res.json(cases);\n});\n\nrouter.get('/:id', async (req, res) => {\n    const tc = await getTestCaseById(Number(req.params.id));\n    if (!tc) return res.status(404).json({ message: 'Not found' });\n    res.json(tc);\n});\n\nrouter.post('/', async (req, res) => {\n    const created = await createTestCaseWithVersion({ ...req.body, createdBy: req.body.createdBy });\n    res.status(201).json(created);\n});\n\nrouter.put('/:id', async (req, res) => {\n    const updated = await updateTestCaseWithVersion(Number(req.params.id), req.body, req.body.updatedBy);\n    if (!updated) return res.status(404).json({ message: 'Not found' });\n    res.json(updated);\n});\n\nrouter.delete('/:id', async (req, res) => {\n    const ok = await deleteTestCaseWithIndex(Number(req.params.id));\n    if (!ok) return res.status(404).json({ message: 'Not found' });\n    res.status(204).send();\n});\n\nrouter.get('/:id/versions', async (req, res) => {\n    const versions = await getTestCaseVersions(Number(req.params.id));\n    res.json(versions);\n});\n\nrouter.post('/search', async (req, res) => {\n    // req.body: Elasticsearch DSL 쿼리\n    const results = await searchTestCases(req.body);\n    res.json(results);\n});\n\n// 고급 검색 API\nrouter.post('/search/advanced', async (req, res) => {\n    try {\n        const { filters, page = 0, size = 20 } = req.body;\n        const result = await advancedSearch(filters as AdvancedSearchFilter, page, size);\n        res.json(result);\n    } catch (error) {\n        console.error('Advanced search error:', error);\n        res.status(500).json({ message: '검색 중 오류가 발생했습니다.' });\n    }\n});\n\n// 검색 프리셋 저장\nrouter.post('/search/presets', async (req, res) => {\n    try {\n        const preset = await saveSearchPreset(req.body);\n        res.status(201).json(preset);\n    } catch (error) {\n        console.error('Save preset error:', error);\n        res.status(500).json({ message: '프리셋 저장 중 오류가 발생했습니다.' });\n    }\n});\n\n// 검색 프리셋 목록 조회\nrouter.get('/search/presets', async (req, res) => {\n    try {\n        const { createdBy } = req.query;\n        const presets = await getSearchPresets(createdBy as string);\n        res.json(presets);\n    } catch (error) {\n        console.error('Get presets error:', error);\n        res.status(500).json({ message: '프리셋 조회 중 오류가 발생했습니다.' });\n    }\n});\n\n// 검색 프리셋 삭제\nrouter.delete('/search/presets/:id', async (req, res) => {\n    try {\n        const success = await deleteSearchPreset(req.params.id);\n        if (success) {\n            res.status(204).send();\n        } else {\n            res.status(404).json({ message: '프리셋을 찾을 수 없습니다.' });\n        }\n    } catch (error) {\n        console.error('Delete preset error:', error);\n        res.status(500).json({ message: '프리셋 삭제 중 오류가 발생했습니다.' });\n    }\n});\n\nexport default router; "],"version":3}