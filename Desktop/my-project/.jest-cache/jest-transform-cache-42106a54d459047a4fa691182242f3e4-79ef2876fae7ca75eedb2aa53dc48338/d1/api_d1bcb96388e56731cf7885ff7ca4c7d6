4e7cf3d469b8af00a2bbe58825a1666c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useBulkUpdateStatusMutation = exports.useBulkDeleteMutation = exports.useBulkCopyMutation = exports.useBulkMoveMutation = exports.useRegisterMutation = exports.useLoginMutation = exports.useCreateCommentMutation = exports.useGetCommentsQuery = exports.useUpdateDefectMutation = exports.useCreateDefectMutation = exports.useGetDefectQuery = exports.useGetDefectsQuery = exports.useUpdateExecutionMutation = exports.useCreateExecutionMutation = exports.useGetExecutionsQuery = exports.useCreateSuiteMutation = exports.useGetSuitesQuery = exports.useDeleteReleaseMutation = exports.useUpdateReleaseMutation = exports.useCreateReleaseMutation = exports.useGetReleaseQuery = exports.useGetReleasesQuery = exports.useDeleteTestCaseMutation = exports.useUpdateTestCaseMutation = exports.useCreateTestCaseMutation = exports.useGetTestCaseQuery = exports.useGetTestCasesQuery = exports.api = void 0;
const react_1 = require("@reduxjs/toolkit/query/react");
// 인증 토큰 관리
const getAuthToken = () => localStorage.getItem('accessToken');
const setAuthToken = (token) => localStorage.setItem('accessToken', token);
const removeAuthToken = () => localStorage.removeItem('accessToken');
// 토큰 갱신 함수
const refreshToken = async () => {
    try {
        const response = await fetch('http://localhost:3000/api/auth/refresh', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            credentials: 'include',
        });
        if (response.ok) {
            const data = await response.json();
            setAuthToken(data.token);
            return data.token;
        }
    }
    catch (error) {
        console.error('Token refresh failed:', error);
    }
    return null;
};
// Base Query 설정
const baseQuery = (0, react_1.fetchBaseQuery)({
    baseUrl: 'http://localhost:3000',
    prepareHeaders: (headers) => {
        const token = getAuthToken();
        if (token) {
            headers.set('authorization', `Bearer ${token}`);
        }
        return headers;
    },
});
// 재시도 로직이 포함된 base query
const baseQueryWithReauth = async (args, api, extraOptions) => {
    let result = await baseQuery(args, api, extraOptions);
    if (result.error && result.error.status === 401) {
        // 토큰 갱신 시도
        const refreshResult = await refreshToken();
        if (refreshResult) {
            // 새로운 토큰으로 재시도
            result = await baseQuery(args, api, extraOptions);
        }
        else {
            // 갱신 실패 시 로그아웃
            removeAuthToken();
            window.location.href = '/login';
        }
    }
    return result;
};
// API 서비스 정의
exports.api = (0, react_1.createApi)({
    reducerPath: 'api',
    baseQuery: baseQueryWithReauth,
    tagTypes: ['TestCase', 'Release', 'Suite', 'Execution', 'Defect', 'Comment', 'User'],
    endpoints: (builder) => ({
        // TestCase API
        getTestCases: builder.query({
            query: () => '/api/testcases',
            providesTags: ['TestCase'],
        }),
        getTestCase: builder.query({
            query: (id) => `/api/testcases/${id}`,
            providesTags: (result, error, id) => [{ type: 'TestCase', id }],
        }),
        createTestCase: builder.mutation({
            query: (testCase) => ({
                url: '/api/testcases',
                method: 'POST',
                body: testCase,
            }),
            invalidatesTags: ['TestCase'],
        }),
        updateTestCase: builder.mutation({
            query: ({ id, data }) => ({
                url: `/api/testcases/${id}`,
                method: 'PUT',
                body: data,
            }),
            invalidatesTags: (result, error, { id }) => [{ type: 'TestCase', id }],
        }),
        deleteTestCase: builder.mutation({
            query: (id) => ({
                url: `/api/testcases/${id}`,
                method: 'DELETE',
            }),
            invalidatesTags: ['TestCase'],
        }),
        // Release API
        getReleases: builder.query({
            query: () => '/api/releases',
            providesTags: ['Release'],
        }),
        getRelease: builder.query({
            query: (id) => `/api/releases/${id}`,
            providesTags: (result, error, id) => [{ type: 'Release', id }],
        }),
        createRelease: builder.mutation({
            query: (release) => ({
                url: '/api/releases',
                method: 'POST',
                body: release,
            }),
            invalidatesTags: ['Release'],
        }),
        updateRelease: builder.mutation({
            query: ({ id, data }) => ({
                url: `/api/releases/${id}`,
                method: 'PUT',
                body: data,
            }),
            invalidatesTags: (result, error, { id }) => [{ type: 'Release', id }],
        }),
        deleteRelease: builder.mutation({
            query: (id) => ({
                url: `/api/releases/${id}`,
                method: 'DELETE',
            }),
            invalidatesTags: ['Release'],
        }),
        // Suite API
        getSuites: builder.query({
            query: () => '/api/suites',
            providesTags: ['Suite'],
        }),
        createSuite: builder.mutation({
            query: (suite) => ({
                url: '/api/suites',
                method: 'POST',
                body: suite,
            }),
            invalidatesTags: ['Suite'],
        }),
        // Execution API
        getExecutions: builder.query({
            query: (testcaseId) => `/api/executions/testcase/${testcaseId}`,
            providesTags: ['Execution'],
        }),
        createExecution: builder.mutation({
            query: (execution) => ({
                url: '/api/executions',
                method: 'POST',
                body: execution,
            }),
            invalidatesTags: ['Execution'],
        }),
        updateExecution: builder.mutation({
            query: ({ id, data }) => ({
                url: `/api/executions/${id}`,
                method: 'PUT',
                body: data,
            }),
            invalidatesTags: (result, error, { id }) => [{ type: 'Execution', id }],
        }),
        // Defect API
        getDefects: builder.query({
            query: () => '/api/defects',
            providesTags: ['Defect'],
        }),
        getDefect: builder.query({
            query: (id) => `/api/defects/${id}`,
            providesTags: (result, error, id) => [{ type: 'Defect', id }],
        }),
        createDefect: builder.mutation({
            query: (defect) => ({
                url: '/api/defects',
                method: 'POST',
                body: defect,
            }),
            invalidatesTags: ['Defect'],
        }),
        updateDefect: builder.mutation({
            query: ({ id, data }) => ({
                url: `/api/defects/${id}`,
                method: 'PUT',
                body: data,
            }),
            invalidatesTags: (result, error, { id }) => [{ type: 'Defect', id }],
        }),
        // Comment API
        getComments: builder.query({
            query: (executionId) => `/api/comments/execution/${executionId}`,
            providesTags: ['Comment'],
        }),
        createComment: builder.mutation({
            query: (comment) => ({
                url: '/api/comments',
                method: 'POST',
                body: comment,
            }),
            invalidatesTags: ['Comment'],
        }),
        // Auth API
        login: builder.mutation({
            query: (credentials) => ({
                url: '/api/auth/login',
                method: 'POST',
                body: credentials,
            }),
        }),
        register: builder.mutation({
            query: (userData) => ({
                url: '/api/auth/register',
                method: 'POST',
                body: userData,
            }),
        }),
        // Bulk Operations
        bulkMove: builder.mutation({
            query: (data) => ({
                url: '/api/bulk/move',
                method: 'POST',
                body: data,
            }),
            invalidatesTags: ['TestCase'],
        }),
        bulkCopy: builder.mutation({
            query: (data) => ({
                url: '/api/bulk/copy',
                method: 'POST',
                body: data,
            }),
            invalidatesTags: ['TestCase'],
        }),
        bulkDelete: builder.mutation({
            query: (data) => ({
                url: '/api/bulk',
                method: 'DELETE',
                body: data,
            }),
            invalidatesTags: ['TestCase'],
        }),
        bulkUpdateStatus: builder.mutation({
            query: (data) => ({
                url: '/api/bulk/status',
                method: 'PATCH',
                body: data,
            }),
            invalidatesTags: ['TestCase'],
        }),
    }),
});
// Auto-generated hooks
// TestCase hooks
exports.useGetTestCasesQuery = exports.api.useGetTestCasesQuery, exports.useGetTestCaseQuery = exports.api.useGetTestCaseQuery, exports.useCreateTestCaseMutation = exports.api.useCreateTestCaseMutation, exports.useUpdateTestCaseMutation = exports.api.useUpdateTestCaseMutation, exports.useDeleteTestCaseMutation = exports.api.useDeleteTestCaseMutation, 
// Release hooks
exports.useGetReleasesQuery = exports.api.useGetReleasesQuery, exports.useGetReleaseQuery = exports.api.useGetReleaseQuery, exports.useCreateReleaseMutation = exports.api.useCreateReleaseMutation, exports.useUpdateReleaseMutation = exports.api.useUpdateReleaseMutation, exports.useDeleteReleaseMutation = exports.api.useDeleteReleaseMutation, 
// Suite hooks
exports.useGetSuitesQuery = exports.api.useGetSuitesQuery, exports.useCreateSuiteMutation = exports.api.useCreateSuiteMutation, 
// Execution hooks
exports.useGetExecutionsQuery = exports.api.useGetExecutionsQuery, exports.useCreateExecutionMutation = exports.api.useCreateExecutionMutation, exports.useUpdateExecutionMutation = exports.api.useUpdateExecutionMutation, 
// Defect hooks
exports.useGetDefectsQuery = exports.api.useGetDefectsQuery, exports.useGetDefectQuery = exports.api.useGetDefectQuery, exports.useCreateDefectMutation = exports.api.useCreateDefectMutation, exports.useUpdateDefectMutation = exports.api.useUpdateDefectMutation, 
// Comment hooks
exports.useGetCommentsQuery = exports.api.useGetCommentsQuery, exports.useCreateCommentMutation = exports.api.useCreateCommentMutation, 
// Auth hooks
exports.useLoginMutation = exports.api.useLoginMutation, exports.useRegisterMutation = exports.api.useRegisterMutation, 
// Bulk operation hooks
exports.useBulkMoveMutation = exports.api.useBulkMoveMutation, exports.useBulkCopyMutation = exports.api.useBulkCopyMutation, exports.useBulkDeleteMutation = exports.api.useBulkDeleteMutation, exports.useBulkUpdateStatusMutation = exports.api.useBulkUpdateStatusMutation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvcmVuZGVyZXIvc2VydmljZXMvYXBpLnRzIiwibWFwcGluZ3MiOiI7OztBQUFBLHdEQUF5RTtBQVd6RSxXQUFXO0FBQ1gsTUFBTSxZQUFZLEdBQUcsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUMvRCxNQUFNLFlBQVksR0FBRyxDQUFDLEtBQWEsRUFBRSxFQUFFLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDbkYsTUFBTSxlQUFlLEdBQUcsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUVyRSxXQUFXO0FBQ1gsTUFBTSxZQUFZLEdBQUcsS0FBSyxJQUFJLEVBQUU7SUFDOUIsSUFBSSxDQUFDO1FBQ0gsTUFBTSxRQUFRLEdBQUcsTUFBTSxLQUFLLENBQUMsd0NBQXdDLEVBQUU7WUFDckUsTUFBTSxFQUFFLE1BQU07WUFDZCxPQUFPLEVBQUU7Z0JBQ1AsY0FBYyxFQUFFLGtCQUFrQjthQUNuQztZQUNELFdBQVcsRUFBRSxTQUFTO1NBQ3ZCLENBQUMsQ0FBQztRQUVILElBQUksUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ2hCLE1BQU0sSUFBSSxHQUFHLE1BQU0sUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ25DLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDekIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7SUFDSCxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsdUJBQXVCLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUNELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDO0FBRUYsZ0JBQWdCO0FBQ2hCLE1BQU0sU0FBUyxHQUFHLElBQUEsc0JBQWMsRUFBQztJQUMvQixPQUFPLEVBQUUsdUJBQXVCO0lBQ2hDLGNBQWMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFO1FBQzFCLE1BQU0sS0FBSyxHQUFHLFlBQVksRUFBRSxDQUFDO1FBQzdCLElBQUksS0FBSyxFQUFFLENBQUM7WUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxVQUFVLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDbEQsQ0FBQztRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7Q0FDRixDQUFDLENBQUM7QUFFSCx5QkFBeUI7QUFDekIsTUFBTSxtQkFBbUIsR0FBRyxLQUFLLEVBQUUsSUFBUyxFQUFFLEdBQVEsRUFBRSxZQUFpQixFQUFFLEVBQUU7SUFDM0UsSUFBSSxNQUFNLEdBQUcsTUFBTSxTQUFTLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUV0RCxJQUFJLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDaEQsV0FBVztRQUNYLE1BQU0sYUFBYSxHQUFHLE1BQU0sWUFBWSxFQUFFLENBQUM7UUFDM0MsSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUNsQixlQUFlO1lBQ2YsTUFBTSxHQUFHLE1BQU0sU0FBUyxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDcEQsQ0FBQzthQUFNLENBQUM7WUFDTixlQUFlO1lBQ2YsZUFBZSxFQUFFLENBQUM7WUFDbEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDO1FBQ2xDLENBQUM7SUFDSCxDQUFDO0lBRUQsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDO0FBRUYsYUFBYTtBQUNBLFFBQUEsR0FBRyxHQUFHLElBQUEsaUJBQVMsRUFBQztJQUMzQixXQUFXLEVBQUUsS0FBSztJQUNsQixTQUFTLEVBQUUsbUJBQW1CO0lBQzlCLFFBQVEsRUFBRSxDQUFDLFVBQVUsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQztJQUNwRixTQUFTLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDdkIsZUFBZTtRQUNmLFlBQVksRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFtQjtZQUM1QyxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsZ0JBQWdCO1lBQzdCLFlBQVksRUFBRSxDQUFDLFVBQVUsQ0FBQztTQUMzQixDQUFDO1FBRUYsV0FBVyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQW1CO1lBQzNDLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsRUFBRTtZQUNyQyxZQUFZLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLENBQUM7U0FDaEUsQ0FBQztRQUVGLGNBQWMsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUE4QjtZQUM1RCxLQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ3BCLEdBQUcsRUFBRSxnQkFBZ0I7Z0JBQ3JCLE1BQU0sRUFBRSxNQUFNO2dCQUNkLElBQUksRUFBRSxRQUFRO2FBQ2YsQ0FBQztZQUNGLGVBQWUsRUFBRSxDQUFDLFVBQVUsQ0FBQztTQUM5QixDQUFDO1FBRUYsY0FBYyxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQW9EO1lBQ2xGLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUN4QixHQUFHLEVBQUUsa0JBQWtCLEVBQUUsRUFBRTtnQkFDM0IsTUFBTSxFQUFFLEtBQUs7Z0JBQ2IsSUFBSSxFQUFFLElBQUk7YUFDWCxDQUFDO1lBQ0YsZUFBZSxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsQ0FBQztTQUN2RSxDQUFDO1FBRUYsY0FBYyxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQWU7WUFDN0MsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUNkLEdBQUcsRUFBRSxrQkFBa0IsRUFBRSxFQUFFO2dCQUMzQixNQUFNLEVBQUUsUUFBUTthQUNqQixDQUFDO1lBQ0YsZUFBZSxFQUFFLENBQUMsVUFBVSxDQUFDO1NBQzlCLENBQUM7UUFFRixjQUFjO1FBQ2QsV0FBVyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQWtCO1lBQzFDLEtBQUssRUFBRSxHQUFHLEVBQUUsQ0FBQyxlQUFlO1lBQzVCLFlBQVksRUFBRSxDQUFDLFNBQVMsQ0FBQztTQUMxQixDQUFDO1FBRUYsVUFBVSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQWtCO1lBQ3pDLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsaUJBQWlCLEVBQUUsRUFBRTtZQUNwQyxZQUFZLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUM7U0FDL0QsQ0FBQztRQUVGLGFBQWEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUE0QjtZQUN6RCxLQUFLLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ25CLEdBQUcsRUFBRSxlQUFlO2dCQUNwQixNQUFNLEVBQUUsTUFBTTtnQkFDZCxJQUFJLEVBQUUsT0FBTzthQUNkLENBQUM7WUFDRixlQUFlLEVBQUUsQ0FBQyxTQUFTLENBQUM7U0FDN0IsQ0FBQztRQUVGLGFBQWEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUFrRDtZQUMvRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDeEIsR0FBRyxFQUFFLGlCQUFpQixFQUFFLEVBQUU7Z0JBQzFCLE1BQU0sRUFBRSxLQUFLO2dCQUNiLElBQUksRUFBRSxJQUFJO2FBQ1gsQ0FBQztZQUNGLGVBQWUsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUM7U0FDdEUsQ0FBQztRQUVGLGFBQWEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUFlO1lBQzVDLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDZCxHQUFHLEVBQUUsaUJBQWlCLEVBQUUsRUFBRTtnQkFDMUIsTUFBTSxFQUFFLFFBQVE7YUFDakIsQ0FBQztZQUNGLGVBQWUsRUFBRSxDQUFDLFNBQVMsQ0FBQztTQUM3QixDQUFDO1FBRUYsWUFBWTtRQUNaLFNBQVMsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFnQjtZQUN0QyxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsYUFBYTtZQUMxQixZQUFZLEVBQUUsQ0FBQyxPQUFPLENBQUM7U0FDeEIsQ0FBQztRQUVGLFdBQVcsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUF3QjtZQUNuRCxLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ2pCLEdBQUcsRUFBRSxhQUFhO2dCQUNsQixNQUFNLEVBQUUsTUFBTTtnQkFDZCxJQUFJLEVBQUUsS0FBSzthQUNaLENBQUM7WUFDRixlQUFlLEVBQUUsQ0FBQyxPQUFPLENBQUM7U0FDM0IsQ0FBQztRQUVGLGdCQUFnQjtRQUNoQixhQUFhLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBc0I7WUFDaEQsS0FBSyxFQUFFLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyw0QkFBNEIsVUFBVSxFQUFFO1lBQy9ELFlBQVksRUFBRSxDQUFDLFdBQVcsQ0FBQztTQUM1QixDQUFDO1FBRUYsZUFBZSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQWdDO1lBQy9ELEtBQUssRUFBRSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDckIsR0FBRyxFQUFFLGlCQUFpQjtnQkFDdEIsTUFBTSxFQUFFLE1BQU07Z0JBQ2QsSUFBSSxFQUFFLFNBQVM7YUFDaEIsQ0FBQztZQUNGLGVBQWUsRUFBRSxDQUFDLFdBQVcsQ0FBQztTQUMvQixDQUFDO1FBRUYsZUFBZSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQXNEO1lBQ3JGLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUN4QixHQUFHLEVBQUUsbUJBQW1CLEVBQUUsRUFBRTtnQkFDNUIsTUFBTSxFQUFFLEtBQUs7Z0JBQ2IsSUFBSSxFQUFFLElBQUk7YUFDWCxDQUFDO1lBQ0YsZUFBZSxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUUsQ0FBQztTQUN4RSxDQUFDO1FBRUYsYUFBYTtRQUNiLFVBQVUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFpQjtZQUN4QyxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsY0FBYztZQUMzQixZQUFZLEVBQUUsQ0FBQyxRQUFRLENBQUM7U0FDekIsQ0FBQztRQUVGLFNBQVMsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFpQjtZQUN2QyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLGdCQUFnQixFQUFFLEVBQUU7WUFDbkMsWUFBWSxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQzlELENBQUM7UUFFRixZQUFZLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBMEI7WUFDdEQsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUNsQixHQUFHLEVBQUUsY0FBYztnQkFDbkIsTUFBTSxFQUFFLE1BQU07Z0JBQ2QsSUFBSSxFQUFFLE1BQU07YUFDYixDQUFDO1lBQ0YsZUFBZSxFQUFFLENBQUMsUUFBUSxDQUFDO1NBQzVCLENBQUM7UUFFRixZQUFZLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBZ0Q7WUFDNUUsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ3hCLEdBQUcsRUFBRSxnQkFBZ0IsRUFBRSxFQUFFO2dCQUN6QixNQUFNLEVBQUUsS0FBSztnQkFDYixJQUFJLEVBQUUsSUFBSTthQUNYLENBQUM7WUFDRixlQUFlLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQ3JFLENBQUM7UUFFRixjQUFjO1FBQ2QsV0FBVyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQW9CO1lBQzVDLEtBQUssRUFBRSxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsMkJBQTJCLFdBQVcsRUFBRTtZQUNoRSxZQUFZLEVBQUUsQ0FBQyxTQUFTLENBQUM7U0FDMUIsQ0FBQztRQUVGLGFBQWEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUE0QjtZQUN6RCxLQUFLLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ25CLEdBQUcsRUFBRSxlQUFlO2dCQUNwQixNQUFNLEVBQUUsTUFBTTtnQkFDZCxJQUFJLEVBQUUsT0FBTzthQUNkLENBQUM7WUFDRixlQUFlLEVBQUUsQ0FBQyxTQUFTLENBQUM7U0FDN0IsQ0FBQztRQUVGLFdBQVc7UUFDWCxLQUFLLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBd0U7WUFDN0YsS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUN2QixHQUFHLEVBQUUsaUJBQWlCO2dCQUN0QixNQUFNLEVBQUUsTUFBTTtnQkFDZCxJQUFJLEVBQUUsV0FBVzthQUNsQixDQUFDO1NBQ0gsQ0FBQztRQUVGLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUE2RDtZQUNyRixLQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ3BCLEdBQUcsRUFBRSxvQkFBb0I7Z0JBQ3pCLE1BQU0sRUFBRSxNQUFNO2dCQUNkLElBQUksRUFBRSxRQUFRO2FBQ2YsQ0FBQztTQUNILENBQUM7UUFFRixrQkFBa0I7UUFDbEIsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQWdEO1lBQ3hFLEtBQUssRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDaEIsR0FBRyxFQUFFLGdCQUFnQjtnQkFDckIsTUFBTSxFQUFFLE1BQU07Z0JBQ2QsSUFBSSxFQUFFLElBQUk7YUFDWCxDQUFDO1lBQ0YsZUFBZSxFQUFFLENBQUMsVUFBVSxDQUFDO1NBQzlCLENBQUM7UUFFRixRQUFRLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBZ0Q7WUFDeEUsS0FBSyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUNoQixHQUFHLEVBQUUsZ0JBQWdCO2dCQUNyQixNQUFNLEVBQUUsTUFBTTtnQkFDZCxJQUFJLEVBQUUsSUFBSTthQUNYLENBQUM7WUFDRixlQUFlLEVBQUUsQ0FBQyxVQUFVLENBQUM7U0FDOUIsQ0FBQztRQUVGLFVBQVUsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUEwQjtZQUNwRCxLQUFLLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ2hCLEdBQUcsRUFBRSxXQUFXO2dCQUNoQixNQUFNLEVBQUUsUUFBUTtnQkFDaEIsSUFBSSxFQUFFLElBQUk7YUFDWCxDQUFDO1lBQ0YsZUFBZSxFQUFFLENBQUMsVUFBVSxDQUFDO1NBQzlCLENBQUM7UUFFRixnQkFBZ0IsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUEwQztZQUMxRSxLQUFLLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ2hCLEdBQUcsRUFBRSxrQkFBa0I7Z0JBQ3ZCLE1BQU0sRUFBRSxPQUFPO2dCQUNmLElBQUksRUFBRSxJQUFJO2FBQ1gsQ0FBQztZQUNGLGVBQWUsRUFBRSxDQUFDLFVBQVUsQ0FBQztTQUM5QixDQUFDO0tBQ0gsQ0FBQztDQUNILENBQUMsQ0FBQztBQUVILHVCQUF1QjtBQUVyQixpQkFBaUI7QUFDakIsNEJBQW9CLEdBeUNsQixXQUFHLHVCQXhDTCwyQkFBbUIsR0F3Q2pCLFdBQUcsc0JBdkNMLGlDQUF5QixHQXVDdkIsV0FBRyw0QkF0Q0wsaUNBQXlCLEdBc0N2QixXQUFHLDRCQXJDTCxpQ0FBeUIsR0FxQ3ZCLFdBQUc7QUFuQ0wsZ0JBQWdCO0FBQ2hCLDJCQUFtQixHQWtDakIsV0FBRyxzQkFqQ0wsMEJBQWtCLEdBaUNoQixXQUFHLHFCQWhDTCxnQ0FBd0IsR0FnQ3RCLFdBQUcsMkJBL0JMLGdDQUF3QixHQStCdEIsV0FBRywyQkE5QkwsZ0NBQXdCLEdBOEJ0QixXQUFHO0FBNUJMLGNBQWM7QUFDZCx5QkFBaUIsR0EyQmYsV0FBRyxvQkExQkwsOEJBQXNCLEdBMEJwQixXQUFHO0FBeEJMLGtCQUFrQjtBQUNsQiw2QkFBcUIsR0F1Qm5CLFdBQUcsd0JBdEJMLGtDQUEwQixHQXNCeEIsV0FBRyw2QkFyQkwsa0NBQTBCLEdBcUJ4QixXQUFHO0FBbkJMLGVBQWU7QUFDZiwwQkFBa0IsR0FrQmhCLFdBQUcscUJBakJMLHlCQUFpQixHQWlCZixXQUFHLG9CQWhCTCwrQkFBdUIsR0FnQnJCLFdBQUcsMEJBZkwsK0JBQXVCLEdBZXJCLFdBQUc7QUFiTCxnQkFBZ0I7QUFDaEIsMkJBQW1CLEdBWWpCLFdBQUcsc0JBWEwsZ0NBQXdCLEdBV3RCLFdBQUc7QUFUTCxhQUFhO0FBQ2Isd0JBQWdCLEdBUWQsV0FBRyxtQkFQTCwyQkFBbUIsR0FPakIsV0FBRztBQUxMLHVCQUF1QjtBQUN2QiwyQkFBbUIsR0FJakIsV0FBRyxzQkFITCwyQkFBbUIsR0FHakIsV0FBRyxzQkFGTCw2QkFBcUIsR0FFbkIsV0FBRyx3QkFETCxtQ0FBMkIsR0FDekIsV0FBRyw2QkFBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvM2ktYTEtMjAyMS0wMTcvRGVza3RvcC9teS1wcm9qZWN0L3NyYy9yZW5kZXJlci9zZXJ2aWNlcy9hcGkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQXBpLCBmZXRjaEJhc2VRdWVyeSB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQvcXVlcnkvcmVhY3QnO1xuaW1wb3J0IHR5cGUgeyBcbiAgVGVzdENhc2UsIFxuICBSZWxlYXNlLCBcbiAgU3VpdGUsIFxuICBFeGVjdXRpb24sIFxuICBEZWZlY3QsIFxuICBDb21tZW50LFxuICBVc2VyIFxufSBmcm9tICcuLi90eXBlcyc7XG5cbi8vIOyduOymnSDthqDtgbAg6rSA66asXG5jb25zdCBnZXRBdXRoVG9rZW4gPSAoKSA9PiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKTtcbmNvbnN0IHNldEF1dGhUb2tlbiA9ICh0b2tlbjogc3RyaW5nKSA9PiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCB0b2tlbik7XG5jb25zdCByZW1vdmVBdXRoVG9rZW4gPSAoKSA9PiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWNjZXNzVG9rZW4nKTtcblxuLy8g7Yag7YGwIOqwseyLoCDtlajsiJhcbmNvbnN0IHJlZnJlc2hUb2tlbiA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2F1dGgvcmVmcmVzaCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgc2V0QXV0aFRva2VuKGRhdGEudG9rZW4pO1xuICAgICAgcmV0dXJuIGRhdGEudG9rZW47XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHJlZnJlc2ggZmFpbGVkOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8vIEJhc2UgUXVlcnkg7ISk7KCVXG5jb25zdCBiYXNlUXVlcnkgPSBmZXRjaEJhc2VRdWVyeSh7XG4gIGJhc2VVcmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLFxuICBwcmVwYXJlSGVhZGVyczogKGhlYWRlcnMpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IGdldEF1dGhUb2tlbigpO1xuICAgIGlmICh0b2tlbikge1xuICAgICAgaGVhZGVycy5zZXQoJ2F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YCk7XG4gICAgfVxuICAgIHJldHVybiBoZWFkZXJzO1xuICB9LFxufSk7XG5cbi8vIOyerOyLnOuPhCDroZzsp4HsnbQg7Y+s7ZWo65CcIGJhc2UgcXVlcnlcbmNvbnN0IGJhc2VRdWVyeVdpdGhSZWF1dGggPSBhc3luYyAoYXJnczogYW55LCBhcGk6IGFueSwgZXh0cmFPcHRpb25zOiBhbnkpID0+IHtcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IGJhc2VRdWVyeShhcmdzLCBhcGksIGV4dHJhT3B0aW9ucyk7XG4gIFxuICBpZiAocmVzdWx0LmVycm9yICYmIHJlc3VsdC5lcnJvci5zdGF0dXMgPT09IDQwMSkge1xuICAgIC8vIO2GoO2BsCDqsLHsi6Ag7Iuc64+EXG4gICAgY29uc3QgcmVmcmVzaFJlc3VsdCA9IGF3YWl0IHJlZnJlc2hUb2tlbigpO1xuICAgIGlmIChyZWZyZXNoUmVzdWx0KSB7XG4gICAgICAvLyDsg4jroZzsmrQg7Yag7YGw7Jy866GcIOyerOyLnOuPhFxuICAgICAgcmVzdWx0ID0gYXdhaXQgYmFzZVF1ZXJ5KGFyZ3MsIGFwaSwgZXh0cmFPcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g6rCx7IugIOyLpO2MqCDsi5wg66Gc6re47JWE7JuDXG4gICAgICByZW1vdmVBdXRoVG9rZW4oKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9sb2dpbic7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gQVBJIOyEnOu5hOyKpCDsoJXsnZhcbmV4cG9ydCBjb25zdCBhcGkgPSBjcmVhdGVBcGkoe1xuICByZWR1Y2VyUGF0aDogJ2FwaScsXG4gIGJhc2VRdWVyeTogYmFzZVF1ZXJ5V2l0aFJlYXV0aCxcbiAgdGFnVHlwZXM6IFsnVGVzdENhc2UnLCAnUmVsZWFzZScsICdTdWl0ZScsICdFeGVjdXRpb24nLCAnRGVmZWN0JywgJ0NvbW1lbnQnLCAnVXNlciddLFxuICBlbmRwb2ludHM6IChidWlsZGVyKSA9PiAoe1xuICAgIC8vIFRlc3RDYXNlIEFQSVxuICAgIGdldFRlc3RDYXNlczogYnVpbGRlci5xdWVyeTxUZXN0Q2FzZVtdLCB2b2lkPih7XG4gICAgICBxdWVyeTogKCkgPT4gJy9hcGkvdGVzdGNhc2VzJyxcbiAgICAgIHByb3ZpZGVzVGFnczogWydUZXN0Q2FzZSddLFxuICAgIH0pLFxuICAgIFxuICAgIGdldFRlc3RDYXNlOiBidWlsZGVyLnF1ZXJ5PFRlc3RDYXNlLCBudW1iZXI+KHtcbiAgICAgIHF1ZXJ5OiAoaWQpID0+IGAvYXBpL3Rlc3RjYXNlcy8ke2lkfWAsXG4gICAgICBwcm92aWRlc1RhZ3M6IChyZXN1bHQsIGVycm9yLCBpZCkgPT4gW3sgdHlwZTogJ1Rlc3RDYXNlJywgaWQgfV0sXG4gICAgfSksXG4gICAgXG4gICAgY3JlYXRlVGVzdENhc2U6IGJ1aWxkZXIubXV0YXRpb248VGVzdENhc2UsIFBhcnRpYWw8VGVzdENhc2U+Pih7XG4gICAgICBxdWVyeTogKHRlc3RDYXNlKSA9PiAoe1xuICAgICAgICB1cmw6ICcvYXBpL3Rlc3RjYXNlcycsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiB0ZXN0Q2FzZSxcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZXNUYWdzOiBbJ1Rlc3RDYXNlJ10sXG4gICAgfSksXG4gICAgXG4gICAgdXBkYXRlVGVzdENhc2U6IGJ1aWxkZXIubXV0YXRpb248VGVzdENhc2UsIHsgaWQ6IG51bWJlcjsgZGF0YTogUGFydGlhbDxUZXN0Q2FzZT4gfT4oe1xuICAgICAgcXVlcnk6ICh7IGlkLCBkYXRhIH0pID0+ICh7XG4gICAgICAgIHVybDogYC9hcGkvdGVzdGNhc2VzLyR7aWR9YCxcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgYm9keTogZGF0YSxcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZXNUYWdzOiAocmVzdWx0LCBlcnJvciwgeyBpZCB9KSA9PiBbeyB0eXBlOiAnVGVzdENhc2UnLCBpZCB9XSxcbiAgICB9KSxcbiAgICBcbiAgICBkZWxldGVUZXN0Q2FzZTogYnVpbGRlci5tdXRhdGlvbjx2b2lkLCBudW1iZXI+KHtcbiAgICAgIHF1ZXJ5OiAoaWQpID0+ICh7XG4gICAgICAgIHVybDogYC9hcGkvdGVzdGNhc2VzLyR7aWR9YCxcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZXNUYWdzOiBbJ1Rlc3RDYXNlJ10sXG4gICAgfSksXG4gICAgXG4gICAgLy8gUmVsZWFzZSBBUElcbiAgICBnZXRSZWxlYXNlczogYnVpbGRlci5xdWVyeTxSZWxlYXNlW10sIHZvaWQ+KHtcbiAgICAgIHF1ZXJ5OiAoKSA9PiAnL2FwaS9yZWxlYXNlcycsXG4gICAgICBwcm92aWRlc1RhZ3M6IFsnUmVsZWFzZSddLFxuICAgIH0pLFxuICAgIFxuICAgIGdldFJlbGVhc2U6IGJ1aWxkZXIucXVlcnk8UmVsZWFzZSwgbnVtYmVyPih7XG4gICAgICBxdWVyeTogKGlkKSA9PiBgL2FwaS9yZWxlYXNlcy8ke2lkfWAsXG4gICAgICBwcm92aWRlc1RhZ3M6IChyZXN1bHQsIGVycm9yLCBpZCkgPT4gW3sgdHlwZTogJ1JlbGVhc2UnLCBpZCB9XSxcbiAgICB9KSxcbiAgICBcbiAgICBjcmVhdGVSZWxlYXNlOiBidWlsZGVyLm11dGF0aW9uPFJlbGVhc2UsIFBhcnRpYWw8UmVsZWFzZT4+KHtcbiAgICAgIHF1ZXJ5OiAocmVsZWFzZSkgPT4gKHtcbiAgICAgICAgdXJsOiAnL2FwaS9yZWxlYXNlcycsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiByZWxlYXNlLFxuICAgICAgfSksXG4gICAgICBpbnZhbGlkYXRlc1RhZ3M6IFsnUmVsZWFzZSddLFxuICAgIH0pLFxuICAgIFxuICAgIHVwZGF0ZVJlbGVhc2U6IGJ1aWxkZXIubXV0YXRpb248UmVsZWFzZSwgeyBpZDogbnVtYmVyOyBkYXRhOiBQYXJ0aWFsPFJlbGVhc2U+IH0+KHtcbiAgICAgIHF1ZXJ5OiAoeyBpZCwgZGF0YSB9KSA9PiAoe1xuICAgICAgICB1cmw6IGAvYXBpL3JlbGVhc2VzLyR7aWR9YCxcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgYm9keTogZGF0YSxcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZXNUYWdzOiAocmVzdWx0LCBlcnJvciwgeyBpZCB9KSA9PiBbeyB0eXBlOiAnUmVsZWFzZScsIGlkIH1dLFxuICAgIH0pLFxuICAgIFxuICAgIGRlbGV0ZVJlbGVhc2U6IGJ1aWxkZXIubXV0YXRpb248dm9pZCwgbnVtYmVyPih7XG4gICAgICBxdWVyeTogKGlkKSA9PiAoe1xuICAgICAgICB1cmw6IGAvYXBpL3JlbGVhc2VzLyR7aWR9YCxcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZXNUYWdzOiBbJ1JlbGVhc2UnXSxcbiAgICB9KSxcbiAgICBcbiAgICAvLyBTdWl0ZSBBUElcbiAgICBnZXRTdWl0ZXM6IGJ1aWxkZXIucXVlcnk8U3VpdGVbXSwgdm9pZD4oe1xuICAgICAgcXVlcnk6ICgpID0+ICcvYXBpL3N1aXRlcycsXG4gICAgICBwcm92aWRlc1RhZ3M6IFsnU3VpdGUnXSxcbiAgICB9KSxcbiAgICBcbiAgICBjcmVhdGVTdWl0ZTogYnVpbGRlci5tdXRhdGlvbjxTdWl0ZSwgUGFydGlhbDxTdWl0ZT4+KHtcbiAgICAgIHF1ZXJ5OiAoc3VpdGUpID0+ICh7XG4gICAgICAgIHVybDogJy9hcGkvc3VpdGVzJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IHN1aXRlLFxuICAgICAgfSksXG4gICAgICBpbnZhbGlkYXRlc1RhZ3M6IFsnU3VpdGUnXSxcbiAgICB9KSxcbiAgICBcbiAgICAvLyBFeGVjdXRpb24gQVBJXG4gICAgZ2V0RXhlY3V0aW9uczogYnVpbGRlci5xdWVyeTxFeGVjdXRpb25bXSwgbnVtYmVyPih7XG4gICAgICBxdWVyeTogKHRlc3RjYXNlSWQpID0+IGAvYXBpL2V4ZWN1dGlvbnMvdGVzdGNhc2UvJHt0ZXN0Y2FzZUlkfWAsXG4gICAgICBwcm92aWRlc1RhZ3M6IFsnRXhlY3V0aW9uJ10sXG4gICAgfSksXG4gICAgXG4gICAgY3JlYXRlRXhlY3V0aW9uOiBidWlsZGVyLm11dGF0aW9uPEV4ZWN1dGlvbiwgUGFydGlhbDxFeGVjdXRpb24+Pih7XG4gICAgICBxdWVyeTogKGV4ZWN1dGlvbikgPT4gKHtcbiAgICAgICAgdXJsOiAnL2FwaS9leGVjdXRpb25zJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGV4ZWN1dGlvbixcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZXNUYWdzOiBbJ0V4ZWN1dGlvbiddLFxuICAgIH0pLFxuICAgIFxuICAgIHVwZGF0ZUV4ZWN1dGlvbjogYnVpbGRlci5tdXRhdGlvbjxFeGVjdXRpb24sIHsgaWQ6IG51bWJlcjsgZGF0YTogUGFydGlhbDxFeGVjdXRpb24+IH0+KHtcbiAgICAgIHF1ZXJ5OiAoeyBpZCwgZGF0YSB9KSA9PiAoe1xuICAgICAgICB1cmw6IGAvYXBpL2V4ZWN1dGlvbnMvJHtpZH1gLFxuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBib2R5OiBkYXRhLFxuICAgICAgfSksXG4gICAgICBpbnZhbGlkYXRlc1RhZ3M6IChyZXN1bHQsIGVycm9yLCB7IGlkIH0pID0+IFt7IHR5cGU6ICdFeGVjdXRpb24nLCBpZCB9XSxcbiAgICB9KSxcbiAgICBcbiAgICAvLyBEZWZlY3QgQVBJXG4gICAgZ2V0RGVmZWN0czogYnVpbGRlci5xdWVyeTxEZWZlY3RbXSwgdm9pZD4oe1xuICAgICAgcXVlcnk6ICgpID0+ICcvYXBpL2RlZmVjdHMnLFxuICAgICAgcHJvdmlkZXNUYWdzOiBbJ0RlZmVjdCddLFxuICAgIH0pLFxuICAgIFxuICAgIGdldERlZmVjdDogYnVpbGRlci5xdWVyeTxEZWZlY3QsIG51bWJlcj4oe1xuICAgICAgcXVlcnk6IChpZCkgPT4gYC9hcGkvZGVmZWN0cy8ke2lkfWAsXG4gICAgICBwcm92aWRlc1RhZ3M6IChyZXN1bHQsIGVycm9yLCBpZCkgPT4gW3sgdHlwZTogJ0RlZmVjdCcsIGlkIH1dLFxuICAgIH0pLFxuICAgIFxuICAgIGNyZWF0ZURlZmVjdDogYnVpbGRlci5tdXRhdGlvbjxEZWZlY3QsIFBhcnRpYWw8RGVmZWN0Pj4oe1xuICAgICAgcXVlcnk6IChkZWZlY3QpID0+ICh7XG4gICAgICAgIHVybDogJy9hcGkvZGVmZWN0cycsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBkZWZlY3QsXG4gICAgICB9KSxcbiAgICAgIGludmFsaWRhdGVzVGFnczogWydEZWZlY3QnXSxcbiAgICB9KSxcbiAgICBcbiAgICB1cGRhdGVEZWZlY3Q6IGJ1aWxkZXIubXV0YXRpb248RGVmZWN0LCB7IGlkOiBudW1iZXI7IGRhdGE6IFBhcnRpYWw8RGVmZWN0PiB9Pih7XG4gICAgICBxdWVyeTogKHsgaWQsIGRhdGEgfSkgPT4gKHtcbiAgICAgICAgdXJsOiBgL2FwaS9kZWZlY3RzLyR7aWR9YCxcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgYm9keTogZGF0YSxcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZXNUYWdzOiAocmVzdWx0LCBlcnJvciwgeyBpZCB9KSA9PiBbeyB0eXBlOiAnRGVmZWN0JywgaWQgfV0sXG4gICAgfSksXG4gICAgXG4gICAgLy8gQ29tbWVudCBBUElcbiAgICBnZXRDb21tZW50czogYnVpbGRlci5xdWVyeTxDb21tZW50W10sIG51bWJlcj4oe1xuICAgICAgcXVlcnk6IChleGVjdXRpb25JZCkgPT4gYC9hcGkvY29tbWVudHMvZXhlY3V0aW9uLyR7ZXhlY3V0aW9uSWR9YCxcbiAgICAgIHByb3ZpZGVzVGFnczogWydDb21tZW50J10sXG4gICAgfSksXG4gICAgXG4gICAgY3JlYXRlQ29tbWVudDogYnVpbGRlci5tdXRhdGlvbjxDb21tZW50LCBQYXJ0aWFsPENvbW1lbnQ+Pih7XG4gICAgICBxdWVyeTogKGNvbW1lbnQpID0+ICh7XG4gICAgICAgIHVybDogJy9hcGkvY29tbWVudHMnLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogY29tbWVudCxcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZXNUYWdzOiBbJ0NvbW1lbnQnXSxcbiAgICB9KSxcbiAgICBcbiAgICAvLyBBdXRoIEFQSVxuICAgIGxvZ2luOiBidWlsZGVyLm11dGF0aW9uPHsgdG9rZW46IHN0cmluZzsgdXNlcjogVXNlciB9LCB7IHVzZXJuYW1lOiBzdHJpbmc7IHBhc3N3b3JkOiBzdHJpbmcgfT4oe1xuICAgICAgcXVlcnk6IChjcmVkZW50aWFscykgPT4gKHtcbiAgICAgICAgdXJsOiAnL2FwaS9hdXRoL2xvZ2luJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGNyZWRlbnRpYWxzLFxuICAgICAgfSksXG4gICAgfSksXG4gICAgXG4gICAgcmVnaXN0ZXI6IGJ1aWxkZXIubXV0YXRpb248VXNlciwgeyB1c2VybmFtZTogc3RyaW5nOyBwYXNzd29yZDogc3RyaW5nOyByb2xlOiBzdHJpbmcgfT4oe1xuICAgICAgcXVlcnk6ICh1c2VyRGF0YSkgPT4gKHtcbiAgICAgICAgdXJsOiAnL2FwaS9hdXRoL3JlZ2lzdGVyJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IHVzZXJEYXRhLFxuICAgICAgfSksXG4gICAgfSksXG4gICAgXG4gICAgLy8gQnVsayBPcGVyYXRpb25zXG4gICAgYnVsa01vdmU6IGJ1aWxkZXIubXV0YXRpb248dm9pZCwgeyBpZHM6IG51bWJlcltdOyB0YXJnZXRGb2xkZXI6IHN0cmluZyB9Pih7XG4gICAgICBxdWVyeTogKGRhdGEpID0+ICh7XG4gICAgICAgIHVybDogJy9hcGkvYnVsay9tb3ZlJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGRhdGEsXG4gICAgICB9KSxcbiAgICAgIGludmFsaWRhdGVzVGFnczogWydUZXN0Q2FzZSddLFxuICAgIH0pLFxuICAgIFxuICAgIGJ1bGtDb3B5OiBidWlsZGVyLm11dGF0aW9uPHZvaWQsIHsgaWRzOiBudW1iZXJbXTsgdGFyZ2V0Rm9sZGVyOiBzdHJpbmcgfT4oe1xuICAgICAgcXVlcnk6IChkYXRhKSA9PiAoe1xuICAgICAgICB1cmw6ICcvYXBpL2J1bGsvY29weScsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBkYXRhLFxuICAgICAgfSksXG4gICAgICBpbnZhbGlkYXRlc1RhZ3M6IFsnVGVzdENhc2UnXSxcbiAgICB9KSxcbiAgICBcbiAgICBidWxrRGVsZXRlOiBidWlsZGVyLm11dGF0aW9uPHZvaWQsIHsgaWRzOiBudW1iZXJbXSB9Pih7XG4gICAgICBxdWVyeTogKGRhdGEpID0+ICh7XG4gICAgICAgIHVybDogJy9hcGkvYnVsaycsXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIGJvZHk6IGRhdGEsXG4gICAgICB9KSxcbiAgICAgIGludmFsaWRhdGVzVGFnczogWydUZXN0Q2FzZSddLFxuICAgIH0pLFxuICAgIFxuICAgIGJ1bGtVcGRhdGVTdGF0dXM6IGJ1aWxkZXIubXV0YXRpb248dm9pZCwgeyBpZHM6IG51bWJlcltdOyBzdGF0dXM6IHN0cmluZyB9Pih7XG4gICAgICBxdWVyeTogKGRhdGEpID0+ICh7XG4gICAgICAgIHVybDogJy9hcGkvYnVsay9zdGF0dXMnLFxuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGJvZHk6IGRhdGEsXG4gICAgICB9KSxcbiAgICAgIGludmFsaWRhdGVzVGFnczogWydUZXN0Q2FzZSddLFxuICAgIH0pLFxuICB9KSxcbn0pO1xuXG4vLyBBdXRvLWdlbmVyYXRlZCBob29rc1xuZXhwb3J0IGNvbnN0IHtcbiAgLy8gVGVzdENhc2UgaG9va3NcbiAgdXNlR2V0VGVzdENhc2VzUXVlcnksXG4gIHVzZUdldFRlc3RDYXNlUXVlcnksXG4gIHVzZUNyZWF0ZVRlc3RDYXNlTXV0YXRpb24sXG4gIHVzZVVwZGF0ZVRlc3RDYXNlTXV0YXRpb24sXG4gIHVzZURlbGV0ZVRlc3RDYXNlTXV0YXRpb24sXG4gIFxuICAvLyBSZWxlYXNlIGhvb2tzXG4gIHVzZUdldFJlbGVhc2VzUXVlcnksXG4gIHVzZUdldFJlbGVhc2VRdWVyeSxcbiAgdXNlQ3JlYXRlUmVsZWFzZU11dGF0aW9uLFxuICB1c2VVcGRhdGVSZWxlYXNlTXV0YXRpb24sXG4gIHVzZURlbGV0ZVJlbGVhc2VNdXRhdGlvbixcbiAgXG4gIC8vIFN1aXRlIGhvb2tzXG4gIHVzZUdldFN1aXRlc1F1ZXJ5LFxuICB1c2VDcmVhdGVTdWl0ZU11dGF0aW9uLFxuICBcbiAgLy8gRXhlY3V0aW9uIGhvb2tzXG4gIHVzZUdldEV4ZWN1dGlvbnNRdWVyeSxcbiAgdXNlQ3JlYXRlRXhlY3V0aW9uTXV0YXRpb24sXG4gIHVzZVVwZGF0ZUV4ZWN1dGlvbk11dGF0aW9uLFxuICBcbiAgLy8gRGVmZWN0IGhvb2tzXG4gIHVzZUdldERlZmVjdHNRdWVyeSxcbiAgdXNlR2V0RGVmZWN0UXVlcnksXG4gIHVzZUNyZWF0ZURlZmVjdE11dGF0aW9uLFxuICB1c2VVcGRhdGVEZWZlY3RNdXRhdGlvbixcbiAgXG4gIC8vIENvbW1lbnQgaG9va3NcbiAgdXNlR2V0Q29tbWVudHNRdWVyeSxcbiAgdXNlQ3JlYXRlQ29tbWVudE11dGF0aW9uLFxuICBcbiAgLy8gQXV0aCBob29rc1xuICB1c2VMb2dpbk11dGF0aW9uLFxuICB1c2VSZWdpc3Rlck11dGF0aW9uLFxuICBcbiAgLy8gQnVsayBvcGVyYXRpb24gaG9va3NcbiAgdXNlQnVsa01vdmVNdXRhdGlvbixcbiAgdXNlQnVsa0NvcHlNdXRhdGlvbixcbiAgdXNlQnVsa0RlbGV0ZU11dGF0aW9uLFxuICB1c2VCdWxrVXBkYXRlU3RhdHVzTXV0YXRpb24sXG59ID0gYXBpOyAiXSwidmVyc2lvbiI6M30=