{"file":"/Users/3i-a1-2021-017/Desktop/my-project/src/main/app/infrastructure/database/pgClient.ts","mappings":";;AAeA,8CAQC;AAED,4CAUC;AAED,kCAEC;AAvCD,2BAA4B;AAE5B,IAAI,QAAQ,GAAkB,IAAI,CAAC;AACnC,IAAI,WAAW,GAAG,KAAK,CAAC;AAExB,SAAS,YAAY;IACjB,OAAO,IAAI,WAAM,CAAC;QACd,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,IAAI,UAAU;QACtC,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,IAAI,WAAW;QACvC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,OAAO;QAC3C,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,UAAU;QAC9C,IAAI,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,IAAI;KAC3C,CAAC,CAAC;AACP,CAAC;AAEM,KAAK,UAAU,iBAAiB;IACnC,IAAI,CAAC,WAAW,EAAE,CAAC;QACf,IAAI,CAAC,QAAQ,EAAE,CAAC;YACZ,QAAQ,GAAG,YAAY,EAAE,CAAC;QAC9B,CAAC;QACD,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC;QACzB,WAAW,GAAG,IAAI,CAAC;IACvB,CAAC;AACL,CAAC;AAEM,KAAK,UAAU,gBAAgB;IAClC,IAAI,CAAC;QACD,MAAM,iBAAiB,EAAE,CAAC;QAC1B,IAAI,QAAQ,EAAE,CAAC;YACX,MAAM,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;QACzC,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACX,OAAO,KAAK,CAAC;IACjB,CAAC;AACL,CAAC;AAED,SAAgB,WAAW;IACvB,OAAO,QAAQ,CAAC;AACpB,CAAC;AAED,kBAAe,QAAQ,CAAC;AAExB,kBAAkB;AAClB,uBAAuB;AACvB,2BAA2B;AAC3B,0CAA0C;AAC1C,oCAAoC;AACpC,+BAA+B;AAC/B,mDAAmD;AACnD,MAAM","names":[],"sources":["/Users/3i-a1-2021-017/Desktop/my-project/src/main/app/infrastructure/database/pgClient.ts"],"sourcesContent":["import { Client } from 'pg';\n\nlet pgClient: Client | null = null;\nlet isConnected = false;\n\nfunction createClient() {\n    return new Client({\n        user: process.env.PGUSER || 'postgres',\n        host: process.env.PGHOST || 'localhost',\n        database: process.env.PGDATABASE || 'quest',\n        password: process.env.PGPASSWORD || 'password',\n        port: Number(process.env.PGPORT) || 5432,\n    });\n}\n\nexport async function ensurePgConnected() {\n    if (!isConnected) {\n        if (!pgClient) {\n            pgClient = createClient();\n        }\n        await pgClient.connect();\n        isConnected = true;\n    }\n}\n\nexport async function testPgConnection() {\n    try {\n        await ensurePgConnected();\n        if (pgClient) {\n            await pgClient.query('SELECT NOW()');\n        }\n        return true;\n    } catch (err) {\n        return false;\n    }\n}\n\nexport function getPgClient() {\n    return pgClient;\n}\n\nexport default pgClient;\n\n// users 테이블 생성 예시\n// CREATE TABLE users (\n//   id SERIAL PRIMARY KEY,\n//   username VARCHAR(64) UNIQUE NOT NULL,\n//   password VARCHAR(128) NOT NULL,\n//   role VARCHAR(16) NOT NULL,\n//   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n// ); "],"version":3}