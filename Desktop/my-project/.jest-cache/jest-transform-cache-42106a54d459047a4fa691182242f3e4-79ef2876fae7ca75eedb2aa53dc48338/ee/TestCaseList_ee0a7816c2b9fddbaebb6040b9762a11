159521a3a396ef3b9cd5a5441fa4c8b0
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const styled_components_1 = __importDefault(require("styled-components"));
const axios_1 = __importDefault(require("../../../utils/axios"));
const Container = styled_components_1.default.div `
  display: flex;
  flex-direction: column;
  gap: 16px;
`;
const Header = styled_components_1.default.div `
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
`;
const Title = styled_components_1.default.h3 `
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #1e293b;
`;
const ActionButton = styled_components_1.default.button `
  padding: 8px 16px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  
  &:hover {
    background: #2563eb;
  }
`;
const SearchRow = styled_components_1.default.div `
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
`;
const SearchInput = styled_components_1.default.input `
  flex: 1;
  padding: 8px 12px;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  font-size: 14px;
`;
const FilterSelect = styled_components_1.default.select `
  padding: 8px 12px;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  font-size: 14px;
  background: white;
`;
const Table = styled_components_1.default.table `
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
`;
const Th = styled_components_1.default.th `
  background: #f8fafc;
  padding: 12px;
  text-align: left;
  font-weight: 600;
  color: #374151;
  border-bottom: 1px solid #e5e7eb;
`;
const Td = styled_components_1.default.td `
  padding: 12px;
  border-bottom: 1px solid #f3f4f6;
  vertical-align: middle;
`;
const PriorityBadge = styled_components_1.default.span `
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
  background: ${({ priority }) => priority === 'High' ? '#fef2f2' :
    priority === 'Medium' ? '#fffbeb' : '#f0fdf4'};
  color: ${({ priority }) => priority === 'High' ? '#dc2626' :
    priority === 'Medium' ? '#d97706' : '#059669'};
`;
const StatusBadge = styled_components_1.default.span `
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
  background: ${({ status }) => status === 'Active' ? '#f0fdf4' : '#f9fafb'};
  color: ${({ status }) => status === 'Active' ? '#059669' : '#6b7280'};
`;
const EmptyState = styled_components_1.default.div `
  text-align: center;
  padding: 40px;
  color: #6b7280;
`;
const TestCaseList = ({ releaseId, testCases: propTestCases, onDataChange, searchTerm: propSearchTerm, priorityFilter: propPriorityFilter, statusFilter: propStatusFilter, onSearchChange, onPriorityFilterChange, onStatusFilterChange, folderId, searchPlaceholder, onTestCaseSelect }) => {
    const [searchTerm, setSearchTerm] = (0, react_1.useState)(propSearchTerm || '');
    const [priorityFilter, setPriorityFilter] = (0, react_1.useState)(propPriorityFilter || '');
    const [statusFilter, setStatusFilter] = (0, react_1.useState)(propStatusFilter || '');
    const [testCases, setTestCases] = (0, react_1.useState)([]);
    const [loading, setLoading] = (0, react_1.useState)(true);
    // 컴포넌트가 마운트될 때 테스트케이스 데이터를 가져옵니다
    (0, react_1.useEffect)(() => {
        const fetchTestCases = async () => {
            try {
                setLoading(true);
                const response = await axios_1.default.get('/api/testcases');
                setTestCases(response.data);
            }
            catch (error) {
                console.error('테스트케이스 로드 실패:', error);
                // 에러 시 빈 배열로 설정
                setTestCases([]);
            }
            finally {
                setLoading(false);
            }
        };
        // propTestCases가 제공되지 않은 경우에만 API 호출
        if (!propTestCases) {
            fetchTestCases();
        }
        else {
            setTestCases(propTestCases);
            setLoading(false);
        }
    }, [propTestCases]);
    const filteredTestCases = (0, react_1.useMemo)(() => {
        return testCases.filter(testCase => {
            const matchesSearch = testCase.title.toLowerCase().includes(searchTerm.toLowerCase());
            const matchesPriority = !priorityFilter || testCase.priority === priorityFilter;
            const matchesStatus = !statusFilter || testCase.status === statusFilter;
            return matchesSearch && matchesPriority && matchesStatus;
        });
    }, [testCases, searchTerm, priorityFilter, statusFilter]);
    // 부모 컴포넌트에서 전달받은 콜백 함수들을 사용
    const handleSearchChange = (e) => {
        const value = e.target.value;
        setSearchTerm(value);
        onSearchChange?.(value);
    };
    const handlePriorityFilterChange = (e) => {
        const value = e.target.value;
        setPriorityFilter(value);
        onPriorityFilterChange?.(value);
    };
    const handleStatusFilterChange = (e) => {
        const value = e.target.value;
        setStatusFilter(value);
        onStatusFilterChange?.(value);
    };
    const handleCreateTestCase = async () => {
        try {
            await axios_1.default.post('/api/testcases', {
                title: '새 테스트케이스',
                priority: 'Medium',
                status: 'Active',
                createdBy: 'current-user',
                steps: ['1. 테스트 스텝'],
                expected: '예상 결과'
            });
            // 데이터 새로고침
            if (onDataChange) {
                onDataChange();
            }
            else {
                // 독립 실행 시 로컬 상태 업데이트
                const response = await axios_1.default.get('/api/testcases');
                setTestCases(response.data);
            }
        }
        catch (error) {
            console.error('테스트케이스 생성 실패:', error);
        }
    };
    const handleDeleteTestCase = async (id) => {
        try {
            await axios_1.default.delete(`/api/testcases/${id}`);
            // 데이터 새로고침
            if (onDataChange) {
                onDataChange();
            }
            else {
                // 독립 실행 시 로컬 상태 업데이트
                setTestCases(prev => prev.filter(tc => tc.id !== id));
            }
        }
        catch (error) {
            console.error('테스트케이스 삭제 실패:', error);
        }
    };
    if (loading) {
        return ((0, jsx_runtime_1.jsx)(Container, { children: (0, jsx_runtime_1.jsx)(EmptyState, { children: "\uB85C\uB529 \uC911..." }) }));
    }
    return ((0, jsx_runtime_1.jsxs)(Container, { children: [(0, jsx_runtime_1.jsxs)(SearchRow, { children: [(0, jsx_runtime_1.jsx)(SearchInput, { type: "text", placeholder: searchPlaceholder || "테스트 케이스 검색...", value: searchTerm, onChange: handleSearchChange }), (0, jsx_runtime_1.jsxs)(FilterSelect, { value: priorityFilter, onChange: handlePriorityFilterChange, children: [(0, jsx_runtime_1.jsx)("option", { value: "", children: "\uBAA8\uB4E0 \uC6B0\uC120\uC21C\uC704" }), (0, jsx_runtime_1.jsx)("option", { value: "High", children: "\uB192\uC74C" }), (0, jsx_runtime_1.jsx)("option", { value: "Medium", children: "\uBCF4\uD1B5" }), (0, jsx_runtime_1.jsx)("option", { value: "Low", children: "\uB0AE\uC74C" })] }), (0, jsx_runtime_1.jsxs)(FilterSelect, { value: statusFilter, onChange: handleStatusFilterChange, children: [(0, jsx_runtime_1.jsx)("option", { value: "", children: "\uBAA8\uB4E0 \uC0C1\uD0DC" }), (0, jsx_runtime_1.jsx)("option", { value: "Active", children: "\uD65C\uC131" }), (0, jsx_runtime_1.jsx)("option", { value: "Archived", children: "\uBCF4\uAD00" })] }), (0, jsx_runtime_1.jsx)(ActionButton, { onClick: handleCreateTestCase, children: "+ \uC0C8 \uD14C\uC2A4\uD2B8 \uCF00\uC774\uC2A4" })] }), filteredTestCases.length === 0 ? ((0, jsx_runtime_1.jsx)(EmptyState, { children: testCases.length === 0 ? '테스트케이스가 없습니다.' : '검색 결과가 없습니다.' })) : ((0, jsx_runtime_1.jsxs)(Table, { children: [(0, jsx_runtime_1.jsx)("thead", { children: (0, jsx_runtime_1.jsxs)("tr", { children: [(0, jsx_runtime_1.jsx)(Th, { children: "\uC81C\uBAA9" }), (0, jsx_runtime_1.jsx)(Th, { children: "\uC6B0\uC120\uC21C\uC704" }), (0, jsx_runtime_1.jsx)(Th, { children: "\uC0C1\uD0DC" }), (0, jsx_runtime_1.jsx)(Th, { children: "\uC0DD\uC131\uC790" }), (0, jsx_runtime_1.jsx)(Th, { children: "\uC0DD\uC131\uC77C" }), (0, jsx_runtime_1.jsx)(Th, { children: "\uC791\uC5C5" })] }) }), (0, jsx_runtime_1.jsx)("tbody", { children: filteredTestCases.map((testCase) => ((0, jsx_runtime_1.jsxs)("tr", { "data-testid": `testcase-row-${testCase.id}`, children: [(0, jsx_runtime_1.jsx)(Td, { children: testCase.title }), (0, jsx_runtime_1.jsx)(Td, { children: (0, jsx_runtime_1.jsx)(PriorityBadge, { priority: testCase.priority, children: testCase.priority === 'High' ? '높음' :
                                            testCase.priority === 'Medium' ? '보통' : '낮음' }) }), (0, jsx_runtime_1.jsx)(Td, { children: (0, jsx_runtime_1.jsx)(StatusBadge, { status: testCase.status, children: testCase.status === 'Active' ? '활성' : '보관' }) }), (0, jsx_runtime_1.jsx)(Td, { children: testCase.createdBy }), (0, jsx_runtime_1.jsx)(Td, { children: new Date(testCase.createdAt).toLocaleDateString() }), (0, jsx_runtime_1.jsx)(Td, { children: (0, jsx_runtime_1.jsx)("button", { onClick: () => handleDeleteTestCase(testCase.id), style: {
                                            padding: '4px 8px',
                                            background: '#ef4444',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '4px',
                                            fontSize: '12px',
                                            cursor: 'pointer'
                                        }, "data-testid": `delete-testcase-${testCase.id}`, children: "\uC0AD\uC81C" }) })] }, testCase.id))) })] }))] }));
};
exports.default = TestCaseList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvVGVzdENhc2VNYW5hZ2VtZW50L2NvbXBvbmVudHMvVGVzdENhc2VMaXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxpQ0FBNEQ7QUFDNUQsMEVBQXVDO0FBQ3ZDLGlFQUF5QztBQTBCekMsTUFBTSxTQUFTLEdBQUcsMkJBQU0sQ0FBQyxHQUFHLENBQUE7Ozs7Q0FJM0IsQ0FBQztBQUVGLE1BQU0sTUFBTSxHQUFHLDJCQUFNLENBQUMsR0FBRyxDQUFBOzs7OztDQUt4QixDQUFDO0FBRUYsTUFBTSxLQUFLLEdBQUcsMkJBQU0sQ0FBQyxFQUFFLENBQUE7Ozs7O0NBS3RCLENBQUM7QUFFRixNQUFNLFlBQVksR0FBRywyQkFBTSxDQUFDLE1BQU0sQ0FBQTs7Ozs7Ozs7Ozs7OztDQWFqQyxDQUFDO0FBRUYsTUFBTSxTQUFTLEdBQUcsMkJBQU0sQ0FBQyxHQUFHLENBQUE7Ozs7Q0FJM0IsQ0FBQztBQUVGLE1BQU0sV0FBVyxHQUFHLDJCQUFNLENBQUMsS0FBSyxDQUFBOzs7Ozs7Q0FNL0IsQ0FBQztBQUVGLE1BQU0sWUFBWSxHQUFHLDJCQUFNLENBQUMsTUFBTSxDQUFBOzs7Ozs7Q0FNakMsQ0FBQztBQUVGLE1BQU0sS0FBSyxHQUFHLDJCQUFNLENBQUMsS0FBSyxDQUFBOzs7Ozs7O0NBT3pCLENBQUM7QUFFRixNQUFNLEVBQUUsR0FBRywyQkFBTSxDQUFDLEVBQUUsQ0FBQTs7Ozs7OztDQU9uQixDQUFDO0FBRUYsTUFBTSxFQUFFLEdBQUcsMkJBQU0sQ0FBQyxFQUFFLENBQUE7Ozs7Q0FJbkIsQ0FBQztBQUVGLE1BQU0sYUFBYSxHQUFHLDJCQUFNLENBQUMsSUFBSSxDQUFzQjs7Ozs7Z0JBS3ZDLENBQUMsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQzdCLFFBQVEsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ2pDLFFBQVEsS0FBSyxR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RUFBRSxHQUFNLEVBQzVELHVCQUFDLEVBQUUsY0FDRCxtQ0FDRSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUNoRCxLQUFLLEVBQUU7NENBQ0wsT0FBTyxFQUFFLFNBQVM7NENBQ2xCLFVBQVUsRUFBRSxTQUFTOzRDQUNyQixLQUFLLEVBQUUsT0FBTzs0Q0FDZCxNQUFNLEVBQUUsTUFBTTs0Q0FDZCxZQUFZLEVBQUUsS0FBSzs0Q0FDbkIsUUFBUSxFQUFFLE1BQU07NENBQ2hCLE1BQU0sRUFBRSxTQUFTO3lDQUNsQixpQkFDWSxtQkFBbUIsUUFBUSxDQUFDLEVBQUUsRUFBRSw2QkFHdEMsR0FDTixLQS9CRSxRQUFRLENBQUMsRUFBRSxDQWdDZixDQUNOLENBQUMsR0FDSSxJQUNGLENBQ1QsSUFDUyxDQUNiLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixrQkFBZSxZQUFZLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvVGVzdENhc2VNYW5hZ2VtZW50L2NvbXBvbmVudHMvVGVzdENhc2VMaXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZU1lbW8sIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IGF4aW9zIGZyb20gJy4uLy4uLy4uL3V0aWxzL2F4aW9zJztcblxuaW50ZXJmYWNlIFRlc3RDYXNlIHtcbiAgaWQ6IG51bWJlcjtcbiAgdGl0bGU6IHN0cmluZztcbiAgcHJpb3JpdHk6ICdIaWdoJyB8ICdNZWRpdW0nIHwgJ0xvdyc7XG4gIHN0YXR1czogJ0FjdGl2ZScgfCAnQXJjaGl2ZWQnO1xuICBjcmVhdGVkQnk6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHJlbGVhc2VJZD86IHN0cmluZztcbiAgdGVzdENhc2VzPzogVGVzdENhc2VbXTtcbiAgb25EYXRhQ2hhbmdlPzogKCkgPT4gdm9pZDtcbiAgc2VhcmNoVGVybT86IHN0cmluZztcbiAgcHJpb3JpdHlGaWx0ZXI/OiBzdHJpbmc7XG4gIHN0YXR1c0ZpbHRlcj86IHN0cmluZztcbiAgb25TZWFyY2hDaGFuZ2U/OiAodGVybTogc3RyaW5nKSA9PiB2b2lkO1xuICBvblByaW9yaXR5RmlsdGVyQ2hhbmdlPzogKHByaW9yaXR5OiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uU3RhdHVzRmlsdGVyQ2hhbmdlPzogKHN0YXR1czogc3RyaW5nKSA9PiB2b2lkO1xuICBmb2xkZXJJZD86IG51bWJlcjtcbiAgc2VhcmNoUGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIG9uVGVzdENhc2VTZWxlY3Q/OiAodGVzdENhc2U6IFRlc3RDYXNlKSA9PiB2b2lkO1xufVxuXG5jb25zdCBDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDE2cHg7XG5gO1xuXG5jb25zdCBIZWFkZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDE2cHg7XG5gO1xuXG5jb25zdCBUaXRsZSA9IHN0eWxlZC5oM2BcbiAgbWFyZ2luOiAwO1xuICBmb250LXNpemU6IDE4cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiAjMWUyOTNiO1xuYDtcblxuY29uc3QgQWN0aW9uQnV0dG9uID0gc3R5bGVkLmJ1dHRvbmBcbiAgcGFkZGluZzogOHB4IDE2cHg7XG4gIGJhY2tncm91bmQ6ICMzYjgyZjY7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzO1xuICBcbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogIzI1NjNlYjtcbiAgfVxuYDtcblxuY29uc3QgU2VhcmNoUm93ID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiAxMnB4O1xuICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuYDtcblxuY29uc3QgU2VhcmNoSW5wdXQgPSBzdHlsZWQuaW5wdXRgXG4gIGZsZXg6IDE7XG4gIHBhZGRpbmc6IDhweCAxMnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjZTJlOGYwO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGZvbnQtc2l6ZTogMTRweDtcbmA7XG5cbmNvbnN0IEZpbHRlclNlbGVjdCA9IHN0eWxlZC5zZWxlY3RgXG4gIHBhZGRpbmc6IDhweCAxMnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjZTJlOGYwO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG5gO1xuXG5jb25zdCBUYWJsZSA9IHN0eWxlZC50YWJsZWBcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG5gO1xuXG5jb25zdCBUaCA9IHN0eWxlZC50aGBcbiAgYmFja2dyb3VuZDogI2Y4ZmFmYztcbiAgcGFkZGluZzogMTJweDtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgY29sb3I6ICMzNzQxNTE7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTVlN2ViO1xuYDtcblxuY29uc3QgVGQgPSBzdHlsZWQudGRgXG4gIHBhZGRpbmc6IDEycHg7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjNmNGY2O1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuYDtcblxuY29uc3QgUHJpb3JpdHlCYWRnZSA9IHN0eWxlZC5zcGFuPHsgcHJpb3JpdHk6IHN0cmluZyB9PmBcbiAgcGFkZGluZzogNHB4IDhweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBmb250LXNpemU6IDEycHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGJhY2tncm91bmQ6ICR7KHsgcHJpb3JpdHkgfSkgPT4gXG4gICAgcHJpb3JpdHkgPT09ICdIaWdoJyA/ICcjZmVmMmYyJyA6IFxuICAgIHByaW9yaXR5ID09PSAnTWVkaXVtJyA/ICcjZmZmYmViJyA6ICcjZjBmZGY0J307XG4gIGNvbG9yOiAkeyh7IHByaW9yaXR5IH0pID0+IFxuICAgIHByaW9yaXR5ID09PSAnSGlnaCcgPyAnI2RjMjYyNicgOiBcbiAgICBwcmlvcml0eSA9PT0gJ01lZGl1bScgPyAnI2Q5NzcwNicgOiAnIzA1OTY2OSd9O1xuYDtcblxuY29uc3QgU3RhdHVzQmFkZ2UgPSBzdHlsZWQuc3Bhbjx7IHN0YXR1czogc3RyaW5nIH0+YFxuICBwYWRkaW5nOiA0cHggOHB4O1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgYmFja2dyb3VuZDogJHsoeyBzdGF0dXMgfSkgPT4gc3RhdHVzID09PSAnQWN0aXZlJyA/ICcjZjBmZGY0JyA6ICcjZjlmYWZiJ307XG4gIGNvbG9yOiAkeyh7IHN0YXR1cyB9KSA9PiBzdGF0dXMgPT09ICdBY3RpdmUnID8gJyMwNTk2NjknIDogJyM2YjcyODAnfTtcbmA7XG5cbmNvbnN0IEVtcHR5U3RhdGUgPSBzdHlsZWQuZGl2YFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDQwcHg7XG4gIGNvbG9yOiAjNmI3MjgwO1xuYDtcblxuY29uc3QgVGVzdENhc2VMaXN0OiBSZWFjdC5GQzxQcm9wcz4gPSAoeyBcbiAgcmVsZWFzZUlkLCBcbiAgdGVzdENhc2VzOiBwcm9wVGVzdENhc2VzLCBcbiAgb25EYXRhQ2hhbmdlLFxuICBzZWFyY2hUZXJtOiBwcm9wU2VhcmNoVGVybSxcbiAgcHJpb3JpdHlGaWx0ZXI6IHByb3BQcmlvcml0eUZpbHRlcixcbiAgc3RhdHVzRmlsdGVyOiBwcm9wU3RhdHVzRmlsdGVyLFxuICBvblNlYXJjaENoYW5nZSxcbiAgb25Qcmlvcml0eUZpbHRlckNoYW5nZSxcbiAgb25TdGF0dXNGaWx0ZXJDaGFuZ2UsXG4gIGZvbGRlcklkLFxuICBzZWFyY2hQbGFjZWhvbGRlcixcbiAgb25UZXN0Q2FzZVNlbGVjdFxufSkgPT4ge1xuICBjb25zdCBbc2VhcmNoVGVybSwgc2V0U2VhcmNoVGVybV0gPSB1c2VTdGF0ZShwcm9wU2VhcmNoVGVybSB8fCAnJyk7XG4gIGNvbnN0IFtwcmlvcml0eUZpbHRlciwgc2V0UHJpb3JpdHlGaWx0ZXJdID0gdXNlU3RhdGUocHJvcFByaW9yaXR5RmlsdGVyIHx8ICcnKTtcbiAgY29uc3QgW3N0YXR1c0ZpbHRlciwgc2V0U3RhdHVzRmlsdGVyXSA9IHVzZVN0YXRlKHByb3BTdGF0dXNGaWx0ZXIgfHwgJycpO1xuICBjb25zdCBbdGVzdENhc2VzLCBzZXRUZXN0Q2FzZXNdID0gdXNlU3RhdGU8VGVzdENhc2VbXT4oW10pO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcblxuICAvLyDsu7Ttj6zrhIztirjqsIAg66eI7Jq07Yq465CgIOuVjCDthYzsiqTtirjsvIDsnbTsiqQg642w7J207YSw66W8IOqwgOyguOyYteuLiOuLpFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZldGNoVGVzdENhc2VzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJy9hcGkvdGVzdGNhc2VzJyk7XG4gICAgICAgIHNldFRlc3RDYXNlcyhyZXNwb25zZS5kYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+2FjOyKpO2KuOy8gOydtOyKpCDroZzrk5wg7Iuk7YyoOicsIGVycm9yKTtcbiAgICAgICAgLy8g7JeQ65+sIOyLnCDruYgg67Cw7Je066GcIOyEpOyglVxuICAgICAgICBzZXRUZXN0Q2FzZXMoW10pO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHByb3BUZXN0Q2FzZXPqsIAg7KCc6rO165CY7KeAIOyViuydgCDqsr3smrDsl5Drp4wgQVBJIO2YuOy2nFxuICAgIGlmICghcHJvcFRlc3RDYXNlcykge1xuICAgICAgZmV0Y2hUZXN0Q2FzZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VGVzdENhc2VzKHByb3BUZXN0Q2FzZXMpO1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbcHJvcFRlc3RDYXNlc10pO1xuXG4gIGNvbnN0IGZpbHRlcmVkVGVzdENhc2VzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHRlc3RDYXNlcy5maWx0ZXIodGVzdENhc2UgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hlc1NlYXJjaCA9IHRlc3RDYXNlLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGNvbnN0IG1hdGNoZXNQcmlvcml0eSA9ICFwcmlvcml0eUZpbHRlciB8fCB0ZXN0Q2FzZS5wcmlvcml0eSA9PT0gcHJpb3JpdHlGaWx0ZXI7XG4gICAgICBjb25zdCBtYXRjaGVzU3RhdHVzID0gIXN0YXR1c0ZpbHRlciB8fCB0ZXN0Q2FzZS5zdGF0dXMgPT09IHN0YXR1c0ZpbHRlcjtcbiAgICAgIFxuICAgICAgcmV0dXJuIG1hdGNoZXNTZWFyY2ggJiYgbWF0Y2hlc1ByaW9yaXR5ICYmIG1hdGNoZXNTdGF0dXM7XG4gICAgfSk7XG4gIH0sIFt0ZXN0Q2FzZXMsIHNlYXJjaFRlcm0sIHByaW9yaXR5RmlsdGVyLCBzdGF0dXNGaWx0ZXJdKTtcblxuICAvLyDrtoDrqqgg7Lu07Y+s64SM7Yq47JeQ7IScIOyghOuLrOuwm+ydgCDsvZzrsLEg7ZWo7IiY65Ok7J2EIOyCrOyaqVxuICBjb25zdCBoYW5kbGVTZWFyY2hDaGFuZ2UgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgIHNldFNlYXJjaFRlcm0odmFsdWUpO1xuICAgIG9uU2VhcmNoQ2hhbmdlPy4odmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVByaW9yaXR5RmlsdGVyQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgc2V0UHJpb3JpdHlGaWx0ZXIodmFsdWUpO1xuICAgIG9uUHJpb3JpdHlGaWx0ZXJDaGFuZ2U/Lih2YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU3RhdHVzRmlsdGVyQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgc2V0U3RhdHVzRmlsdGVyKHZhbHVlKTtcbiAgICBvblN0YXR1c0ZpbHRlckNoYW5nZT8uKHZhbHVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVDcmVhdGVUZXN0Q2FzZSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYXhpb3MucG9zdCgnL2FwaS90ZXN0Y2FzZXMnLCB7XG4gICAgICAgIHRpdGxlOiAn7IOIIO2FjOyKpO2KuOy8gOydtOyKpCcsXG4gICAgICAgIHByaW9yaXR5OiAnTWVkaXVtJyxcbiAgICAgICAgc3RhdHVzOiAnQWN0aXZlJyxcbiAgICAgICAgY3JlYXRlZEJ5OiAnY3VycmVudC11c2VyJyxcbiAgICAgICAgc3RlcHM6IFsnMS4g7YWM7Iqk7Yq4IOyKpO2FnSddLFxuICAgICAgICBleHBlY3RlZDogJ+yYiOyDgSDqsrDqs7wnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8g642w7J207YSwIOyDiOuhnOqzoOy5qFxuICAgICAgaWYgKG9uRGF0YUNoYW5nZSkge1xuICAgICAgICBvbkRhdGFDaGFuZ2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOuPheumvSDsi6Ttlokg7IucIOuhnOy7rCDsg4Htg5wg7JeF642w7J207Yq4XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvYXBpL3Rlc3RjYXNlcycpO1xuICAgICAgICBzZXRUZXN0Q2FzZXMocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+2FjOyKpO2KuOy8gOydtOyKpCDsg53shLEg7Iuk7YyoOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGVsZXRlVGVzdENhc2UgPSBhc3luYyAoaWQ6IG51bWJlcikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBheGlvcy5kZWxldGUoYC9hcGkvdGVzdGNhc2VzLyR7aWR9YCk7XG4gICAgICBcbiAgICAgIC8vIOuNsOydtO2EsCDsg4jroZzqs6DsuahcbiAgICAgIGlmIChvbkRhdGFDaGFuZ2UpIHtcbiAgICAgICAgb25EYXRhQ2hhbmdlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDrj4Xrpr0g7Iuk7ZaJIOyLnCDroZzsu6wg7IOB7YOcIOyXheuNsOydtO2KuFxuICAgICAgICBzZXRUZXN0Q2FzZXMocHJldiA9PiBwcmV2LmZpbHRlcih0YyA9PiB0Yy5pZCAhPT0gaWQpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign7YWM7Iqk7Yq47LyA7J207IqkIOyCreygnCDsi6TtjKg6JywgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8Q29udGFpbmVyPlxuICAgICAgICA8RW1wdHlTdGF0ZT7roZzrlKkg7KSRLi4uPC9FbXB0eVN0YXRlPlxuICAgICAgPC9Db250YWluZXI+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPENvbnRhaW5lcj5cbiAgICAgIHsvKiDqsoDsg4kg67CPIO2VhO2EsCDrsJQgKi99XG4gICAgICA8U2VhcmNoUm93PlxuICAgICAgICA8U2VhcmNoSW5wdXRcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9e3NlYXJjaFBsYWNlaG9sZGVyIHx8IFwi7YWM7Iqk7Yq4IOy8gOydtOyKpCDqsoDsg4kuLi5cIn1cbiAgICAgICAgICB2YWx1ZT17c2VhcmNoVGVybX1cbiAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU2VhcmNoQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgICA8RmlsdGVyU2VsZWN0XG4gICAgICAgICAgdmFsdWU9e3ByaW9yaXR5RmlsdGVyfVxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVQcmlvcml0eUZpbHRlckNoYW5nZX1cbiAgICAgICAgPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj7rqqjrk6Ag7Jqw7ISg7Iic7JyEPC9vcHRpb24+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkhpZ2hcIj7rhpLsnYw8L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiTWVkaXVtXCI+67O07Ya1PC9vcHRpb24+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkxvd1wiPuuCruydjDwvb3B0aW9uPlxuICAgICAgICA8L0ZpbHRlclNlbGVjdD5cbiAgICAgICAgPEZpbHRlclNlbGVjdFxuICAgICAgICAgIHZhbHVlPXtzdGF0dXNGaWx0ZXJ9XG4gICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVN0YXR1c0ZpbHRlckNoYW5nZX1cbiAgICAgICAgPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj7rqqjrk6Ag7IOB7YOcPC9vcHRpb24+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkFjdGl2ZVwiPu2ZnOyEsTwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJBcmNoaXZlZFwiPuuztOq0gDwvb3B0aW9uPlxuICAgICAgICA8L0ZpbHRlclNlbGVjdD5cbiAgICAgICAgPEFjdGlvbkJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVDcmVhdGVUZXN0Q2FzZX0+XG4gICAgICAgICAgKyDsg4gg7YWM7Iqk7Yq4IOy8gOydtOyKpFxuICAgICAgICA8L0FjdGlvbkJ1dHRvbj5cbiAgICAgIDwvU2VhcmNoUm93PlxuXG4gICAgICB7ZmlsdGVyZWRUZXN0Q2FzZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICA8RW1wdHlTdGF0ZT5cbiAgICAgICAgICB7dGVzdENhc2VzLmxlbmd0aCA9PT0gMCA/ICfthYzsiqTtirjsvIDsnbTsiqTqsIAg7JeG7Iq164uI64ukLicgOiAn6rKA7IOJIOqysOqzvOqwgCDsl4bsirXri4jri6QuJ31cbiAgICAgICAgPC9FbXB0eVN0YXRlPlxuICAgICAgKSA6IChcbiAgICAgICAgPFRhYmxlPlxuICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgPFRoPuygnOuqqTwvVGg+XG4gICAgICAgICAgICAgIDxUaD7smrDshKDsiJzsnIQ8L1RoPlxuICAgICAgICAgICAgICA8VGg+7IOB7YOcPC9UaD5cbiAgICAgICAgICAgICAgPFRoPuyDneyEseyekDwvVGg+XG4gICAgICAgICAgICAgIDxUaD7sg53shLHsnbw8L1RoPlxuICAgICAgICAgICAgICA8VGg+7J6R7JeFPC9UaD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICB7ZmlsdGVyZWRUZXN0Q2FzZXMubWFwKCh0ZXN0Q2FzZSkgPT4gKFxuICAgICAgICAgICAgICA8dHIga2V5PXt0ZXN0Q2FzZS5pZH0gZGF0YS10ZXN0aWQ9e2B0ZXN0Y2FzZS1yb3ctJHt0ZXN0Q2FzZS5pZH1gfT5cbiAgICAgICAgICAgICAgICA8VGQ+e3Rlc3RDYXNlLnRpdGxlfTwvVGQ+XG4gICAgICAgICAgICAgICAgPFRkPlxuICAgICAgICAgICAgICAgICAgPFByaW9yaXR5QmFkZ2UgcHJpb3JpdHk9e3Rlc3RDYXNlLnByaW9yaXR5fT5cbiAgICAgICAgICAgICAgICAgICAge3Rlc3RDYXNlLnByaW9yaXR5ID09PSAnSGlnaCcgPyAn64aS7J2MJyA6IFxuICAgICAgICAgICAgICAgICAgICAgdGVzdENhc2UucHJpb3JpdHkgPT09ICdNZWRpdW0nID8gJ+uztO2GtScgOiAn64Ku7J2MJ31cbiAgICAgICAgICAgICAgICAgIDwvUHJpb3JpdHlCYWRnZT5cbiAgICAgICAgICAgICAgICA8L1RkPlxuICAgICAgICAgICAgICAgIDxUZD5cbiAgICAgICAgICAgICAgICAgIDxTdGF0dXNCYWRnZSBzdGF0dXM9e3Rlc3RDYXNlLnN0YXR1c30+XG4gICAgICAgICAgICAgICAgICAgIHt0ZXN0Q2FzZS5zdGF0dXMgPT09ICdBY3RpdmUnID8gJ+2ZnOyEsScgOiAn67O06rSAJ31cbiAgICAgICAgICAgICAgICAgIDwvU3RhdHVzQmFkZ2U+XG4gICAgICAgICAgICAgICAgPC9UZD5cbiAgICAgICAgICAgICAgICA8VGQ+e3Rlc3RDYXNlLmNyZWF0ZWRCeX08L1RkPlxuICAgICAgICAgICAgICAgIDxUZD57bmV3IERhdGUodGVzdENhc2UuY3JlYXRlZEF0KS50b0xvY2FsZURhdGVTdHJpbmcoKX08L1RkPlxuICAgICAgICAgICAgICAgIDxUZD5cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlRGVsZXRlVGVzdENhc2UodGVzdENhc2UuaWQpfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc0cHggOHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI2VmNDQ0NCcsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogJzEycHgnLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgZGVsZXRlLXRlc3RjYXNlLSR7dGVzdENhc2UuaWR9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAg7IKt7KCcXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L1RkPlxuICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC9UYWJsZT5cbiAgICAgICl9XG4gICAgPC9Db250YWluZXI+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUZXN0Q2FzZUxpc3Q7ICJdLCJ2ZXJzaW9uIjozfQ==