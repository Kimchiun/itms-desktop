92fa46dfbc13048d47e76a75038266d5
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const hooks_1 = require("../store/hooks");
const notificationSlice_1 = require("../store/notificationSlice");
const Notification_1 = __importDefault(require("../../../shared/components/Notification"));
const NotificationBadge = () => {
    const dispatch = (0, hooks_1.useAppDispatch)();
    const notifications = (0, hooks_1.useAppSelector)((state) => state.notifications.notifications);
    const unreadCount = notifications.filter((n) => !n.read).length;
    const [open, setOpen] = (0, react_1.useState)(false);
    const handleOpen = () => setOpen(true);
    const handleClose = () => setOpen(false);
    const handleMarkAsRead = (id) => dispatch((0, notificationSlice_1.markAsRead)(id));
    const handleMarkAll = () => dispatch((0, notificationSlice_1.markAllAsRead)());
    return ((0, jsx_runtime_1.jsxs)("div", { style: { position: 'relative', display: 'inline-block' }, children: [(0, jsx_runtime_1.jsxs)("button", { onClick: handleOpen, style: { position: 'relative' }, children: ["\uD83D\uDD14", unreadCount > 0 && ((0, jsx_runtime_1.jsx)("span", { style: { position: 'absolute', top: -6, right: -6, background: 'red', color: 'white', borderRadius: '50%', padding: '2px 6px', fontSize: 12 }, children: unreadCount }))] }), open && ((0, jsx_runtime_1.jsxs)("div", { style: { position: 'absolute', right: 0, top: 32, width: 340, background: '#fff', border: '1px solid #ccc', borderRadius: 8, boxShadow: '0 2px 8px rgba(0,0,0,0.15)', zIndex: 100 }, children: [(0, jsx_runtime_1.jsxs)("div", { style: { padding: 12, borderBottom: '1px solid #eee', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }, children: [(0, jsx_runtime_1.jsx)("b", { children: "\uC54C\uB9BC" }), (0, jsx_runtime_1.jsx)("button", { onClick: handleMarkAll, style: { fontSize: 12 }, children: "\uBAA8\uB450 \uC77D\uC74C" }), (0, jsx_runtime_1.jsx)("button", { onClick: handleClose, style: { fontSize: 12 }, children: "\uB2EB\uAE30" })] }), (0, jsx_runtime_1.jsxs)("ul", { style: { listStyle: 'none', margin: 0, padding: 0, maxHeight: 320, overflowY: 'auto' }, children: [notifications.length === 0 && (0, jsx_runtime_1.jsx)("li", { style: { padding: 16, color: '#888' }, children: "\uC54C\uB9BC \uC5C6\uC74C" }), notifications.map((n) => ((0, jsx_runtime_1.jsxs)("li", { style: { padding: 8, background: n.read ? '#f5f5f5' : '#e3f2fd', borderBottom: '1px solid #eee', cursor: 'pointer' }, onClick: () => handleMarkAsRead(n.id), children: [(0, jsx_runtime_1.jsx)(Notification_1.default, { type: n.type, children: n.message }), (0, jsx_runtime_1.jsx)("div", { style: { fontSize: 12, color: '#888', marginTop: 4 }, children: new Date(n.createdAt).toLocaleString() })] }, n.id)))] })] }))] }));
};
exports.default = NotificationBadge;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvRXhlY3V0aW9uTWFuYWdlbWVudC9jb21wb25lbnRzL05vdGlmaWNhdGlvbkJhZGdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxpQ0FBd0M7QUFDeEMsMENBQWdFO0FBRWhFLGtFQUF1RTtBQUN2RSwyRkFBbUU7QUFFbkUsTUFBTSxpQkFBaUIsR0FBYSxHQUFHLEVBQUU7SUFDdkMsTUFBTSxRQUFRLEdBQUcsSUFBQSxzQkFBYyxHQUFFLENBQUM7SUFDbEMsTUFBTSxhQUFhLEdBQUcsSUFBQSxzQkFBYyxFQUFDLENBQUMsS0FBZ0IsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM5RixNQUFNLFdBQVcsR0FBRyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUM7SUFDckUsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFFeEMsTUFBTSxVQUFVLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sV0FBVyxHQUFHLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6QyxNQUFNLGdCQUFnQixHQUFHLENBQUMsRUFBVSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBQSw4QkFBVSxFQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbEUsTUFBTSxhQUFhLEdBQUcsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUEsaUNBQWEsR0FBRSxDQUFDLENBQUM7SUFFdEQsT0FBTyxDQUNMLGlDQUFLLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxhQUMzRCxvQ0FBUSxPQUFPLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsNkJBRXpELFdBQVcsR0FBRyxDQUFDLElBQUksQ0FDbEIsaUNBQU0sS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxZQUNoSixXQUFXLEdBQ1AsQ0FDUixJQUNNLEVBQ1IsSUFBSSxJQUFJLENBQ1AsaUNBQUssS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSw0QkFBNEIsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGFBQ3RMLGlDQUFLLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLGVBQWUsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLGFBQ2pJLHlEQUFTLEVBQ1QsbUNBQVEsT0FBTyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLDBDQUFnQixFQUN2RSxtQ0FBUSxPQUFPLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsNkJBQWEsSUFDOUQsRUFDTixnQ0FBSSxLQUFLLEVBQUUsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsYUFDdkYsYUFBYSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksK0JBQUksS0FBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLDBDQUFZLEVBQ25GLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQzdCLGdDQUFlLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLEVBQy9ILE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGFBQ3ZDLHVCQUFDLHNCQUFZLElBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLFlBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBZ0IsRUFDdEQsZ0NBQUssS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsWUFBRyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsY0FBYyxFQUFFLEdBQU8sS0FIbEcsQ0FBQyxDQUFDLEVBQUUsQ0FJUixDQUNOLENBQUMsSUFDQyxJQUNELENBQ1AsSUFDRyxDQUNQLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixrQkFBZSxpQkFBaUIsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvM2ktYTEtMjAyMS0wMTcvRGVza3RvcC9teS1wcm9qZWN0L3NyYy9yZW5kZXJlci9mZWF0dXJlcy9FeGVjdXRpb25NYW5hZ2VtZW50L2NvbXBvbmVudHMvTm90aWZpY2F0aW9uQmFkZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUFwcFNlbGVjdG9yLCB1c2VBcHBEaXNwYXRjaCB9IGZyb20gJy4uL3N0b3JlL2hvb2tzJztcbmltcG9ydCB7IFJvb3RTdGF0ZSB9IGZyb20gJ0AvcmVuZGVyZXIvc3RvcmUnO1xuaW1wb3J0IHsgbWFya0FzUmVhZCwgbWFya0FsbEFzUmVhZCB9IGZyb20gJy4uL3N0b3JlL25vdGlmaWNhdGlvblNsaWNlJztcbmltcG9ydCBOb3RpZmljYXRpb24gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2NvbXBvbmVudHMvTm90aWZpY2F0aW9uJztcblxuY29uc3QgTm90aWZpY2F0aW9uQmFkZ2U6IFJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZUFwcERpc3BhdGNoKCk7XG4gIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSB1c2VBcHBTZWxlY3Rvcigoc3RhdGU6IFJvb3RTdGF0ZSkgPT4gc3RhdGUubm90aWZpY2F0aW9ucy5ub3RpZmljYXRpb25zKTtcbiAgY29uc3QgdW5yZWFkQ291bnQgPSBub3RpZmljYXRpb25zLmZpbHRlcigobjogYW55KSA9PiAhbi5yZWFkKS5sZW5ndGg7XG4gIGNvbnN0IFtvcGVuLCBzZXRPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBoYW5kbGVPcGVuID0gKCkgPT4gc2V0T3Blbih0cnVlKTtcbiAgY29uc3QgaGFuZGxlQ2xvc2UgPSAoKSA9PiBzZXRPcGVuKGZhbHNlKTtcbiAgY29uc3QgaGFuZGxlTWFya0FzUmVhZCA9IChpZDogc3RyaW5nKSA9PiBkaXNwYXRjaChtYXJrQXNSZWFkKGlkKSk7XG4gIGNvbnN0IGhhbmRsZU1hcmtBbGwgPSAoKSA9PiBkaXNwYXRjaChtYXJrQWxsQXNSZWFkKCkpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgZGlzcGxheTogJ2lubGluZS1ibG9jaycgfX0+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZU9wZW59IHN0eWxlPXt7IHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxuICAgICAgICDwn5SUXG4gICAgICAgIHt1bnJlYWRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IC02LCByaWdodDogLTYsIGJhY2tncm91bmQ6ICdyZWQnLCBjb2xvcjogJ3doaXRlJywgYm9yZGVyUmFkaXVzOiAnNTAlJywgcGFkZGluZzogJzJweCA2cHgnLCBmb250U2l6ZTogMTIgfX0+XG4gICAgICAgICAgICB7dW5yZWFkQ291bnR9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICApfVxuICAgICAgPC9idXR0b24+XG4gICAgICB7b3BlbiAmJiAoXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIHJpZ2h0OiAwLCB0b3A6IDMyLCB3aWR0aDogMzQwLCBiYWNrZ3JvdW5kOiAnI2ZmZicsIGJvcmRlcjogJzFweCBzb2xpZCAjY2NjJywgYm9yZGVyUmFkaXVzOiA4LCBib3hTaGFkb3c6ICcwIDJweCA4cHggcmdiYSgwLDAsMCwwLjE1KScsIHpJbmRleDogMTAwIH19PlxuICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogMTIsIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCAjZWVlJywgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBhbGlnbkl0ZW1zOiAnY2VudGVyJyB9fT5cbiAgICAgICAgICAgIDxiPuyVjOumvDwvYj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlTWFya0FsbH0gc3R5bGU9e3sgZm9udFNpemU6IDEyIH19PuuqqOuRkCDsnb3snYw8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlQ2xvc2V9IHN0eWxlPXt7IGZvbnRTaXplOiAxMiB9fT7ri6vquLA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8dWwgc3R5bGU9e3sgbGlzdFN0eWxlOiAnbm9uZScsIG1hcmdpbjogMCwgcGFkZGluZzogMCwgbWF4SGVpZ2h0OiAzMjAsIG92ZXJmbG93WTogJ2F1dG8nIH19PlxuICAgICAgICAgICAge25vdGlmaWNhdGlvbnMubGVuZ3RoID09PSAwICYmIDxsaSBzdHlsZT17eyBwYWRkaW5nOiAxNiwgY29sb3I6ICcjODg4JyB9fT7slYzrprwg7JeG7J2MPC9saT59XG4gICAgICAgICAgICB7bm90aWZpY2F0aW9ucy5tYXAoKG46IGFueSkgPT4gKFxuICAgICAgICAgICAgICA8bGkga2V5PXtuLmlkfSBzdHlsZT17eyBwYWRkaW5nOiA4LCBiYWNrZ3JvdW5kOiBuLnJlYWQgPyAnI2Y1ZjVmNScgOiAnI2UzZjJmZCcsIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCAjZWVlJywgY3Vyc29yOiAncG9pbnRlcicgfX1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZU1hcmtBc1JlYWQobi5pZCl9PlxuICAgICAgICAgICAgICAgIDxOb3RpZmljYXRpb24gdHlwZT17bi50eXBlfT57bi5tZXNzYWdlfTwvTm90aWZpY2F0aW9uPlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEyLCBjb2xvcjogJyM4ODgnLCBtYXJnaW5Ub3A6IDQgfX0+e25ldyBEYXRlKG4uY3JlYXRlZEF0KS50b0xvY2FsZVN0cmluZygpfTwvZGl2PlxuICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTm90aWZpY2F0aW9uQmFkZ2U7ICJdLCJ2ZXJzaW9uIjozfQ==