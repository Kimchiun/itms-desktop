b9f661f2113c7a6bc9077114bedc92f4
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const react_redux_1 = require("react-redux");
const styled_components_1 = require("styled-components");
const toolkit_1 = require("@reduxjs/toolkit");
const DashboardLayout_1 = __importDefault(require("../src/renderer/features/Dashboard/components/DashboardLayout"));
const dashboardLayoutSlice_1 = __importDefault(require("../src/renderer/store/dashboardLayoutSlice"));
const theme_1 = require("../src/renderer/shared/theme");
// 테스트용 스토어 설정
const createTestStore = (initialState = {}) => {
    return (0, toolkit_1.configureStore)({
        reducer: {
            dashboardLayout: dashboardLayoutSlice_1.default
        },
        preloadedState: {
            dashboardLayout: {
                leftPanel: { isCollapsed: false, width: 280 },
                rightPanel: { isCollapsed: false, width: 320 },
                centerPanel: { isFullWidth: false },
                activeTab: 'overview',
                ...initialState
            }
        }
    });
};
// 컴포넌트 렌더링 헬퍼
const renderDashboardLayout = (initialState = {}) => {
    const store = createTestStore(initialState);
    const result = (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: store, children: (0, jsx_runtime_1.jsx)(styled_components_1.ThemeProvider, { theme: theme_1.theme, children: (0, jsx_runtime_1.jsx)(DashboardLayout_1.default, {}) }) }));
    return { ...result, store };
};
describe('DashboardLayout - 3분할 레이아웃', () => {
    describe('기본 렌더링 테스트', () => {
        it('3분할 레이아웃이 정상적으로 렌더링되어야 함', () => {
            renderDashboardLayout();
            // 좌측 패널 확인
            expect(react_1.screen.getByText('ITMS')).toBeInTheDocument();
            expect(react_1.screen.getByText('대시보드')).toBeInTheDocument();
            expect(react_1.screen.getByText('테스트 케이스')).toBeInTheDocument();
            // 중앙 패널 확인
            expect(react_1.screen.getByText('대시보드')).toBeInTheDocument();
            expect(react_1.screen.getByText('프로젝트 현황 및 최근 활동을 확인하세요')).toBeInTheDocument();
            // 우측 패널 확인
            expect(react_1.screen.getByText('개인 작업')).toBeInTheDocument();
            expect(react_1.screen.getByText('내 작업 목록')).toBeInTheDocument();
        });
        it('모든 패널이 기본 상태로 표시되어야 함', () => {
            renderDashboardLayout();
            // 좌측 패널 토글 버튼
            const leftToggleButton = react_1.screen.getByRole('button', { name: /←/ });
            expect(leftToggleButton).toBeInTheDocument();
            // 우측 패널 토글 버튼
            const rightToggleButton = react_1.screen.getByRole('button', { name: /→/ });
            expect(rightToggleButton).toBeInTheDocument();
        });
    });
    describe('패널 토글 기능 테스트', () => {
        it('좌측 패널 토글 버튼 클릭 시 패널이 축소되어야 함', async () => {
            renderDashboardLayout();
            const leftToggleButton = react_1.screen.getByRole('button', { name: /←/ });
            react_1.fireEvent.click(leftToggleButton);
            await (0, react_1.waitFor)(() => {
                // 축소된 상태의 토글 버튼 확인
                expect(react_1.screen.getByRole('button', { name: /→/ })).toBeInTheDocument();
            });
        });
        it('우측 패널 토글 버튼 클릭 시 패널이 축소되어야 함', async () => {
            renderDashboardLayout();
            const rightToggleButton = react_1.screen.getByRole('button', { name: /→/ });
            react_1.fireEvent.click(rightToggleButton);
            await (0, react_1.waitFor)(() => {
                // 축소된 상태의 토글 버튼 확인
                expect(react_1.screen.getByRole('button', { name: /←/ })).toBeInTheDocument();
            });
        });
        it('축소된 패널을 다시 토글하면 확장되어야 함', async () => {
            renderDashboardLayout({
                leftPanel: { isCollapsed: true, width: 280 },
                rightPanel: { isCollapsed: true, width: 320 }
            });
            // 좌측 패널 확장
            const leftToggleButton = react_1.screen.getByRole('button', { name: /→/ });
            react_1.fireEvent.click(leftToggleButton);
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('ITMS')).toBeInTheDocument();
            });
            // 우측 패널 확장
            const rightToggleButton = react_1.screen.getByRole('button', { name: /←/ });
            react_1.fireEvent.click(rightToggleButton);
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('개인 작업')).toBeInTheDocument();
            });
        });
    });
    describe('반응형 레이아웃 테스트', () => {
        it('다양한 화면 크기에서 레이아웃이 정상적으로 표시되어야 함', () => {
            // 1280x720 해상도 시뮬레이션
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: 1280,
            });
            Object.defineProperty(window, 'innerHeight', {
                writable: true,
                configurable: true,
                value: 720,
            });
            renderDashboardLayout();
            // 레이아웃 컨테이너가 존재하는지 확인
            const layoutContainer = document.querySelector('[style*="grid-template-columns"]');
            expect(layoutContainer).toBeInTheDocument();
        });
        it('1920x1080 해상도에서도 정상 동작해야 함', () => {
            // 1920x1080 해상도 시뮬레이션
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: 1920,
            });
            Object.defineProperty(window, 'innerHeight', {
                writable: true,
                configurable: true,
                value: 1080,
            });
            renderDashboardLayout();
            // 모든 패널이 정상적으로 렌더링되는지 확인
            expect(react_1.screen.getByText('ITMS')).toBeInTheDocument();
            expect(react_1.screen.getByText('대시보드')).toBeInTheDocument();
            expect(react_1.screen.getByText('개인 작업')).toBeInTheDocument();
        });
    });
    describe('접근성 테스트', () => {
        it('키보드로 모든 토글 버튼에 접근할 수 있어야 함', () => {
            renderDashboardLayout();
            // Tab 키로 포커스 이동
            const leftToggleButton = react_1.screen.getByRole('button', { name: /←/ });
            const rightToggleButton = react_1.screen.getByRole('button', { name: /→/ });
            leftToggleButton.focus();
            expect(leftToggleButton).toHaveFocus();
            // Enter 키로 토글 동작
            react_1.fireEvent.keyDown(leftToggleButton, { key: 'Enter', code: 'Enter' });
            rightToggleButton.focus();
            expect(rightToggleButton).toHaveFocus();
            react_1.fireEvent.keyDown(rightToggleButton, { key: 'Enter', code: 'Enter' });
        });
        it('스크린 리더가 레이아웃 구조를 인식할 수 있어야 함', () => {
            renderDashboardLayout();
            // 랜드마크 역할 확인
            const mainContent = react_1.screen.getByRole('main') || document.querySelector('main');
            expect(mainContent).toBeInTheDocument();
            // 네비게이션 영역 확인
            const navigation = react_1.screen.getByRole('navigation') || document.querySelector('nav');
            expect(navigation).toBeInTheDocument();
        });
    });
    describe('성능 테스트', () => {
        it('패널 토글 시 애니메이션이 부드럽게 동작해야 함', async () => {
            const startTime = performance.now();
            renderDashboardLayout();
            const leftToggleButton = react_1.screen.getByRole('button', { name: /←/ });
            react_1.fireEvent.click(leftToggleButton);
            // 애니메이션 완료 대기 (300ms)
            await (0, react_1.waitFor)(() => {
                const endTime = performance.now();
                expect(endTime - startTime).toBeLessThan(500); // 500ms 이내 완료
            }, { timeout: 1000 });
        });
        it('대량의 데이터가 있어도 렌더링 성능이 유지되어야 함', () => {
            const renderStart = performance.now();
            renderDashboardLayout();
            const renderEnd = performance.now();
            // 초기 렌더링이 100ms 이내에 완료되어야 함
            expect(renderEnd - renderStart).toBeLessThan(100);
        });
    });
    describe('상태 관리 테스트', () => {
        it('Redux 스토어의 상태가 UI와 동기화되어야 함', () => {
            const { store } = renderDashboardLayout();
            // 초기 상태 확인
            let state = store.getState();
            expect(state.dashboardLayout.leftPanel.isCollapsed).toBe(false);
            expect(state.dashboardLayout.rightPanel.isCollapsed).toBe(false);
            // 좌측 패널 토글
            const leftToggleButton = react_1.screen.getByRole('button', { name: /←/ });
            react_1.fireEvent.click(leftToggleButton);
            // 상태 변경 확인
            state = store.getState();
            expect(state.dashboardLayout.leftPanel.isCollapsed).toBe(true);
        });
        it('패널 너비 설정이 정상적으로 동작해야 함', () => {
            const { store } = renderDashboardLayout({
                leftPanel: { isCollapsed: false, width: 300 },
                rightPanel: { isCollapsed: false, width: 350 }
            });
            const state = store.getState();
            expect(state.dashboardLayout.leftPanel.width).toBe(300);
            expect(state.dashboardLayout.rightPanel.width).toBe(350);
        });
    });
    describe('에러 처리 테스트', () => {
        it('잘못된 상태로 렌더링되어도 에러가 발생하지 않아야 함', () => {
            // 잘못된 초기 상태로 렌더링
            expect(() => {
                renderDashboardLayout({
                    leftPanel: { isCollapsed: null, width: -100 },
                    rightPanel: { isCollapsed: undefined, width: 0 }
                });
            }).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC90ZXN0cy9kYXNoYm9hcmQubGF5b3V0LnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLGtEQUE0RTtBQUM1RSw2Q0FBdUM7QUFDdkMseURBQWtEO0FBQ2xELDhDQUFrRDtBQUNsRCxvSEFBNEY7QUFDNUYsc0dBQWdGO0FBQ2hGLHdEQUFxRDtBQUVyRCxjQUFjO0FBQ2QsTUFBTSxlQUFlLEdBQUcsQ0FBQyxZQUFZLEdBQUcsRUFBRSxFQUFFLEVBQUU7SUFDNUMsT0FBTyxJQUFBLHdCQUFjLEVBQUM7UUFDcEIsT0FBTyxFQUFFO1lBQ1AsZUFBZSxFQUFFLDhCQUFzQjtTQUN4QztRQUNELGNBQWMsRUFBRTtZQUNkLGVBQWUsRUFBRTtnQkFDZixTQUFTLEVBQUUsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUU7Z0JBQzdDLFVBQVUsRUFBRSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtnQkFDOUMsV0FBVyxFQUFFLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRTtnQkFDbkMsU0FBUyxFQUFFLFVBQVU7Z0JBQ3JCLEdBQUcsWUFBWTthQUNoQjtTQUNGO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDO0FBRUYsY0FBYztBQUNkLE1BQU0scUJBQXFCLEdBQUcsQ0FBQyxZQUFZLEdBQUcsRUFBRSxFQUFFLEVBQUU7SUFDbEQsTUFBTSxLQUFLLEdBQUcsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVDLE1BQU0sTUFBTSxHQUFHLElBQUEsY0FBTSxFQUNuQix1QkFBQyxzQkFBUSxJQUFDLEtBQUssRUFBRSxLQUFLLFlBQ3BCLHVCQUFDLGlDQUFhLElBQUMsS0FBSyxFQUFFLGFBQUssWUFDekIsdUJBQUMseUJBQWUsS0FBRyxHQUNMLEdBQ1AsQ0FDWixDQUFDO0lBQ0YsT0FBTyxFQUFFLEdBQUcsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFD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dXJjZXMiOlsiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC90ZXN0cy9kYXNoYm9hcmQubGF5b3V0LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBjb25maWd1cmVTdG9yZSB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuaW1wb3J0IERhc2hib2FyZExheW91dCBmcm9tICcuLi9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvRGFzaGJvYXJkL2NvbXBvbmVudHMvRGFzaGJvYXJkTGF5b3V0JztcbmltcG9ydCBkYXNoYm9hcmRMYXlvdXRSZWR1Y2VyIGZyb20gJy4uL3NyYy9yZW5kZXJlci9zdG9yZS9kYXNoYm9hcmRMYXlvdXRTbGljZSc7XG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gJy4uL3NyYy9yZW5kZXJlci9zaGFyZWQvdGhlbWUnO1xuXG4vLyDthYzsiqTtirjsmqkg7Iqk7Yag7Ja0IOyEpOyglVxuY29uc3QgY3JlYXRlVGVzdFN0b3JlID0gKGluaXRpYWxTdGF0ZSA9IHt9KSA9PiB7XG4gIHJldHVybiBjb25maWd1cmVTdG9yZSh7XG4gICAgcmVkdWNlcjoge1xuICAgICAgZGFzaGJvYXJkTGF5b3V0OiBkYXNoYm9hcmRMYXlvdXRSZWR1Y2VyXG4gICAgfSxcbiAgICBwcmVsb2FkZWRTdGF0ZToge1xuICAgICAgZGFzaGJvYXJkTGF5b3V0OiB7XG4gICAgICAgIGxlZnRQYW5lbDogeyBpc0NvbGxhcHNlZDogZmFsc2UsIHdpZHRoOiAyODAgfSxcbiAgICAgICAgcmlnaHRQYW5lbDogeyBpc0NvbGxhcHNlZDogZmFsc2UsIHdpZHRoOiAzMjAgfSxcbiAgICAgICAgY2VudGVyUGFuZWw6IHsgaXNGdWxsV2lkdGg6IGZhbHNlIH0sXG4gICAgICAgIGFjdGl2ZVRhYjogJ292ZXJ2aWV3JyxcbiAgICAgICAgLi4uaW5pdGlhbFN0YXRlXG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbi8vIOy7tO2PrOuEjO2KuCDroIzrjZTrp4Eg7Zes7Y28XG5jb25zdCByZW5kZXJEYXNoYm9hcmRMYXlvdXQgPSAoaW5pdGlhbFN0YXRlID0ge30pID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBjcmVhdGVUZXN0U3RvcmUoaW5pdGlhbFN0YXRlKTtcbiAgY29uc3QgcmVzdWx0ID0gcmVuZGVyKFxuICAgIDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxuICAgICAgPFRoZW1lUHJvdmlkZXIgdGhlbWU9e3RoZW1lfT5cbiAgICAgICAgPERhc2hib2FyZExheW91dCAvPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgIDwvUHJvdmlkZXI+XG4gICk7XG4gIHJldHVybiB7IC4uLnJlc3VsdCwgc3RvcmUgfTtcbn07XG5cbmRlc2NyaWJlKCdEYXNoYm9hcmRMYXlvdXQgLSAz67aE7ZWgIOugiOydtOyVhOybgycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ+q4sOuzuCDroIzrjZTrp4Eg7YWM7Iqk7Yq4JywgKCkgPT4ge1xuICAgIGl0KCcz67aE7ZWgIOugiOydtOyVhOybg+ydtCDsoJXsg4HsoIHsnLzroZwg66CM642U66eB65CY7Ja07JW8IO2VqCcsICgpID0+IHtcbiAgICAgIHJlbmRlckRhc2hib2FyZExheW91dCgpO1xuICAgICAgXG4gICAgICAvLyDsoozsuKEg7Yyo64SQIO2ZleyduFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0lUTVMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfrjIDsi5zrs7Trk5wnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfthYzsiqTtirgg7LyA7J207IqkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIC8vIOykkeyVmSDtjKjrhJAg7ZmV7J24XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn64yA7Iuc67O065OcJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn7ZSE66Gc7KCd7Yq4IO2YhO2ZqSDrsI8g7LWc6re8IO2ZnOuPmeydhCDtmZXsnbjtlZjshLjsmpQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIFxuICAgICAgLy8g7Jqw7LihIO2MqOuEkCDtmZXsnbhcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfqsJzsnbgg7J6R7JeFJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn64K0IOyekeyXhSDrqqnroZ0nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCfrqqjrk6Ag7Yyo64SQ7J20IOq4sOuzuCDsg4Htg5zroZwg7ZGc7Iuc65CY7Ja07JW8IO2VqCcsICgpID0+IHtcbiAgICAgIHJlbmRlckRhc2hib2FyZExheW91dCgpO1xuICAgICAgXG4gICAgICAvLyDsoozsuKEg7Yyo64SQIO2GoOq4gCDrsoTtirxcbiAgICAgIGNvbnN0IGxlZnRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC/ihpAvIH0pO1xuICAgICAgZXhwZWN0KGxlZnRUb2dnbGVCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIC8vIOyasOy4oSDtjKjrhJAg7Yag6riAIOuyhO2KvFxuICAgICAgY29uc3QgcmlnaHRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC/ihpIvIH0pO1xuICAgICAgZXhwZWN0KHJpZ2h0VG9nZ2xlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn7Yyo64SQIO2GoOq4gCDquLDriqUg7YWM7Iqk7Yq4JywgKCkgPT4ge1xuICAgIGl0KCfsoozsuKEg7Yyo64SQIO2GoOq4gCDrsoTtirwg7YG066atIOyLnCDtjKjrhJDsnbQg7LaV7IaM65CY7Ja07JW8IO2VqCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlckRhc2hib2FyZExheW91dCgpO1xuICAgICAgXG4gICAgICBjb25zdCBsZWZ0VG9nZ2xlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAv4oaQLyB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsZWZ0VG9nZ2xlQnV0dG9uKTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIOy2leyGjOuQnCDsg4Htg5zsnZgg7Yag6riAIOuyhO2KvCDtmZXsnbhcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL+KGki8gfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCfsmrDsuKEg7Yyo64SQIO2GoOq4gCDrsoTtirwg7YG066atIOyLnCDtjKjrhJDsnbQg7LaV7IaM65CY7Ja07JW8IO2VqCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlckRhc2hib2FyZExheW91dCgpO1xuICAgICAgXG4gICAgICBjb25zdCByaWdodFRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL+KGki8gfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2socmlnaHRUb2dnbGVCdXR0b24pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8g7LaV7IaM65CcIOyDge2DnOydmCDthqDquIAg67KE7Yq8IO2ZleyduFxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAv4oaQLyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ+y2leyGjOuQnCDtjKjrhJDsnYQg64uk7IucIO2GoOq4gO2VmOuptCDtmZXsnqXrkJjslrTslbwg7ZWoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyRGFzaGJvYXJkTGF5b3V0KHtcbiAgICAgICAgbGVmdFBhbmVsOiB7IGlzQ29sbGFwc2VkOiB0cnVlLCB3aWR0aDogMjgwIH0sXG4gICAgICAgIHJpZ2h0UGFuZWw6IHsgaXNDb2xsYXBzZWQ6IHRydWUsIHdpZHRoOiAzMjAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIOyijOy4oSDtjKjrhJAg7ZmV7J6lXG4gICAgICBjb25zdCBsZWZ0VG9nZ2xlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAv4oaSLyB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsZWZ0VG9nZ2xlQnV0dG9uKTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJVE1TJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8g7Jqw7LihIO2MqOuEkCDtmZXsnqVcbiAgICAgIGNvbnN0IHJpZ2h0VG9nZ2xlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAv4oaQLyB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhyaWdodFRvZ2dsZUJ1dHRvbik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn6rCc7J24IOyekeyXhScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfrsJjsnZHtmJUg66CI7J207JWE7JuDIO2FjOyKpO2KuCcsICgpID0+IHtcbiAgICBpdCgn64uk7JaR7ZWcIO2ZlOuptCDtgazquLDsl5DshJwg66CI7J207JWE7JuD7J20IOygleyDgeyggeycvOuhnCDtkZzsi5zrkJjslrTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgLy8gMTI4MHg3MjAg7ZW07IOB64+EIOyLnOuurOugiOydtOyFmFxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2lubmVyV2lkdGgnLCB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiAxMjgwLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJIZWlnaHQnLCB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiA3MjAsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIC8vIOugiOydtOyVhOybgyDsu6jthYzsnbTrhIjqsIAg7KG07J6s7ZWY64qU7KeAIO2ZleyduFxuICAgICAgY29uc3QgbGF5b3V0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3N0eWxlKj1cImdyaWQtdGVtcGxhdGUtY29sdW1uc1wiXScpO1xuICAgICAgZXhwZWN0KGxheW91dENvbnRhaW5lcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCcxOTIweDEwODAg7ZW07IOB64+E7JeQ7ISc64+EIOygleyDgSDrj5nsnpHtlbTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgLy8gMTkyMHgxMDgwIO2VtOyDgeuPhCDsi5zrrqzroIjsnbTshZhcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMTkyMCxcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2lubmVySGVpZ2h0Jywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMTA4MCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoKTtcbiAgICAgIFxuICAgICAgLy8g66qo65OgIO2MqOuEkOydtCDsoJXsg4HsoIHsnLzroZwg66CM642U66eB65CY64qU7KeAIO2ZleyduFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0lUTVMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfrjIDsi5zrs7Trk5wnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfqsJzsnbgg7J6R7JeFJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfsoJHqt7zshLEg7YWM7Iqk7Yq4JywgKCkgPT4ge1xuICAgIGl0KCftgqTrs7Trk5zroZwg66qo65OgIO2GoOq4gCDrsoTtirzsl5Ag7KCR6re87ZWgIOyImCDsnojslrTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIC8vIFRhYiDtgqTroZwg7Y+s7Luk7IqkIOydtOuPmVxuICAgICAgY29uc3QgbGVmdFRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL+KGkC8gfSk7XG4gICAgICBjb25zdCByaWdodFRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL+KGki8gfSk7XG4gICAgICBcbiAgICAgIGxlZnRUb2dnbGVCdXR0b24uZm9jdXMoKTtcbiAgICAgIGV4cGVjdChsZWZ0VG9nZ2xlQnV0dG9uKS50b0hhdmVGb2N1cygpO1xuICAgICAgXG4gICAgICAvLyBFbnRlciDtgqTroZwg7Yag6riAIOuPmeyekVxuICAgICAgZmlyZUV2ZW50LmtleURvd24obGVmdFRvZ2dsZUJ1dHRvbiwgeyBrZXk6ICdFbnRlcicsIGNvZGU6ICdFbnRlcicgfSk7XG4gICAgICBcbiAgICAgIHJpZ2h0VG9nZ2xlQnV0dG9uLmZvY3VzKCk7XG4gICAgICBleHBlY3QocmlnaHRUb2dnbGVCdXR0b24pLnRvSGF2ZUZvY3VzKCk7XG4gICAgICBcbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKHJpZ2h0VG9nZ2xlQnV0dG9uLCB7IGtleTogJ0VudGVyJywgY29kZTogJ0VudGVyJyB9KTtcbiAgICB9KTtcblxuICAgIGl0KCfsiqTtgazrprAg66as642U6rCAIOugiOydtOyVhOybgyDqtazsobDrpbwg7J247Iud7ZWgIOyImCDsnojslrTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIC8vIOuenOuTnOuniO2BrCDsl63tlaAg7ZmV7J24XG4gICAgICBjb25zdCBtYWluQ29udGVudCA9IHNjcmVlbi5nZXRCeVJvbGUoJ21haW4nKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgICBleHBlY3QobWFpbkNvbnRlbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIC8vIOuEpOu5hOqyjOydtOyFmCDsmIHsl60g7ZmV7J24XG4gICAgICBjb25zdCBuYXZpZ2F0aW9uID0gc2NyZWVuLmdldEJ5Um9sZSgnbmF2aWdhdGlvbicpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ25hdicpO1xuICAgICAgZXhwZWN0KG5hdmlnYXRpb24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfshLHriqUg7YWM7Iqk7Yq4JywgKCkgPT4ge1xuICAgIGl0KCftjKjrhJAg7Yag6riAIOyLnCDslaDri4jrqZTsnbTshZjsnbQg67aA65Oc65+96rKMIOuPmeyeke2VtOyVvCDtlagnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIFxuICAgICAgcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxlZnRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC/ihpAvIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxlZnRUb2dnbGVCdXR0b24pO1xuICAgICAgXG4gICAgICAvLyDslaDri4jrqZTsnbTshZgg7JmE66OMIOuMgOq4sCAoMzAwbXMpXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDUwMCk7IC8vIDUwMG1zIOydtOuCtCDsmYTro4xcbiAgICAgIH0sIHsgdGltZW91dDogMTAwMCB9KTtcbiAgICB9KTtcblxuICAgIGl0KCfrjIDrn4nsnZgg642w7J207YSw6rCAIOyeiOyWtOuPhCDroIzrjZTrp4Eg7ISx64ql7J20IOycoOyngOuQmOyWtOyVvCDtlagnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgXG4gICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVuZGVyRW5kID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBcbiAgICAgIC8vIOy0iOq4sCDroIzrjZTrp4HsnbQgMTAwbXMg7J2064K07JeQIOyZhOujjOuQmOyWtOyVvCDtlahcbiAgICAgIGV4cGVjdChyZW5kZXJFbmQgLSByZW5kZXJTdGFydCkudG9CZUxlc3NUaGFuKDEwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfsg4Htg5wg6rSA66asIO2FjOyKpO2KuCcsICgpID0+IHtcbiAgICBpdCgnUmVkdXgg7Iqk7Yag7Ja07J2YIOyDge2DnOqwgCBVSeyZgCDrj5nquLDtmZTrkJjslrTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBzdG9yZSB9ID0gcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIC8vIOy0iOq4sCDsg4Htg5wg7ZmV7J24XG4gICAgICBsZXQgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgZXhwZWN0KHN0YXRlLmRhc2hib2FyZExheW91dC5sZWZ0UGFuZWwuaXNDb2xsYXBzZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHN0YXRlLmRhc2hib2FyZExheW91dC5yaWdodFBhbmVsLmlzQ29sbGFwc2VkKS50b0JlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8g7KKM7LihIO2MqOuEkCDthqDquIBcbiAgICAgIGNvbnN0IGxlZnRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC/ihpAvIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxlZnRUb2dnbGVCdXR0b24pO1xuICAgICAgXG4gICAgICAvLyDsg4Htg5wg67OA6rK9IO2ZleyduFxuICAgICAgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgZXhwZWN0KHN0YXRlLmRhc2hib2FyZExheW91dC5sZWZ0UGFuZWwuaXNDb2xsYXBzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn7Yyo64SQIOuEiOu5hCDshKTsoJXsnbQg7KCV7IOB7KCB7Jy866GcIOuPmeyeke2VtOyVvCDtlagnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHN0b3JlIH0gPSByZW5kZXJEYXNoYm9hcmRMYXlvdXQoe1xuICAgICAgICBsZWZ0UGFuZWw6IHsgaXNDb2xsYXBzZWQ6IGZhbHNlLCB3aWR0aDogMzAwIH0sXG4gICAgICAgIHJpZ2h0UGFuZWw6IHsgaXNDb2xsYXBzZWQ6IGZhbHNlLCB3aWR0aDogMzUwIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gICAgICBleHBlY3Qoc3RhdGUuZGFzaGJvYXJkTGF5b3V0LmxlZnRQYW5lbC53aWR0aCkudG9CZSgzMDApO1xuICAgICAgZXhwZWN0KHN0YXRlLmRhc2hib2FyZExheW91dC5yaWdodFBhbmVsLndpZHRoKS50b0JlKDM1MCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfsl5Drn6wg7LKY66asIO2FjOyKpO2KuCcsICgpID0+IHtcbiAgICBpdCgn7J6Y66q765CcIOyDge2DnOuhnCDroIzrjZTrp4HrkJjslrTrj4Qg7JeQ65+s6rCAIOuwnOyDne2VmOyngCDslYrslYTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgLy8g7J6Y66q765CcIOy0iOq4sCDsg4Htg5zroZwg66CM642U66eBXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoe1xuICAgICAgICAgIGxlZnRQYW5lbDogeyBpc0NvbGxhcHNlZDogbnVsbCBhcyBhbnksIHdpZHRoOiAtMTAwIH0sXG4gICAgICAgICAgcmlnaHRQYW5lbDogeyBpc0NvbGxhcHNlZDogdW5kZWZpbmVkIGFzIGFueSwgd2lkdGg6IDAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7ICJdLCJ2ZXJzaW9uIjozfQ==