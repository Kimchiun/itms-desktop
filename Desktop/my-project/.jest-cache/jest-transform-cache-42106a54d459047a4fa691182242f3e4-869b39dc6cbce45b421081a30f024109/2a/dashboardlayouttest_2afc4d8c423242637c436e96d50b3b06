10a857bff24e5956533bb6e02fdfeb07
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const react_redux_1 = require("react-redux");
const styled_components_1 = require("styled-components");
const toolkit_1 = require("@reduxjs/toolkit");
const DashboardLayout_1 = __importDefault(require("../src/renderer/features/Dashboard/components/DashboardLayout"));
const dashboardLayoutSlice_1 = __importDefault(require("../src/renderer/store/dashboardLayoutSlice"));
const theme_1 = require("../src/renderer/shared/theme");
require("@testing-library/jest-dom");
// 테스트용 스토어 설정
const createTestStore = (initialState = {}) => {
    return (0, toolkit_1.configureStore)({
        reducer: {
            dashboardLayout: dashboardLayoutSlice_1.default
        },
        preloadedState: {
            dashboardLayout: {
                leftPanel: { isCollapsed: false, width: 280 },
                rightPanel: { isCollapsed: false, width: 320 },
                centerPanel: { isFullWidth: false },
                activeTab: 'overview',
                ...initialState
            }
        }
    });
};
// 컴포넌트 렌더링 헬퍼
const renderDashboardLayout = (initialState = {}) => {
    const store = createTestStore(initialState);
    const result = (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: store, children: (0, jsx_runtime_1.jsx)(styled_components_1.ThemeProvider, { theme: theme_1.theme, children: (0, jsx_runtime_1.jsx)(DashboardLayout_1.default, {}) }) }));
    return { ...result, store };
};
describe('DashboardLayout - 3분할 레이아웃', () => {
    describe('기본 렌더링 테스트', () => {
        it('3분할 레이아웃이 정상적으로 렌더링되어야 함', () => {
            renderDashboardLayout();
            // 좌측 패널 확인
            expect(react_1.screen.getByText('ITMS')).toBeInTheDocument();
            expect(react_1.screen.getByRole('button', { name: '대시보드 메뉴' })).toBeInTheDocument();
            expect(react_1.screen.getByRole('button', { name: '테스트 케이스 메뉴' })).toBeInTheDocument();
            // 중앙 패널 확인
            expect(react_1.screen.getByRole('heading', { name: '대시보드' })).toBeInTheDocument();
            expect(react_1.screen.getByText('프로젝트 현황 및 최근 활동을 확인하세요')).toBeInTheDocument();
            // 우측 패널 확인
            expect(react_1.screen.getByText('개인 작업')).toBeInTheDocument();
            expect(react_1.screen.getByText('내 작업 목록')).toBeInTheDocument();
        });
        it('모든 패널이 기본 상태로 표시되어야 함', () => {
            renderDashboardLayout();
            // 좌측 패널 토글 버튼
            const leftToggleButton = react_1.screen.getByTestId('left-toggle-button');
            expect(leftToggleButton).toBeInTheDocument();
            expect(leftToggleButton).toHaveTextContent('←');
            // 우측 패널 토글 버튼
            const rightToggleButton = react_1.screen.getByTestId('right-toggle-button');
            expect(rightToggleButton).toBeInTheDocument();
            expect(rightToggleButton).toHaveTextContent('→');
        });
    });
    describe('패널 토글 기능 테스트', () => {
        it('좌측 패널 토글 버튼 클릭 시 패널이 축소되어야 함', async () => {
            renderDashboardLayout();
            const leftToggleButton = react_1.screen.getByTestId('left-toggle-button');
            react_1.fireEvent.click(leftToggleButton);
            await (0, react_1.waitFor)(() => {
                // 축소된 상태의 토글 버튼 확인
                expect(react_1.screen.getByTestId('left-toggle-button')).toHaveTextContent('→');
            });
        });
        it('우측 패널 토글 버튼 클릭 시 패널이 축소되어야 함', async () => {
            renderDashboardLayout();
            const rightToggleButton = react_1.screen.getByTestId('right-toggle-button');
            react_1.fireEvent.click(rightToggleButton);
            await (0, react_1.waitFor)(() => {
                // 축소된 상태의 토글 버튼 확인
                expect(react_1.screen.getByTestId('right-toggle-button')).toHaveTextContent('←');
            });
        });
        it('축소된 패널을 다시 토글하면 확장되어야 함', async () => {
            renderDashboardLayout({
                leftPanel: { isCollapsed: true, width: 280 },
                rightPanel: { isCollapsed: true, width: 320 }
            });
            // 좌측 패널 확장
            const leftToggleButton = react_1.screen.getByTestId('left-toggle-button');
            react_1.fireEvent.click(leftToggleButton);
            await (0, react_1.waitFor)(() => {
                expect(leftToggleButton).toHaveTextContent('←');
            });
            // 우측 패널 확장
            const rightToggleButton = react_1.screen.getByTestId('right-toggle-button');
            react_1.fireEvent.click(rightToggleButton);
            await (0, react_1.waitFor)(() => {
                expect(rightToggleButton).toHaveTextContent('→');
            });
        });
    });
    describe('반응형 레이아웃 테스트', () => {
        it('다양한 화면 크기에서 레이아웃이 정상적으로 표시되어야 함', () => {
            // 1280x720 해상도 시뮬레이션
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: 1280,
            });
            Object.defineProperty(window, 'innerHeight', {
                writable: true,
                configurable: true,
                value: 720,
            });
            renderDashboardLayout();
            // 레이아웃 컨테이너가 존재하는지 확인
            const layoutContainer = react_1.screen.getByTestId('dashboard-layout');
            expect(layoutContainer).toBeInTheDocument();
        });
        it('1920x1080 해상도에서도 정상 동작해야 함', () => {
            // 1920x1080 해상도 시뮬레이션
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: 1920,
            });
            Object.defineProperty(window, 'innerHeight', {
                writable: true,
                configurable: true,
                value: 1080,
            });
            renderDashboardLayout();
            // 모든 패널이 정상적으로 렌더링되는지 확인
            expect(react_1.screen.getByText('ITMS')).toBeInTheDocument();
            expect(react_1.screen.getByRole('heading', { name: '대시보드' })).toBeInTheDocument();
            expect(react_1.screen.getByText('개인 작업')).toBeInTheDocument();
        });
    });
    describe('접근성 테스트', () => {
        it('키보드로 모든 토글 버튼에 접근할 수 있어야 함', () => {
            renderDashboardLayout();
            // Tab 키로 포커스 이동
            const leftToggleButton = react_1.screen.getByTestId('left-toggle-button');
            const rightToggleButton = react_1.screen.getByTestId('right-toggle-button');
            leftToggleButton.focus();
            expect(leftToggleButton).toHaveFocus();
            // Enter 키로 토글 동작
            react_1.fireEvent.keyDown(leftToggleButton, { key: 'Enter', code: 'Enter' });
            rightToggleButton.focus();
            expect(rightToggleButton).toHaveFocus();
            react_1.fireEvent.keyDown(rightToggleButton, { key: 'Enter', code: 'Enter' });
        });
        it('스크린 리더가 레이아웃 구조를 인식할 수 있어야 함', () => {
            renderDashboardLayout();
            // 네비게이션 영역 확인
            const navigation = react_1.screen.getByRole('navigation');
            expect(navigation).toBeInTheDocument();
            expect(navigation).toHaveAttribute('aria-label', '주요 메뉴');
        });
    });
    describe('성능 테스트', () => {
        it('패널 토글 시 애니메이션이 부드럽게 동작해야 함', async () => {
            const startTime = performance.now();
            renderDashboardLayout();
            const leftToggleButton = react_1.screen.getByTestId('left-toggle-button');
            react_1.fireEvent.click(leftToggleButton);
            // 애니메이션 완료 대기 (300ms)
            await (0, react_1.waitFor)(() => {
                const endTime = performance.now();
                expect(endTime - startTime).toBeLessThan(500); // 500ms 이내 완료
            }, { timeout: 1000 });
        });
        it('대량의 데이터가 있어도 렌더링 성능이 유지되어야 함', () => {
            const renderStart = performance.now();
            renderDashboardLayout();
            const renderEnd = performance.now();
            // 초기 렌더링이 100ms 이내에 완료되어야 함
            expect(renderEnd - renderStart).toBeLessThan(100);
        });
    });
    describe('상태 관리 테스트', () => {
        it('Redux 스토어의 상태가 UI와 동기화되어야 함', () => {
            const { store } = renderDashboardLayout();
            // 초기 상태 확인
            let state = store.getState();
            expect(state.dashboardLayout.leftPanel.isCollapsed).toBe(false);
            expect(state.dashboardLayout.rightPanel.isCollapsed).toBe(false);
            // 좌측 패널 토글
            const leftToggleButton = react_1.screen.getByTestId('left-toggle-button');
            react_1.fireEvent.click(leftToggleButton);
            // 상태 변경 확인
            state = store.getState();
            expect(state.dashboardLayout.leftPanel.isCollapsed).toBe(true);
        });
        it('패널 너비 설정이 정상적으로 동작해야 함', () => {
            const { store } = renderDashboardLayout({
                leftPanel: { isCollapsed: false, width: 300 },
                rightPanel: { isCollapsed: false, width: 350 }
            });
            const state = store.getState();
            expect(state.dashboardLayout.leftPanel.width).toBe(300);
            expect(state.dashboardLayout.rightPanel.width).toBe(350);
        });
    });
    describe('에러 처리 테스트', () => {
        it('잘못된 상태로 렌더링되어도 에러가 발생하지 않아야 함', () => {
            // 잘못된 초기 상태로 렌더링
            expect(() => {
                renderDashboardLayout({
                    leftPanel: { isCollapsed: null, width: -100 },
                    rightPanel: { isCollapsed: undefined, width: 0 }
                });
            }).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC90ZXN0cy9kYXNoYm9hcmQubGF5b3V0LnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLGtEQUE0RTtBQUM1RSw2Q0FBdUM7QUFDdkMseURBQWtEO0FBQ2xELDhDQUFrRDtBQUNsRCxvSEFBNEY7QUFDNUYsc0dBQWdGO0FBQ2hGLHdEQUFxRDtBQUNyRCxxQ0FBbUM7QUFFbkMsY0FBYztBQUNkLE1BQU0sZUFBZSxHQUFHLENBQUMsWUFBWSxHQUFHLEVBQUUsRUFBRSxFQUFFO0lBQzVDLE9BQU8sSUFBQSx3QkFBYyxFQUFDO1FBQ3BCLE9BQU8sRUFBRTtZQUNQLGVBQWUsRUFBRSw4QkFBc0I7U0FDeEM7UUFDRCxjQUFjLEVBQUU7WUFDZCxlQUFlLEVBQUU7Z0JBQ2YsU0FBUyxFQUFFLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFO2dCQUM3QyxVQUFVLEVBQUUsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUU7Z0JBQzlDLFdBQVcsRUFBRSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUU7Z0JBQ25DLFNBQVMsRUFBRSxVQUFVO2dCQUNyQixHQUFHLFlBQVk7YUFDaEI7U0FDRjtLQUNGLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQztBQUVGLGNBQWM7QUFDZCxNQUFNLHFCQUFxQixHQUFHLENBQUMsWUFBWSxHQUFHLEVBQUUsRUFBRSxFQUFFO0lBQ2xELE1BQU0sS0FBSyxHQUFHLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM1QyxNQUFNLE1BQU0sR0FBRyxJQUFBLGNBQU0sRUFDbkIsdUJBQUMsc0JBQVEsSUFBQyxLQUFLLEVBQUUsS0FBSyxZQUNwQix1QkFBQyxpQ0FBYSxJQUFDLEtBQUssRUFBRSxhQUFLLFlBQ3pCLHVCQUFDLHlCQUFlLEtBQUcsR0FDTCxHQUNQLENBQ1osQ0FBQztJQUNGLE9BQU8sRUFBRSxHQUFHLE1BQU0sRUFBRSxL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LEtBQUssRUFBRSxHQUFHLEVBQUU7YUFDL0MsQ0FBQyxDQUFDO1lBRUgsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMzRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7UUFDekIsRUFBRSxDQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRTtZQUN2QyxpQkFBaUI7WUFDakIsTUFBTSxDQUFDLEdBQUcsRUFBRTtnQkFDVixxQkFBcUIsQ0FBQztvQkFDcEIsU0FBUyxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUU7b0JBQ3BELFVBQVUsRUFBRSxFQUFFLFdBQVcsRUFBRSxTQUFnQixFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7aUJBQ3hELENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC90ZXN0cy9kYXNoYm9hcmQubGF5b3V0LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBjb25maWd1cmVTdG9yZSB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuaW1wb3J0IERhc2hib2FyZExheW91dCBmcm9tICcuLi9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvRGFzaGJvYXJkL2NvbXBvbmVudHMvRGFzaGJvYXJkTGF5b3V0JztcbmltcG9ydCBkYXNoYm9hcmRMYXlvdXRSZWR1Y2VyIGZyb20gJy4uL3NyYy9yZW5kZXJlci9zdG9yZS9kYXNoYm9hcmRMYXlvdXRTbGljZSc7XG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gJy4uL3NyYy9yZW5kZXJlci9zaGFyZWQvdGhlbWUnO1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcblxuLy8g7YWM7Iqk7Yq47JqpIOyKpO2GoOyWtCDshKTsoJVcbmNvbnN0IGNyZWF0ZVRlc3RTdG9yZSA9IChpbml0aWFsU3RhdGUgPSB7fSkgPT4ge1xuICByZXR1cm4gY29uZmlndXJlU3RvcmUoe1xuICAgIHJlZHVjZXI6IHtcbiAgICAgIGRhc2hib2FyZExheW91dDogZGFzaGJvYXJkTGF5b3V0UmVkdWNlclxuICAgIH0sXG4gICAgcHJlbG9hZGVkU3RhdGU6IHtcbiAgICAgIGRhc2hib2FyZExheW91dDoge1xuICAgICAgICBsZWZ0UGFuZWw6IHsgaXNDb2xsYXBzZWQ6IGZhbHNlLCB3aWR0aDogMjgwIH0sXG4gICAgICAgIHJpZ2h0UGFuZWw6IHsgaXNDb2xsYXBzZWQ6IGZhbHNlLCB3aWR0aDogMzIwIH0sXG4gICAgICAgIGNlbnRlclBhbmVsOiB7IGlzRnVsbFdpZHRoOiBmYWxzZSB9LFxuICAgICAgICBhY3RpdmVUYWI6ICdvdmVydmlldycsXG4gICAgICAgIC4uLmluaXRpYWxTdGF0ZVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG4vLyDsu7Ttj6zrhIztirgg66CM642U66eBIO2XrO2NvFxuY29uc3QgcmVuZGVyRGFzaGJvYXJkTGF5b3V0ID0gKGluaXRpYWxTdGF0ZSA9IHt9KSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gY3JlYXRlVGVzdFN0b3JlKGluaXRpYWxTdGF0ZSk7XG4gIGNvbnN0IHJlc3VsdCA9IHJlbmRlcihcbiAgICA8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cbiAgICAgIDxUaGVtZVByb3ZpZGVyIHRoZW1lPXt0aGVtZX0+XG4gICAgICAgIDxEYXNoYm9hcmRMYXlvdXQgLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICA8L1Byb3ZpZGVyPlxuICApO1xuICByZXR1cm4geyAuLi5yZXN1bHQsIHN0b3JlIH07XG59O1xuXG5kZXNjcmliZSgnRGFzaGJvYXJkTGF5b3V0IC0gM+u2hO2VoCDroIjsnbTslYTsm4MnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCfquLDrs7gg66CM642U66eBIO2FjOyKpO2KuCcsICgpID0+IHtcbiAgICBpdCgnM+u2hO2VoCDroIjsnbTslYTsm4PsnbQg7KCV7IOB7KCB7Jy866GcIOugjOuNlOungeuQmOyWtOyVvCDtlagnLCAoKSA9PiB7XG4gICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoKTtcbiAgICAgIFxuICAgICAgLy8g7KKM7LihIO2MqOuEkCDtmZXsnbhcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJVE1TJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAn64yA7Iuc67O065OcIOuplOuJtCcgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAn7YWM7Iqk7Yq4IOy8gOydtOyKpCDrqZTribQnIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgXG4gICAgICAvLyDspJHslZkg7Yyo64SQIO2ZleyduFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6ICfrjIDsi5zrs7Trk5wnIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+2UhOuhnOygne2KuCDtmITtmakg67CPIOy1nOq3vCDtmZzrj5nsnYQg7ZmV7J247ZWY7IS47JqUJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIC8vIOyasOy4oSDtjKjrhJAg7ZmV7J24XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn6rCc7J24IOyekeyXhScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+uCtCDsnpHsl4Ug66qp66GdJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn66qo65OgIO2MqOuEkOydtCDquLDrs7gg7IOB7YOc66GcIO2RnOyLnOuQmOyWtOyVvCDtlagnLCAoKSA9PiB7XG4gICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoKTtcbiAgICAgIFxuICAgICAgLy8g7KKM7LihIO2MqOuEkCDthqDquIAg67KE7Yq8XG4gICAgICBjb25zdCBsZWZ0VG9nZ2xlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdsZWZ0LXRvZ2dsZS1idXR0b24nKTtcbiAgICAgIGV4cGVjdChsZWZ0VG9nZ2xlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KGxlZnRUb2dnbGVCdXR0b24pLnRvSGF2ZVRleHRDb250ZW50KCfihpAnKTtcbiAgICAgIFxuICAgICAgLy8g7Jqw7LihIO2MqOuEkCDthqDquIAg67KE7Yq8XG4gICAgICBjb25zdCByaWdodFRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncmlnaHQtdG9nZ2xlLWJ1dHRvbicpO1xuICAgICAgZXhwZWN0KHJpZ2h0VG9nZ2xlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHJpZ2h0VG9nZ2xlQnV0dG9uKS50b0hhdmVUZXh0Q29udGVudCgn4oaSJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCftjKjrhJAg7Yag6riAIOq4sOuKpSDthYzsiqTtirgnLCAoKSA9PiB7XG4gICAgaXQoJ+yijOy4oSDtjKjrhJAg7Yag6riAIOuyhO2KvCDtgbTrpq0g7IucIO2MqOuEkOydtCDstpXshozrkJjslrTslbwg7ZWoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxlZnRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xlZnQtdG9nZ2xlLWJ1dHRvbicpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxlZnRUb2dnbGVCdXR0b24pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8g7LaV7IaM65CcIOyDge2DnOydmCDthqDquIAg67KE7Yq8IO2ZleyduFxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdsZWZ0LXRvZ2dsZS1idXR0b24nKSkudG9IYXZlVGV4dENvbnRlbnQoJ+KGkicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn7Jqw7LihIO2MqOuEkCDthqDquIAg67KE7Yq8IO2BtOumrSDsi5wg7Yyo64SQ7J20IOy2leyGjOuQmOyWtOyVvCDtlagnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmlnaHRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JpZ2h0LXRvZ2dsZS1idXR0b24nKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhyaWdodFRvZ2dsZUJ1dHRvbik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyDstpXshozrkJwg7IOB7YOc7J2YIO2GoOq4gCDrsoTtirwg7ZmV7J24XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JpZ2h0LXRvZ2dsZS1idXR0b24nKSkudG9IYXZlVGV4dENvbnRlbnQoJ+KGkCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn7LaV7IaM65CcIO2MqOuEkOydhCDri6Tsi5wg7Yag6riA7ZWY66m0IO2ZleyepeuQmOyWtOyVvCDtlagnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoe1xuICAgICAgICBsZWZ0UGFuZWw6IHsgaXNDb2xsYXBzZWQ6IHRydWUsIHdpZHRoOiAyODAgfSxcbiAgICAgICAgcmlnaHRQYW5lbDogeyBpc0NvbGxhcHNlZDogdHJ1ZSwgd2lkdGg6IDMyMCB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8g7KKM7LihIO2MqOuEkCDtmZXsnqVcbiAgICAgIGNvbnN0IGxlZnRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xlZnQtdG9nZ2xlLWJ1dHRvbicpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxlZnRUb2dnbGVCdXR0b24pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGxlZnRUb2dnbGVCdXR0b24pLnRvSGF2ZVRleHRDb250ZW50KCfihpAnKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyDsmrDsuKEg7Yyo64SQIO2ZleyepVxuICAgICAgY29uc3QgcmlnaHRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JpZ2h0LXRvZ2dsZS1idXR0b24nKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhyaWdodFRvZ2dsZUJ1dHRvbik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmlnaHRUb2dnbGVCdXR0b24pLnRvSGF2ZVRleHRDb250ZW50KCfihpInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn67CY7J2R7ZiVIOugiOydtOyVhOybgyDthYzsiqTtirgnLCAoKSA9PiB7XG4gICAgaXQoJ+uLpOyWke2VnCDtmZTrqbQg7YGs6riw7JeQ7IScIOugiOydtOyVhOybg+ydtCDsoJXsg4HsoIHsnLzroZwg7ZGc7Iuc65CY7Ja07JW8IO2VqCcsICgpID0+IHtcbiAgICAgIC8vIDEyODB4NzIwIO2VtOyDgeuPhCDsi5zrrqzroIjsnbTshZhcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMTI4MCxcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2lubmVySGVpZ2h0Jywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogNzIwLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJlbmRlckRhc2hib2FyZExheW91dCgpO1xuICAgICAgXG4gICAgICAvLyDroIjsnbTslYTsm4Mg7Luo7YWM7J2064SI6rCAIOyhtOyerO2VmOuKlOyngCDtmZXsnbhcbiAgICAgIGNvbnN0IGxheW91dENvbnRhaW5lciA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnZGFzaGJvYXJkLWxheW91dCcpO1xuICAgICAgZXhwZWN0KGxheW91dENvbnRhaW5lcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCcxOTIweDEwODAg7ZW07IOB64+E7JeQ7ISc64+EIOygleyDgSDrj5nsnpHtlbTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgLy8gMTkyMHgxMDgwIO2VtOyDgeuPhCDsi5zrrqzroIjsnbTshZhcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMTkyMCxcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2lubmVySGVpZ2h0Jywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMTA4MCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoKTtcbiAgICAgIFxuICAgICAgLy8g66qo65OgIO2MqOuEkOydtCDsoJXsg4HsoIHsnLzroZwg66CM642U66eB65CY64qU7KeAIO2ZleyduFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0lUTVMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdoZWFkaW5nJywgeyBuYW1lOiAn64yA7Iuc67O065OcJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfqsJzsnbgg7J6R7JeFJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfsoJHqt7zshLEg7YWM7Iqk7Yq4JywgKCkgPT4ge1xuICAgIGl0KCftgqTrs7Trk5zroZwg66qo65OgIO2GoOq4gCDrsoTtirzsl5Ag7KCR6re87ZWgIOyImCDsnojslrTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIC8vIFRhYiDtgqTroZwg7Y+s7Luk7IqkIOydtOuPmVxuICAgICAgY29uc3QgbGVmdFRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbGVmdC10b2dnbGUtYnV0dG9uJyk7XG4gICAgICBjb25zdCByaWdodFRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncmlnaHQtdG9nZ2xlLWJ1dHRvbicpO1xuICAgICAgXG4gICAgICBsZWZ0VG9nZ2xlQnV0dG9uLmZvY3VzKCk7XG4gICAgICBleHBlY3QobGVmdFRvZ2dsZUJ1dHRvbikudG9IYXZlRm9jdXMoKTtcbiAgICAgIFxuICAgICAgLy8gRW50ZXIg7YKk66GcIO2GoOq4gCDrj5nsnpFcbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGxlZnRUb2dnbGVCdXR0b24sIHsga2V5OiAnRW50ZXInLCBjb2RlOiAnRW50ZXInIH0pO1xuICAgICAgXG4gICAgICByaWdodFRvZ2dsZUJ1dHRvbi5mb2N1cygpO1xuICAgICAgZXhwZWN0KHJpZ2h0VG9nZ2xlQnV0dG9uKS50b0hhdmVGb2N1cygpO1xuICAgICAgXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihyaWdodFRvZ2dsZUJ1dHRvbiwgeyBrZXk6ICdFbnRlcicsIGNvZGU6ICdFbnRlcicgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn7Iqk7YGs66awIOumrOuNlOqwgCDroIjsnbTslYTsm4Mg6rWs7KGw66W8IOyduOyLne2VoCDsiJgg7J6I7Ja07JW8IO2VqCcsICgpID0+IHtcbiAgICAgIHJlbmRlckRhc2hib2FyZExheW91dCgpO1xuICAgICAgXG4gICAgICAvLyDrhKTruYTqsozsnbTshZgg7JiB7JetIO2ZleyduFxuICAgICAgY29uc3QgbmF2aWdhdGlvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ25hdmlnYXRpb24nKTtcbiAgICAgIGV4cGVjdChuYXZpZ2F0aW9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KG5hdmlnYXRpb24pLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICfso7zsmpQg66mU64m0Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfshLHriqUg7YWM7Iqk7Yq4JywgKCkgPT4ge1xuICAgIGl0KCftjKjrhJAg7Yag6riAIOyLnCDslaDri4jrqZTsnbTshZjsnbQg67aA65Oc65+96rKMIOuPmeyeke2VtOyVvCDtlagnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIFxuICAgICAgcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxlZnRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xlZnQtdG9nZ2xlLWJ1dHRvbicpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxlZnRUb2dnbGVCdXR0b24pO1xuICAgICAgXG4gICAgICAvLyDslaDri4jrqZTsnbTshZgg7JmE66OMIOuMgOq4sCAoMzAwbXMpXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDUwMCk7IC8vIDUwMG1zIOydtOuCtCDsmYTro4xcbiAgICAgIH0sIHsgdGltZW91dDogMTAwMCB9KTtcbiAgICB9KTtcblxuICAgIGl0KCfrjIDrn4nsnZgg642w7J207YSw6rCAIOyeiOyWtOuPhCDroIzrjZTrp4Eg7ISx64ql7J20IOycoOyngOuQmOyWtOyVvCDtlagnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgXG4gICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVuZGVyRW5kID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBcbiAgICAgIC8vIOy0iOq4sCDroIzrjZTrp4HsnbQgMTAwbXMg7J2064K07JeQIOyZhOujjOuQmOyWtOyVvCDtlahcbiAgICAgIGV4cGVjdChyZW5kZXJFbmQgLSByZW5kZXJTdGFydCkudG9CZUxlc3NUaGFuKDEwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfsg4Htg5wg6rSA66asIO2FjOyKpO2KuCcsICgpID0+IHtcbiAgICBpdCgnUmVkdXgg7Iqk7Yag7Ja07J2YIOyDge2DnOqwgCBVSeyZgCDrj5nquLDtmZTrkJjslrTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBzdG9yZSB9ID0gcmVuZGVyRGFzaGJvYXJkTGF5b3V0KCk7XG4gICAgICBcbiAgICAgIC8vIOy0iOq4sCDsg4Htg5wg7ZmV7J24XG4gICAgICBsZXQgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgZXhwZWN0KHN0YXRlLmRhc2hib2FyZExheW91dC5sZWZ0UGFuZWwuaXNDb2xsYXBzZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHN0YXRlLmRhc2hib2FyZExheW91dC5yaWdodFBhbmVsLmlzQ29sbGFwc2VkKS50b0JlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8g7KKM7LihIO2MqOuEkCDthqDquIBcbiAgICAgIGNvbnN0IGxlZnRUb2dnbGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xlZnQtdG9nZ2xlLWJ1dHRvbicpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxlZnRUb2dnbGVCdXR0b24pO1xuICAgICAgXG4gICAgICAvLyDsg4Htg5wg67OA6rK9IO2ZleyduFxuICAgICAgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgZXhwZWN0KHN0YXRlLmRhc2hib2FyZExheW91dC5sZWZ0UGFuZWwuaXNDb2xsYXBzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn7Yyo64SQIOuEiOu5hCDshKTsoJXsnbQg7KCV7IOB7KCB7Jy866GcIOuPmeyeke2VtOyVvCDtlagnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHN0b3JlIH0gPSByZW5kZXJEYXNoYm9hcmRMYXlvdXQoe1xuICAgICAgICBsZWZ0UGFuZWw6IHsgaXNDb2xsYXBzZWQ6IGZhbHNlLCB3aWR0aDogMzAwIH0sXG4gICAgICAgIHJpZ2h0UGFuZWw6IHsgaXNDb2xsYXBzZWQ6IGZhbHNlLCB3aWR0aDogMzUwIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gICAgICBleHBlY3Qoc3RhdGUuZGFzaGJvYXJkTGF5b3V0LmxlZnRQYW5lbC53aWR0aCkudG9CZSgzMDApO1xuICAgICAgZXhwZWN0KHN0YXRlLmRhc2hib2FyZExheW91dC5yaWdodFBhbmVsLndpZHRoKS50b0JlKDM1MCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfsl5Drn6wg7LKY66asIO2FjOyKpO2KuCcsICgpID0+IHtcbiAgICBpdCgn7J6Y66q765CcIOyDge2DnOuhnCDroIzrjZTrp4HrkJjslrTrj4Qg7JeQ65+s6rCAIOuwnOyDne2VmOyngCDslYrslYTslbwg7ZWoJywgKCkgPT4ge1xuICAgICAgLy8g7J6Y66q765CcIOy0iOq4sCDsg4Htg5zroZwg66CM642U66eBXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICByZW5kZXJEYXNoYm9hcmRMYXlvdXQoe1xuICAgICAgICAgIGxlZnRQYW5lbDogeyBpc0NvbGxhcHNlZDogbnVsbCBhcyBhbnksIHdpZHRoOiAtMTAwIH0sXG4gICAgICAgICAgcmlnaHRQYW5lbDogeyBpc0NvbGxhcHNlZDogdW5kZWZpbmVkIGFzIGFueSwgd2lkdGg6IDAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7ICJdLCJ2ZXJzaW9uIjozfQ==