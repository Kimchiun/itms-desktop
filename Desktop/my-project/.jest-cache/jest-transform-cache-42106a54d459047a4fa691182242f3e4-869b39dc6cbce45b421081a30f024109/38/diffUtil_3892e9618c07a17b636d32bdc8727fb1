53b9a3d811ce55e49b33598daca83c6c
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.findExpandedKeys = findExpandedKeys;
exports.getExpandRange = getExpandRange;
function findExpandedKeys() {
  var prev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var next = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  var prevLen = prev.length;
  var nextLen = next.length;
  if (Math.abs(prevLen - nextLen) !== 1) {
    return {
      add: false,
      key: null
    };
  }
  function find(shorter, longer) {
    var cache = new Map();
    shorter.forEach(function (key) {
      cache.set(key, true);
    });
    var keys = longer.filter(function (key) {
      return !cache.has(key);
    });
    return keys.length === 1 ? keys[0] : null;
  }
  if (prevLen < nextLen) {
    return {
      add: true,
      key: find(prev, next)
    };
  }
  return {
    add: false,
    key: find(next, prev)
  };
}
function getExpandRange(shorter, longer, key) {
  var shorterStartIndex = shorter.findIndex(function (data) {
    return data.key === key;
  });
  var shorterEndNode = shorter[shorterStartIndex + 1];
  var longerStartIndex = longer.findIndex(function (data) {
    return data.key === key;
  });
  if (shorterEndNode) {
    var longerEndIndex = longer.findIndex(function (data) {
      return data.key === shorterEndNode.key;
    });
    return longer.slice(longerStartIndex + 1, longerEndIndex);
  }
  return longer.slice(longerStartIndex + 1);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImZpbmRFeHBhbmRlZEtleXMiLCJnZXRFeHBhbmRSYW5nZSIsInByZXYiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuZXh0IiwicHJldkxlbiIsIm5leHRMZW4iLCJNYXRoIiwiYWJzIiwiYWRkIiwia2V5IiwiZmluZCIsInNob3J0ZXIiLCJsb25nZXIiLCJjYWNoZSIsIk1hcCIsImZvckVhY2giLCJzZXQiLCJrZXlzIiwiZmlsdGVyIiwiaGFzIiwic2hvcnRlclN0YXJ0SW5kZXgiLCJmaW5kSW5kZXgiLCJkYXRhIiwic2hvcnRlckVuZE5vZGUiLCJsb25nZXJTdGFydEluZGV4IiwibG9uZ2VyRW5kSW5kZXgiLCJzbGljZSJdLCJzb3VyY2VzIjpbImRpZmZVdGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5maW5kRXhwYW5kZWRLZXlzID0gZmluZEV4cGFuZGVkS2V5cztcbmV4cG9ydHMuZ2V0RXhwYW5kUmFuZ2UgPSBnZXRFeHBhbmRSYW5nZTtcbmZ1bmN0aW9uIGZpbmRFeHBhbmRlZEtleXMoKSB7XG4gIHZhciBwcmV2ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcbiAgdmFyIG5leHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdO1xuICB2YXIgcHJldkxlbiA9IHByZXYubGVuZ3RoO1xuICB2YXIgbmV4dExlbiA9IG5leHQubGVuZ3RoO1xuICBpZiAoTWF0aC5hYnMocHJldkxlbiAtIG5leHRMZW4pICE9PSAxKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFkZDogZmFsc2UsXG4gICAgICBrZXk6IG51bGxcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGZpbmQoc2hvcnRlciwgbG9uZ2VyKSB7XG4gICAgdmFyIGNhY2hlID0gbmV3IE1hcCgpO1xuICAgIHNob3J0ZXIuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBjYWNoZS5zZXQoa2V5LCB0cnVlKTtcbiAgICB9KTtcbiAgICB2YXIga2V5cyA9IGxvbmdlci5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuICFjYWNoZS5oYXMoa2V5KTtcbiAgICB9KTtcbiAgICByZXR1cm4ga2V5cy5sZW5ndGggPT09IDEgPyBrZXlzWzBdIDogbnVsbDtcbiAgfVxuICBpZiAocHJldkxlbiA8IG5leHRMZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWRkOiB0cnVlLFxuICAgICAga2V5OiBmaW5kKHByZXYsIG5leHQpXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGFkZDogZmFsc2UsXG4gICAga2V5OiBmaW5kKG5leHQsIHByZXYpXG4gIH07XG59XG5mdW5jdGlvbiBnZXRFeHBhbmRSYW5nZShzaG9ydGVyLCBsb25nZXIsIGtleSkge1xuICB2YXIgc2hvcnRlclN0YXJ0SW5kZXggPSBzaG9ydGVyLmZpbmRJbmRleChmdW5jdGlvbiAoZGF0YSkge1xuICAgIHJldHVybiBkYXRhLmtleSA9PT0ga2V5O1xuICB9KTtcbiAgdmFyIHNob3J0ZXJFbmROb2RlID0gc2hvcnRlcltzaG9ydGVyU3RhcnRJbmRleCArIDFdO1xuICB2YXIgbG9uZ2VyU3RhcnRJbmRleCA9IGxvbmdlci5maW5kSW5kZXgoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YS5rZXkgPT09IGtleTtcbiAgfSk7XG4gIGlmIChzaG9ydGVyRW5kTm9kZSkge1xuICAgIHZhciBsb25nZXJFbmRJbmRleCA9IGxvbmdlci5maW5kSW5kZXgoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHJldHVybiBkYXRhLmtleSA9PT0gc2hvcnRlckVuZE5vZGUua2V5O1xuICAgIH0pO1xuICAgIHJldHVybiBsb25nZXIuc2xpY2UobG9uZ2VyU3RhcnRJbmRleCArIDEsIGxvbmdlckVuZEluZGV4KTtcbiAgfVxuICByZXR1cm4gbG9uZ2VyLnNsaWNlKGxvbmdlclN0YXJ0SW5kZXggKyAxKTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVpBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQzNDQyxLQUFLLEVBQUU7QUFDVCxDQUFDLENBQUM7QUFDRkQsT0FBTyxDQUFDRSxnQkFBZ0IsR0FBR0EsZ0JBQWdCO0FBQzNDRixPQUFPLENBQUNHLGNBQWMsR0FBR0EsY0FBYztBQUN2QyxTQUFTRCxnQkFBZ0JBLENBQUEsRUFBRztFQUMxQixJQUFJRSxJQUFJLEdBQUdDLFNBQVMsQ0FBQ0MsTUFBTSxHQUFHLENBQUMsSUFBSUQsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLRSxTQUFTLEdBQUdGLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFO0VBQ2pGLElBQUlHLElBQUksR0FBR0gsU0FBUyxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxJQUFJRCxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUtFLFNBQVMsR0FBR0YsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUU7RUFDakYsSUFBSUksT0FBTyxHQUFHTCxJQUFJLENBQUNFLE1BQU07RUFDekIsSUFBSUksT0FBTyxHQUFHRixJQUFJLENBQUNGLE1BQU07RUFDekIsSUFBSUssSUFBSSxDQUFDQyxHQUFHLENBQUNILE9BQU8sR0FBR0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO0lBQ3JDLE9BQU87TUFDTEcsR0FBRyxFQUFFLEtBQUs7TUFDVkMsR0FBRyxFQUFFO0lBQ1AsQ0FBQztFQUNIO0VBQ0EsU0FBU0MsSUFBSUEsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLEVBQUU7SUFDN0IsSUFBSUMsS0FBSyxHQUFHLElBQUlDLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCSCxPQUFPLENBQUNJLE9BQU8sQ0FBQyxVQUFVTixHQUFHLEVBQUU7TUFDN0JJLEtBQUssQ0FBQ0csR0FBRyxDQUFDUCxHQUFHLEVBQUUsSUFBSSxDQUFDO0lBQ3RCLENBQUMsQ0FBQztJQUNGLElBQUlRLElBQUksR0FBR0wsTUFBTSxDQUFDTSxNQUFNLENBQUMsVUFBVVQsR0FBRyxFQUFFO01BQ3RDLE9BQU8sQ0FBQ0ksS0FBSyxDQUFDTSxHQUFHLENBQUNWLEdBQUcsQ0FBQztJQUN4QixDQUFDLENBQUM7SUFDRixPQUFPUSxJQUFJLENBQUNoQixNQUFNLEtBQUssQ0FBQyxHQUFHZ0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUk7RUFDM0M7RUFDQSxJQUFJYixPQUFPLEdBQUdDLE9BQU8sRUFBRTtJQUNyQixPQUFPO01BQ0xHLEdBQUcsRUFBRSxJQUFJO01BQ1RDLEdBQUcsRUFBRUMsSUFBSSxDQUFDWCxJQUFJLEVBQUVJLElBQUk7SUFDdEIsQ0FBQztFQUNIO0VBQ0EsT0FBTztJQUNMSyxHQUFHLEVBQUUsS0FBSztJQUNWQyxHQUFHLEVBQUVDLElBQUksQ0FBQ1AsSUFBSSxFQUFFSixJQUFJO0VBQ3RCLENBQUM7QUFDSDtBQUNBLFNBQVNELGNBQWNBLENBQUNhLE9BQU8sRUFBRUMsTUFBTSxFQUFFSCxHQUFHLEVBQUU7RUFDNUMsSUFBSVcsaUJBQWlCLEdBQUdULE9BQU8sQ0FBQ1UsU0FBUyxDQUFDLFVBQVVDLElBQUksRUFBRTtJQUN4RCxPQUFPQSxJQUFJLENBQUNiLEdBQUcsS0FBS0EsR0FBRztFQUN6QixDQUFDLENBQUM7RUFDRixJQUFJYyxjQUFjLEdBQUdaLE9BQU8sQ0FBQ1MsaUJBQWlCLEdBQUcsQ0FBQyxDQUFDO0VBQ25ELElBQUlJLGdCQUFnQixHQUFHWixNQUFNLENBQUNTLFNBQVMsQ0FBQyxVQUFVQyxJQUFJLEVBQUU7SUFDdEQsT0FBT0EsSUFBSSxDQUFDYixHQUFHLEtBQUtBLEdBQUc7RUFDekIsQ0FBQyxDQUFDO0VBQ0YsSUFBSWMsY0FBYyxFQUFFO0lBQ2xCLElBQUlFLGNBQWMsR0FBR2IsTUFBTSxDQUFDUyxTQUFTLENBQUMsVUFBVUMsSUFBSSxFQUFFO01BQ3BELE9BQU9BLElBQUksQ0FBQ2IsR0FBRyxLQUFLYyxjQUFjLENBQUNkLEdBQUc7SUFDeEMsQ0FBQyxDQUFDO0lBQ0YsT0FBT0csTUFBTSxDQUFDYyxLQUFLLENBQUNGLGdCQUFnQixHQUFHLENBQUMsRUFBRUMsY0FBYyxDQUFDO0VBQzNEO0VBQ0EsT0FBT2IsTUFBTSxDQUFDYyxLQUFLLENBQUNGLGdCQUFnQixHQUFHLENBQUMsQ0FBQztBQUMzQyIsImlnbm9yZUxpc3QiOltdfQ==