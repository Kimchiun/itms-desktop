902504b57e09193b4690abfaf09a10ac
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.commentService = void 0;
const commentRepository_1 = require("../repositories/commentRepository");
exports.commentService = {
    async createComment(data) {
        // content, author, objectType, objectId 유효성 검사
        if (!data.content.trim())
            throw new Error('댓글 내용이 비어있습니다.');
        if (!data.author)
            throw new Error('작성자 정보가 필요합니다.');
        if (!data.objectType || !data.objectId)
            throw new Error('objectType/objectId가 필요합니다.');
        return commentRepository_1.commentRepository.insert(data);
    },
    async getComments(objectType, objectId) {
        return commentRepository_1.commentRepository.findByObject(objectType, objectId);
    },
    async updateComment(id, content, mentions) {
        if (!content.trim())
            throw new Error('댓글 내용이 비어있습니다.');
        return commentRepository_1.commentRepository.update(id, content, mentions);
    },
    async deleteComment(id) {
        return commentRepository_1.commentRepository.delete(id);
    },
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvbWFpbi9hcHAvZG9tYWlucy9jb21tZW50cy9zZXJ2aWNlcy9jb21tZW50U2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7QUFDQSx5RUFBc0U7QUFFekQsUUFBQSxjQUFjLEdBQUc7SUFDNUIsS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFxRDtRQUN2RSwrQ0FBK0M7UUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzVELElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTtZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUNwRCxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO1FBQ3ZGLE9BQU8scUNBQWlCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFDRCxLQUFLLENBQUMsV0FBVyxDQUFDLFVBQWtCLEVBQUUsUUFBZ0I7UUFDcEQsT0FBTyxxQ0FBaUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzlELENBQUM7SUFDRCxLQUFLLENBQUMsYUFBYSxDQUFDLEVBQVUsRUFBRSxPQUFlLEVBQUUsUUFBa0I7UUFDakUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUU7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDdkQsT0FBTyxxQ0FBaUIsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBQ0QsS0FBSyxDQUFDLGFBQWEsQ0FBQyxFQUFVO1FBQzVCLE9BQU8scUNBQWlCLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7Q0FDRixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy8zaS1hMS0yMDIxLTAxNy9EZXNrdG9wL215LXByb2plY3Qvc3JjL21haW4vYXBwL2RvbWFpbnMvY29tbWVudHMvc2VydmljZXMvY29tbWVudFNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tbWVudCB9IGZyb20gJy4uL21vZGVscy9Db21tZW50JztcbmltcG9ydCB7IGNvbW1lbnRSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzL2NvbW1lbnRSZXBvc2l0b3J5JztcblxuZXhwb3J0IGNvbnN0IGNvbW1lbnRTZXJ2aWNlID0ge1xuICBhc3luYyBjcmVhdGVDb21tZW50KGRhdGE6IE9taXQ8Q29tbWVudCwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxDb21tZW50PiB7XG4gICAgLy8gY29udGVudCwgYXV0aG9yLCBvYmplY3RUeXBlLCBvYmplY3RJZCDsnKDtmqjshLEg6rKA7IKsXG4gICAgaWYgKCFkYXRhLmNvbnRlbnQudHJpbSgpKSB0aHJvdyBuZXcgRXJyb3IoJ+uMk+q4gCDrgrTsmqnsnbQg67mE7Ja07J6I7Iq164uI64ukLicpO1xuICAgIGlmICghZGF0YS5hdXRob3IpIHRocm93IG5ldyBFcnJvcign7J6R7ISx7J6QIOygleuztOqwgCDtlYTsmpTtlanri4jri6QuJyk7XG4gICAgaWYgKCFkYXRhLm9iamVjdFR5cGUgfHwgIWRhdGEub2JqZWN0SWQpIHRocm93IG5ldyBFcnJvcignb2JqZWN0VHlwZS9vYmplY3RJZOqwgCDtlYTsmpTtlanri4jri6QuJyk7XG4gICAgcmV0dXJuIGNvbW1lbnRSZXBvc2l0b3J5Lmluc2VydChkYXRhKTtcbiAgfSxcbiAgYXN5bmMgZ2V0Q29tbWVudHMob2JqZWN0VHlwZTogc3RyaW5nLCBvYmplY3RJZDogbnVtYmVyKTogUHJvbWlzZTxDb21tZW50W10+IHtcbiAgICByZXR1cm4gY29tbWVudFJlcG9zaXRvcnkuZmluZEJ5T2JqZWN0KG9iamVjdFR5cGUsIG9iamVjdElkKTtcbiAgfSxcbiAgYXN5bmMgdXBkYXRlQ29tbWVudChpZDogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcsIG1lbnRpb25zOiBzdHJpbmdbXSk6IFByb21pc2U8Q29tbWVudCB8IG51bGw+IHtcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSB0aHJvdyBuZXcgRXJyb3IoJ+uMk+q4gCDrgrTsmqnsnbQg67mE7Ja07J6I7Iq164uI64ukLicpO1xuICAgIHJldHVybiBjb21tZW50UmVwb3NpdG9yeS51cGRhdGUoaWQsIGNvbnRlbnQsIG1lbnRpb25zKTtcbiAgfSxcbiAgYXN5bmMgZGVsZXRlQ29tbWVudChpZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIGNvbW1lbnRSZXBvc2l0b3J5LmRlbGV0ZShpZCk7XG4gIH0sXG59OyAiXSwidmVyc2lvbiI6M30=