{"file":"/Users/3i-a1-2021-017/Desktop/my-project/src/main/app/infrastructure/integrations/redmineClient.ts","mappings":";;;;;AAYA,gDAwCC;AApDD,kDAA0B;AAYnB,KAAK,UAAU,kBAAkB,CAAC,MAA0B;IAC/D,MAAM,EACF,OAAO,EACP,WAAW,EACX,SAAS,EACT,SAAS,GAAG,CAAC,EAAE,SAAS;IACxB,UAAU,EACV,MAAM,EACN,SAAS,GAAG,IAAI,GACnB,GAAG,MAAM,CAAC;IACX,IAAI,CAAC;QACD,MAAM,GAAG,GAAG,MAAM,eAAK,CAAC,IAAI,CACxB,GAAG,UAAU,cAAc,EAC3B;YACI,KAAK,EAAE;gBACH,UAAU,EAAE,SAAS;gBACrB,OAAO;gBACP,WAAW;gBACX,UAAU,EAAE,SAAS;aACxB;SACJ,EACD;YACI,OAAO,EAAE;gBACL,mBAAmB,EAAE,MAAM;gBAC3B,cAAc,EAAE,kBAAkB;aACrC;YACD,OAAO,EAAE,SAAS;SACrB,CACJ,CAAC;QACF,MAAM,OAAO,GAAI,GAAG,CAAC,IAAY,EAAE,KAAK,EAAE,EAAE,CAAC;QAC7C,OAAO;YACH,EAAE,EAAE,OAAO;YACX,GAAG,EAAE,GAAG,UAAU,WAAW,OAAO,EAAE;SACzC,CAAC;IACN,CAAC;IAAC,OAAO,GAAQ,EAAE,CAAC;QAChB,IAAI,GAAG,CAAC,IAAI,KAAK,cAAc,EAAE,CAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;QACrD,CAAC;QACD,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,OAAO,IAAI,+BAA+B,CAAC,CAAC;IACvG,CAAC;AACL,CAAC","names":[],"sources":["/Users/3i-a1-2021-017/Desktop/my-project/src/main/app/infrastructure/integrations/redmineClient.ts"],"sourcesContent":["import axios from 'axios';\n\nexport interface RedmineIssueParams {\n    subject: string;\n    description: string;\n    projectId: string | number;\n    trackerId?: number;\n    redmineUrl: string;\n    apiKey: string;\n    timeoutMs?: number;\n}\n\nexport async function createRedmineIssue(params: RedmineIssueParams): Promise<{ id: number; url: string }> {\n    const {\n        subject,\n        description,\n        projectId,\n        trackerId = 1, // 1: Bug\n        redmineUrl,\n        apiKey,\n        timeoutMs = 8000,\n    } = params;\n    try {\n        const res = await axios.post(\n            `${redmineUrl}/issues.json`,\n            {\n                issue: {\n                    project_id: projectId,\n                    subject,\n                    description,\n                    tracker_id: trackerId,\n                },\n            },\n            {\n                headers: {\n                    'X-Redmine-API-Key': apiKey,\n                    'Content-Type': 'application/json',\n                },\n                timeout: timeoutMs,\n            }\n        );\n        const issueId = (res.data as any)?.issue?.id;\n        return {\n            id: issueId,\n            url: `${redmineUrl}/issues/${issueId}`,\n        };\n    } catch (err: any) {\n        if (err.code === 'ECONNABORTED') {\n            throw new Error('Redmine API request timed out');\n        }\n        throw new Error(err.response?.data?.errors?.[0] || err.message || 'Redmine issue creation failed');\n    }\n} "],"version":3}