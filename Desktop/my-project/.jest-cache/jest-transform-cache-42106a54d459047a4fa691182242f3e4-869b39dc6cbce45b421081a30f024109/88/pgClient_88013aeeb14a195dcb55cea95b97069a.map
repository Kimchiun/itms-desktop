{"file":"/Users/3i-a1-2021-017/Desktop/my-project/src/main/app/infrastructure/database/pgClient.ts","mappings":";;AAYA,8CAKC;AAED,4CAQC;AA3BD,2BAA4B;AAE5B,MAAM,QAAQ,GAAG,IAAI,WAAM,CAAC;IACxB,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,IAAI,UAAU;IACtC,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,IAAI,WAAW;IACvC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,MAAM;IAC1C,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,UAAU;IAC9C,IAAI,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,IAAI;CAC3C,CAAC,CAAC;AAEH,IAAI,WAAW,GAAG,KAAK,CAAC;AAEjB,KAAK,UAAU,iBAAiB;IACnC,IAAI,CAAC,WAAW,EAAE,CAAC;QACf,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC;QACzB,WAAW,GAAG,IAAI,CAAC;IACvB,CAAC;AACL,CAAC;AAEM,KAAK,UAAU,gBAAgB;IAClC,IAAI,CAAC;QACD,MAAM,iBAAiB,EAAE,CAAC;QAC1B,MAAM,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;QACrC,OAAO,IAAI,CAAC;IAChB,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACX,OAAO,KAAK,CAAC;IACjB,CAAC;AACL,CAAC;AAED,kBAAe,QAAQ,CAAC;AAExB,kBAAkB;AAClB,uBAAuB;AACvB,2BAA2B;AAC3B,0CAA0C;AAC1C,oCAAoC;AACpC,+BAA+B;AAC/B,mDAAmD;AACnD,MAAM","names":[],"sources":["/Users/3i-a1-2021-017/Desktop/my-project/src/main/app/infrastructure/database/pgClient.ts"],"sourcesContent":["import { Client } from 'pg';\n\nconst pgClient = new Client({\n    user: process.env.PGUSER || 'postgres',\n    host: process.env.PGHOST || 'localhost',\n    database: process.env.PGDATABASE || 'itms',\n    password: process.env.PGPASSWORD || 'password',\n    port: Number(process.env.PGPORT) || 5432,\n});\n\nlet isConnected = false;\n\nexport async function ensurePgConnected() {\n    if (!isConnected) {\n        await pgClient.connect();\n        isConnected = true;\n    }\n}\n\nexport async function testPgConnection() {\n    try {\n        await ensurePgConnected();\n        await pgClient.query('SELECT NOW()');\n        return true;\n    } catch (err) {\n        return false;\n    }\n}\n\nexport default pgClient;\n\n// users 테이블 생성 예시\n// CREATE TABLE users (\n//   id SERIAL PRIMARY KEY,\n//   username VARCHAR(64) UNIQUE NOT NULL,\n//   password VARCHAR(128) NOT NULL,\n//   role VARCHAR(16) NOT NULL,\n//   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n// ); "],"version":3}