41b9efe796ce74dc9be4cbd14ba89f2b
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock Redux store
jest.mock('react-redux', () => ({
    useDispatch: () => jest.fn(),
    useSelector: (selector) => {
        // 1000개의 테스트케이스 생성
        const testCases = Array.from({ length: 1000 }, (_, i) => ({
            id: i + 1,
            title: `테스트케이스 ${i + 1}`,
            status: 'Active',
            priority: 'Medium',
            createdBy: 'tester',
            createdAt: new Date(),
            updatedAt: new Date(),
            steps: ['스텝 1', '스텝 2'],
            expected: '기대결과',
            tags: ['tag1', 'tag2']
        }));
        return {
            testcases: {
                list: testCases,
                loading: false,
                error: null
            }
        };
    }
}));
const react_1 = require("@testing-library/react");
require("@testing-library/jest-dom");
const TestCaseList_1 = __importDefault(require("../src/renderer/features/TestCaseManagement/components/TestCaseList"));
const BulkEditModal_1 = __importDefault(require("../src/renderer/features/TestCaseManagement/components/BulkEditModal"));
describe('대용량 데이터 성능 테스트', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    describe('TestCaseList 렌더링 성능', () => {
        it('1000개 테스트케이스를 2초 이내에 렌더링한다', () => {
            const startTime = performance.now();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestCaseList_1.default, {}));
            const endTime = performance.now();
            const renderTime = endTime - startTime;
            expect(renderTime).toBeLessThan(2000);
            expect(react_1.screen.getByText('테스트 케이스 목록')).toBeInTheDocument();
        });
        it('체크박스 선택 시 즉시 반응한다', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestCaseList_1.default, {}));
            const startTime = performance.now();
            const checkboxes = react_1.screen.getAllByRole('checkbox');
            react_1.fireEvent.click(checkboxes[1]); // 첫 번째 행 선택
            const endTime = performance.now();
            const responseTime = endTime - startTime;
            expect(responseTime).toBeLessThan(100); // 100ms 이내
            expect(checkboxes[1]).toBeChecked();
        });
        it('Shift+클릭 범위 선택이 빠르게 동작한다', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestCaseList_1.default, {}));
            const checkboxes = react_1.screen.getAllByRole('checkbox');
            const startTime = performance.now();
            // 첫 번째 행 선택
            react_1.fireEvent.click(checkboxes[1]);
            // Shift+클릭으로 10번째 행까지 범위 선택
            react_1.fireEvent.click(checkboxes[10], { shiftKey: true });
            const endTime = performance.now();
            const responseTime = endTime - startTime;
            expect(responseTime).toBeLessThan(200); // 200ms 이내
            // 1번부터 10번까지 모두 선택되었는지 확인
            for (let i = 1; i <= 10; i++) {
                expect(checkboxes[i]).toBeChecked();
            }
        });
    });
    describe('BulkEditModal 성능', () => {
        const mockSelectedCases = Array.from({ length: 100 }, (_, i) => ({
            id: i + 1,
            title: `테스트케이스 ${i + 1}`,
            status: 'Active',
            priority: 'Medium',
            createdBy: 'tester',
            createdAt: new Date(),
            updatedAt: new Date(),
            steps: ['스텝 1', '스텝 2'],
            expected: '기대결과',
            tags: ['tag1', 'tag2']
        }));
        it('100개 선택된 케이스로 모달을 1초 이내에 렌더링한다', () => {
            const startTime = performance.now();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(BulkEditModal_1.default, { isOpen: true, onClose: jest.fn(), selectedCases: mockSelectedCases, onApply: jest.fn() }));
            const endTime = performance.now();
            const renderTime = endTime - startTime;
            expect(renderTime).toBeLessThan(1000);
            expect(react_1.screen.getByText('일괄 편집 (100개 선택)')).toBeInTheDocument();
        });
        it('일괄 편집 적용이 빠르게 동작한다', async () => {
            const mockOnApply = jest.fn();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(BulkEditModal_1.default, { isOpen: true, onClose: jest.fn(), selectedCases: mockSelectedCases, onApply: mockOnApply }));
            // 상태 변경 체크박스 선택
            const statusCheckbox = react_1.screen.getByLabelText('상태 변경');
            react_1.fireEvent.click(statusCheckbox);
            // 상태 선택
            const statusSelect = react_1.screen.getByDisplayValue('선택하세요');
            react_1.fireEvent.change(statusSelect, { target: { value: 'Inactive' } });
            const startTime = performance.now();
            // 적용 버튼 클릭
            const applyButton = react_1.screen.getByText('적용 (1개 필드)');
            react_1.fireEvent.click(applyButton);
            const endTime = performance.now();
            const responseTime = endTime - startTime;
            expect(responseTime).toBeLessThan(500); // 500ms 이내
            expect(mockOnApply).toHaveBeenCalledWith({ status: 'Inactive' });
        });
    });
    describe('메모리 사용량', () => {
        it('1000개 테스트케이스 렌더링 후 메모리 누수가 없다', () => {
            const initialMemory = performance.memory?.usedJSHeapSize || 0;
            const { unmount } = (0, react_1.render)((0, jsx_runtime_1.jsx)(TestCaseList_1.default, {}));
            // 컴포넌트 언마운트
            unmount();
            // 가비지 컬렉션 강제 실행 (실제로는 불가능하지만 테스트 목적)
            if (global.gc) {
                global.gc();
            }
            const finalMemory = performance.memory?.usedJSHeapSize || 0;
            const memoryIncrease = finalMemory - initialMemory;
            // 메모리 증가가 10MB 이내여야 함
            expect(memoryIncrease).toBeLessThan(10 * 1024 * 1024);
        });
    });
    describe('인라인 편집 성능', () => {
        it('편집 모드 진입이 100ms 이내에 완료된다', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestCaseList_1.default, {}));
            const editableCells = react_1.screen.getAllByText(/테스트케이스/);
            const startTime = performance.now();
            react_1.fireEvent.click(editableCells[0]);
            const endTime = performance.now();
            const responseTime = endTime - startTime;
            expect(responseTime).toBeLessThan(100);
            expect(react_1.screen.getByDisplayValue('테스트케이스 1')).toBeInTheDocument();
        });
        it('자동저장 debounce가 정확히 500ms로 동작한다', async () => {
            jest.useFakeTimers();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestCaseList_1.default, {}));
            const editableCells = react_1.screen.getAllByText(/테스트케이스/);
            react_1.fireEvent.click(editableCells[0]);
            const input = react_1.screen.getByDisplayValue('테스트케이스 1');
            react_1.fireEvent.change(input, { target: { value: '새 제목' } });
            // 499ms 후에는 저장되지 않음
            jest.advanceTimersByTime(499);
            expect(react_1.screen.getByDisplayValue('새 제목')).toBeInTheDocument();
            // 500ms 후 저장됨
            jest.advanceTimersByTime(1);
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('저장됨')).toBeInTheDocument();
            });
            jest.useRealTimers();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC90ZXN0cy9idWxrLWVkaXQucGVyZm9ybWFuY2UudGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBTUEsbUJBQW1CO0FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDOUIsV0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDNUIsV0FBVyxFQUFFLENBQUMsUUFBYSxFQUFFLEVBQUU7UUFDN0IsbUJBQW1CO1FBQ25CLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3hELEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQztZQUNULEtBQUssRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDeEIsTUFBTSxFQUFFLFFBQWlCO1lBQ3pCLFFBQVEsRUFBRSxRQUFpQjtZQUMzQixTQUFTLEVBQUUsUUFBUTtZQUNuQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7WUFDckIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO1lBQ3JCLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7WUFDdkIsUUFBUSxFQUFFLE1BQU07WUFDaEIsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztTQUN2QixDQUFDLENBQUMsQ0FBQztRQUVKLE9BQU87WUFDTCxTQUFTLEVBQUU7Z0JBQ1QsSUFBSSxFQUFFLFNBQVM7Z0JBQ2YsT0FBTyxFQUFFLEtBQUs7Z0JBQ2QsS0FBSyxFQUFFLElBQUk7YUFDWjtTQUNGLENBQUM7SUFDSixDQUFDO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUEvQkosa0RBQTRFO0FBQzVFLHFDQUFtQztBQUNuQyx1SEFBK0Y7QUFDL0YseUhBQWlHO0FBOEJqRyxR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QUMsYUFBYSxFQUFFLENBQUM7UUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy8zaS1hMS0yMDIxLTAxNy9EZXNrdG9wL215LXByb2plY3QvdGVzdHMvYnVsay1lZGl0LnBlcmZvcm1hbmNlLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuaW1wb3J0IFRlc3RDYXNlTGlzdCBmcm9tICcuLi9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvVGVzdENhc2VNYW5hZ2VtZW50L2NvbXBvbmVudHMvVGVzdENhc2VMaXN0JztcbmltcG9ydCBCdWxrRWRpdE1vZGFsIGZyb20gJy4uL3NyYy9yZW5kZXJlci9mZWF0dXJlcy9UZXN0Q2FzZU1hbmFnZW1lbnQvY29tcG9uZW50cy9CdWxrRWRpdE1vZGFsJztcblxuLy8gTW9jayBSZWR1eCBzdG9yZVxuamVzdC5tb2NrKCdyZWFjdC1yZWR1eCcsICgpID0+ICh7XG4gIHVzZURpc3BhdGNoOiAoKSA9PiBqZXN0LmZuKCksXG4gIHVzZVNlbGVjdG9yOiAoc2VsZWN0b3I6IGFueSkgPT4ge1xuICAgIC8vIDEwMDDqsJzsnZgg7YWM7Iqk7Yq47LyA7J207IqkIOyDneyEsVxuICAgIGNvbnN0IHRlc3RDYXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMDAgfSwgKF8sIGkpID0+ICh7XG4gICAgICBpZDogaSArIDEsXG4gICAgICB0aXRsZTogYO2FjOyKpO2KuOy8gOydtOyKpCAke2kgKyAxfWAsXG4gICAgICBzdGF0dXM6ICdBY3RpdmUnIGFzIGNvbnN0LFxuICAgICAgcHJpb3JpdHk6ICdNZWRpdW0nIGFzIGNvbnN0LFxuICAgICAgY3JlYXRlZEJ5OiAndGVzdGVyJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHN0ZXBzOiBbJ+yKpO2FnSAxJywgJ+yKpO2FnSAyJ10sXG4gICAgICBleHBlY3RlZDogJ+q4sOuMgOqysOqzvCcsXG4gICAgICB0YWdzOiBbJ3RhZzEnLCAndGFnMiddXG4gICAgfSkpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0ZXN0Y2FzZXM6IHtcbiAgICAgICAgbGlzdDogdGVzdENhc2VzLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KSk7XG5cbmRlc2NyaWJlKCfrjIDsmqnrn4kg642w7J207YSwIOyEseuKpSDthYzsiqTtirgnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGVzdENhc2VMaXN0IOugjOuNlOungSDshLHriqUnLCAoKSA9PiB7XG4gICAgaXQoJzEwMDDqsJwg7YWM7Iqk7Yq47LyA7J207Iqk66W8IDLstIgg7J2064K07JeQIOugjOuNlOunge2VnOuLpCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgXG4gICAgICByZW5kZXIoPFRlc3RDYXNlTGlzdCAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlbmRlclRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICBleHBlY3QocmVuZGVyVGltZSkudG9CZUxlc3NUaGFuKDIwMDApO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+2FjOyKpO2KuCDsvIDsnbTsiqQg66qp66GdJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn7LK07YGs67CV7IqkIOyEoO2DnSDsi5wg7KaJ7IucIOuwmOydke2VnOuLpCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8VGVzdENhc2VMaXN0IC8+KTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdjaGVja2JveCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNoZWNrYm94ZXNbMV0pOyAvLyDssqsg67KI7Ke4IO2WiSDshKDtg51cbiAgICAgIFxuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgY29uc3QgcmVzcG9uc2VUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlVGltZSkudG9CZUxlc3NUaGFuKDEwMCk7IC8vIDEwMG1zIOydtOuCtFxuICAgICAgZXhwZWN0KGNoZWNrYm94ZXNbMV0pLnRvQmVDaGVja2VkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnU2hpZnQr7YG066atIOuylOychCDshKDtg53snbQg67mg66W06rKMIOuPmeyeke2VnOuLpCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8VGVzdENhc2VMaXN0IC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgY2hlY2tib3hlcyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2NoZWNrYm94Jyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgXG4gICAgICAvLyDssqsg67KI7Ke4IO2WiSDshKDtg51cbiAgICAgIGZpcmVFdmVudC5jbGljayhjaGVja2JveGVzWzFdKTtcbiAgICAgIFxuICAgICAgLy8gU2hpZnQr7YG066at7Jy866GcIDEw67KI7Ke4IO2Wieq5jOyngCDrspTsnIQg7ISg7YOdXG4gICAgICBmaXJlRXZlbnQuY2xpY2soY2hlY2tib3hlc1sxMF0sIHsgc2hpZnRLZXk6IHRydWUgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZVRpbWUpLnRvQmVMZXNzVGhhbigyMDApOyAvLyAyMDBtcyDsnbTrgrRcbiAgICAgIFxuICAgICAgLy8gMeuyiOu2gO2EsCAxMOuyiOq5jOyngCDrqqjrkZAg7ISg7YOd65CY7JeI64qU7KeAIO2ZleyduFxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTA7IGkrKykge1xuICAgICAgICBleHBlY3QoY2hlY2tib3hlc1tpXSkudG9CZUNoZWNrZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0J1bGtFZGl0TW9kYWwg7ISx64qlJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tTZWxlY3RlZENhc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwIH0sIChfLCBpKSA9PiAoe1xuICAgICAgaWQ6IGkgKyAxLFxuICAgICAgdGl0bGU6IGDthYzsiqTtirjsvIDsnbTsiqQgJHtpICsgMX1gLFxuICAgICAgc3RhdHVzOiAnQWN0aXZlJyBhcyBjb25zdCxcbiAgICAgIHByaW9yaXR5OiAnTWVkaXVtJyBhcyBjb25zdCxcbiAgICAgIGNyZWF0ZWRCeTogJ3Rlc3RlcicsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBzdGVwczogWyfsiqTthZ0gMScsICfsiqTthZ0gMiddLFxuICAgICAgZXhwZWN0ZWQ6ICfquLDrjIDqsrDqs7wnLFxuICAgICAgdGFnczogWyd0YWcxJywgJ3RhZzInXVxuICAgIH0pKTtcblxuICAgIGl0KCcxMDDqsJwg7ISg7YOd65CcIOy8gOydtOyKpOuhnCDrqqjri6zsnYQgMey0iCDsnbTrgrTsl5Ag66CM642U66eB7ZWc64ukJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJ1bGtFZGl0TW9kYWxcbiAgICAgICAgICBpc09wZW49e3RydWV9XG4gICAgICAgICAgb25DbG9zZT17amVzdC5mbigpfVxuICAgICAgICAgIHNlbGVjdGVkQ2FzZXM9e21vY2tTZWxlY3RlZENhc2VzfVxuICAgICAgICAgIG9uQXBwbHk9e2plc3QuZm4oKX1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlbmRlclRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICBleHBlY3QocmVuZGVyVGltZSkudG9CZUxlc3NUaGFuKDEwMDApO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+ydvOq0hCDtjrjsp5EgKDEwMOqwnCDshKDtg50pJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn7J286rSEIO2OuOynkSDsoIHsmqnsnbQg67mg66W06rKMIOuPmeyeke2VnOuLpCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tPbkFwcGx5ID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCdWxrRWRpdE1vZGFsXG4gICAgICAgICAgaXNPcGVuPXt0cnVlfVxuICAgICAgICAgIG9uQ2xvc2U9e2plc3QuZm4oKX1cbiAgICAgICAgICBzZWxlY3RlZENhc2VzPXttb2NrU2VsZWN0ZWRDYXNlc31cbiAgICAgICAgICBvbkFwcGx5PXttb2NrT25BcHBseX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIOyDge2DnCDrs4Dqsr0g7LK07YGs67CV7IqkIOyEoO2DnVxuICAgICAgY29uc3Qgc3RhdHVzQ2hlY2tib3ggPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ+yDge2DnCDrs4Dqsr0nKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzdGF0dXNDaGVja2JveCk7XG5cbiAgICAgIC8vIOyDge2DnCDshKDtg51cbiAgICAgIGNvbnN0IHN0YXR1c1NlbGVjdCA9IHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgn7ISg7YOd7ZWY7IS47JqUJyk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHN0YXR1c1NlbGVjdCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdJbmFjdGl2ZScgfSB9KTtcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBcbiAgICAgIC8vIOyggeyaqSDrsoTtirwg7YG066atXG4gICAgICBjb25zdCBhcHBseUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ+yggeyaqSAoMeqwnCDtlYTrk5wpJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYXBwbHlCdXR0b24pO1xuICAgICAgXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBjb25zdCByZXNwb25zZVRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2VUaW1lKS50b0JlTGVzc1RoYW4oNTAwKTsgLy8gNTAwbXMg7J2064K0XG4gICAgICBleHBlY3QobW9ja09uQXBwbHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHsgc3RhdHVzOiAnSW5hY3RpdmUnIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn66mU66qo66asIOyCrOyaqeufiScsICgpID0+IHtcbiAgICBpdCgnMTAwMOqwnCDthYzsiqTtirjsvIDsnbTsiqQg66CM642U66eBIO2bhCDrqZTrqqjrpqwg64iE7IiY6rCAIOyXhuuLpCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxNZW1vcnkgPSAocGVyZm9ybWFuY2UgYXMgYW55KS5tZW1vcnk/LnVzZWRKU0hlYXBTaXplIHx8IDA7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyKDxUZXN0Q2FzZUxpc3QgLz4pO1xuICAgICAgXG4gICAgICAvLyDsu7Ttj6zrhIztirgg7Ja466eI7Jq07Yq4XG4gICAgICB1bm1vdW50KCk7XG4gICAgICBcbiAgICAgIC8vIOqwgOu5hOyngCDsu6zroInshZgg6rCV7KCcIOyLpO2WiSAo7Iuk7KCc66Gc64qUIOu2iOqwgOuKpe2VmOyngOunjCDthYzsiqTtirgg66qp7KCBKVxuICAgICAgaWYgKGdsb2JhbC5nYykge1xuICAgICAgICBnbG9iYWwuZ2MoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZmluYWxNZW1vcnkgPSAocGVyZm9ybWFuY2UgYXMgYW55KS5tZW1vcnk/LnVzZWRKU0hlYXBTaXplIHx8IDA7XG4gICAgICBjb25zdCBtZW1vcnlJbmNyZWFzZSA9IGZpbmFsTWVtb3J5IC0gaW5pdGlhbE1lbW9yeTtcbiAgICAgIFxuICAgICAgLy8g66mU66qo66asIOymneqwgOqwgCAxME1CIOydtOuCtOyXrOyVvCDtlahcbiAgICAgIGV4cGVjdChtZW1vcnlJbmNyZWFzZSkudG9CZUxlc3NUaGFuKDEwICogMTAyNCAqIDEwMjQpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn7J2465287J24IO2OuOynkSDshLHriqUnLCAoKSA9PiB7XG4gICAgaXQoJ+2OuOynkSDrqqjrk5wg7KeE7J6F7J20IDEwMG1zIOydtOuCtOyXkCDsmYTro4zrkJzri6QnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPFRlc3RDYXNlTGlzdCAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGVkaXRhYmxlQ2VsbHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC/thYzsiqTtirjsvIDsnbTsiqQvKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBcbiAgICAgIGZpcmVFdmVudC5jbGljayhlZGl0YWJsZUNlbGxzWzBdKTtcbiAgICAgIFxuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgY29uc3QgcmVzcG9uc2VUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlVGltZSkudG9CZUxlc3NUaGFuKDEwMCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCfthYzsiqTtirjsvIDsnbTsiqQgMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+yekOuPmeyggOyepSBkZWJvdW5jZeqwgCDsoJXtmZXtnoggNTAwbXProZwg64+Z7J6R7ZWc64ukJywgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gICAgICBcbiAgICAgIHJlbmRlcig8VGVzdENhc2VMaXN0IC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgZWRpdGFibGVDZWxscyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL+2FjOyKpO2KuOy8gOydtOyKpC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRhYmxlQ2VsbHNbMF0pO1xuICAgICAgXG4gICAgICBjb25zdCBpbnB1dCA9IHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgn7YWM7Iqk7Yq47LyA7J207IqkIDEnKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoaW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAn7IOIIOygnOuqqScgfSB9KTtcbiAgICAgIFxuICAgICAgLy8gNDk5bXMg7ZuE7JeQ64qUIOyggOyepeuQmOyngCDslYrsnYxcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSg0OTkpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgn7IOIIOygnOuqqScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgXG4gICAgICAvLyA1MDBtcyDtm4Qg7KCA7J6l65CoXG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMSk7XG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+yggOyepeuQqCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICAgIH0pO1xuICB9KTtcbn0pOyAiXSwidmVyc2lvbiI6M30=