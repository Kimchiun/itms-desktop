08de17db318902f1a82ac321bf3d0266
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.clearDetail = exports.setSearchParams = exports.searchTestCases = exports.fetchTestCaseDetail = exports.fetchTestCases = void 0;
const toolkit_1 = require("@reduxjs/toolkit");
const axios_1 = __importDefault(require("axios"));
const initialState = {
    list: [],
    detail: null,
    loading: false,
    error: null,
    searchParams: {},
};
exports.fetchTestCases = (0, toolkit_1.createAsyncThunk)('testcases/fetch', async () => {
    const res = await axios_1.default.get('/api/testcases');
    return res.data;
});
exports.fetchTestCaseDetail = (0, toolkit_1.createAsyncThunk)('testcases/detail', async (id) => {
    const res = await axios_1.default.get(`/api/testcases/${id}`);
    return res.data;
});
exports.searchTestCases = (0, toolkit_1.createAsyncThunk)('testcases/search', async (query) => {
    const res = await axios_1.default.post('/api/testcases/search', query);
    return res.data;
});
const testCaseSlice = (0, toolkit_1.createSlice)({
    name: 'testcases',
    initialState,
    reducers: {
        setSearchParams(state, action) {
            state.searchParams = action.payload;
        },
        clearDetail(state) {
            state.detail = null;
        },
    },
    extraReducers: builder => {
        builder
            .addCase(exports.fetchTestCases.pending, state => { state.loading = true; state.error = null; })
            .addCase(exports.fetchTestCases.fulfilled, (state, action) => { state.loading = false; state.list = action.payload; })
            .addCase(exports.fetchTestCases.rejected, (state, action) => { state.loading = false; state.error = action.error.message || '불러오기 실패'; })
            .addCase(exports.fetchTestCaseDetail.pending, state => { state.loading = true; state.error = null; })
            .addCase(exports.fetchTestCaseDetail.fulfilled, (state, action) => { state.loading = false; state.detail = action.payload; })
            .addCase(exports.fetchTestCaseDetail.rejected, (state, action) => { state.loading = false; state.error = action.error.message || '상세 불러오기 실패'; })
            .addCase(exports.searchTestCases.pending, state => { state.loading = true; state.error = null; })
            .addCase(exports.searchTestCases.fulfilled, (state, action) => { state.loading = false; state.list = action.payload; })
            .addCase(exports.searchTestCases.rejected, (state, action) => { state.loading = false; state.error = action.error.message || '검색 실패'; });
    },
});
_a = testCaseSlice.actions, exports.setSearchParams = _a.setSearchParams, exports.clearDetail = _a.clearDetail;
exports.default = testCaseSlice.reducer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvVGVzdENhc2VNYW5hZ2VtZW50L3N0b3JlL3Rlc3RDYXNlU2xpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDhDQUFnRjtBQUNoRixrREFBMEI7QUF3QjFCLE1BQU0sWUFBWSxHQUFrQjtJQUNsQyxJQUFJLEVBQUUsRUFBRTtJQUNSLE1BQU0sRUFBRSxJQUFJO0lBQ1osT0FBTyxFQUFFLEtBQUs7SUFDZCxLQUFLLEVBQUUsSUFBSTtJQUNYLFlBQVksRUFBRSxFQUFFO0NBQ2pCLENBQUM7QUFFVyxRQUFBLGNBQWMsR0FBRyxJQUFBLDBCQUFnQixFQUFDLGlCQUFpQixFQUFFLEtBQUssSUFBSSxFQUFFO0lBQzNFLE1BQU0sR0FBRyxHQUFHLE1BQU0sZUFBSyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQzlDLE9BQU8sR0FBRyxDQUFDLElBQWtCLENBQUM7QUFDaEMsQ0FBQyxDQUFDLENBQUM7QUFFVSxRQUFBLG1CQUFtQixHQUFHLElBQUEsMEJBQWdCLEVBQUMsa0JBQWtCLEVBQUUsS0FBSyxFQUFFLEVBQVUsRUFBRSxFQUFFO0lBQzNGLE1BQU0sR0FBRyxHQUFHLE1BQU0sZUFBSyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNwRCxPQUFPLEdBQUcsQ0FBQyxJQUFnQixDQUFDO0FBQzlCLENBQUMsQ0FBQyxDQUFDO0FBRVUsUUFBQSxlQUFlLEdBQUcsSUFBQSwwQkFBZ0IsRUFBQyxrQkFBa0IsRUFBRSxLQUFLLEVBQUUsS0FBVSxFQUFFLEVBQUU7SUFDdkYsTUFBTSxHQUFHLEdBQUcsTUFBTSxlQUFLLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzdELE9BQU8sR0FBRyxDQUFDLElBQWtCLENBQUM7QUFDaEMsQ0FBQyxDQUFDLENBQUM7QUFFSCxNQUFNLGFBQWEsR0FBRyxJQUFB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QUFlLGFBQWEsQ0FBQyxPQUFPLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvVGVzdENhc2VNYW5hZ2VtZW50L3N0b3JlL3Rlc3RDYXNlU2xpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2xpY2UsIGNyZWF0ZUFzeW5jVGh1bmssIFBheWxvYWRBY3Rpb24gfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVzdENhc2Uge1xuICBpZDogbnVtYmVyO1xuICB0aXRsZTogc3RyaW5nO1xuICBwcmVyZXE/OiBzdHJpbmc7XG4gIHN0ZXBzOiBzdHJpbmdbXTtcbiAgZXhwZWN0ZWQ6IHN0cmluZztcbiAgcHJpb3JpdHk6ICdIaWdoJyB8ICdNZWRpdW0nIHwgJ0xvdyc7XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBzdGF0dXM6ICdBY3RpdmUnIHwgJ0FyY2hpdmVkJztcbiAgY3JlYXRlZEJ5OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICB1cGRhdGVkQXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXN0Q2FzZVN0YXRlIHtcbiAgbGlzdDogVGVzdENhc2VbXTtcbiAgZGV0YWlsOiBUZXN0Q2FzZSB8IG51bGw7XG4gIGxvYWRpbmc6IGJvb2xlYW47XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xuICBzZWFyY2hQYXJhbXM6IGFueTtcbn1cblxuY29uc3QgaW5pdGlhbFN0YXRlOiBUZXN0Q2FzZVN0YXRlID0ge1xuICBsaXN0OiBbXSxcbiAgZGV0YWlsOiBudWxsLFxuICBsb2FkaW5nOiBmYWxzZSxcbiAgZXJyb3I6IG51bGwsXG4gIHNlYXJjaFBhcmFtczoge30sXG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hUZXN0Q2FzZXMgPSBjcmVhdGVBc3luY1RodW5rKCd0ZXN0Y2FzZXMvZmV0Y2gnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS90ZXN0Y2FzZXMnKTtcbiAgcmV0dXJuIHJlcy5kYXRhIGFzIFRlc3RDYXNlW107XG59KTtcblxuZXhwb3J0IGNvbnN0IGZldGNoVGVzdENhc2VEZXRhaWwgPSBjcmVhdGVBc3luY1RodW5rKCd0ZXN0Y2FzZXMvZGV0YWlsJywgYXN5bmMgKGlkOiBudW1iZXIpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KGAvYXBpL3Rlc3RjYXNlcy8ke2lkfWApO1xuICByZXR1cm4gcmVzLmRhdGEgYXMgVGVzdENhc2U7XG59KTtcblxuZXhwb3J0IGNvbnN0IHNlYXJjaFRlc3RDYXNlcyA9IGNyZWF0ZUFzeW5jVGh1bmsoJ3Rlc3RjYXNlcy9zZWFyY2gnLCBhc3luYyAocXVlcnk6IGFueSkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KCcvYXBpL3Rlc3RjYXNlcy9zZWFyY2gnLCBxdWVyeSk7XG4gIHJldHVybiByZXMuZGF0YSBhcyBUZXN0Q2FzZVtdO1xufSk7XG5cbmNvbnN0IHRlc3RDYXNlU2xpY2UgPSBjcmVhdGVTbGljZSh7XG4gIG5hbWU6ICd0ZXN0Y2FzZXMnLFxuICBpbml0aWFsU3RhdGUsXG4gIHJlZHVjZXJzOiB7XG4gICAgc2V0U2VhcmNoUGFyYW1zKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248YW55Pikge1xuICAgICAgc3RhdGUuc2VhcmNoUGFyYW1zID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgfSxcbiAgICBjbGVhckRldGFpbChzdGF0ZSkge1xuICAgICAgc3RhdGUuZGV0YWlsID0gbnVsbDtcbiAgICB9LFxuICB9LFxuICBleHRyYVJlZHVjZXJzOiBidWlsZGVyID0+IHtcbiAgICBidWlsZGVyXG4gICAgICAuYWRkQ2FzZShmZXRjaFRlc3RDYXNlcy5wZW5kaW5nLCBzdGF0ZSA9PiB7IHN0YXRlLmxvYWRpbmcgPSB0cnVlOyBzdGF0ZS5lcnJvciA9IG51bGw7IH0pXG4gICAgICAuYWRkQ2FzZShmZXRjaFRlc3RDYXNlcy5mdWxmaWxsZWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7IHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsgc3RhdGUubGlzdCA9IGFjdGlvbi5wYXlsb2FkOyB9KVxuICAgICAgLmFkZENhc2UoZmV0Y2hUZXN0Q2FzZXMucmVqZWN0ZWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7IHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsgc3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3IubWVzc2FnZSB8fCAn67aI65+s7Jik6riwIOyLpO2MqCc7IH0pXG4gICAgICAuYWRkQ2FzZShmZXRjaFRlc3RDYXNlRGV0YWlsLnBlbmRpbmcsIHN0YXRlID0+IHsgc3RhdGUubG9hZGluZyA9IHRydWU7IHN0YXRlLmVycm9yID0gbnVsbDsgfSlcbiAgICAgIC5hZGRDYXNlKGZldGNoVGVzdENhc2VEZXRhaWwuZnVsZmlsbGVkLCAoc3RhdGUsIGFjdGlvbikgPT4geyBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7IHN0YXRlLmRldGFpbCA9IGFjdGlvbi5wYXlsb2FkOyB9KVxuICAgICAgLmFkZENhc2UoZmV0Y2hUZXN0Q2FzZURldGFpbC5yZWplY3RlZCwgKHN0YXRlLCBhY3Rpb24pID0+IHsgc3RhdGUubG9hZGluZyA9IGZhbHNlOyBzdGF0ZS5lcnJvciA9IGFjdGlvbi5lcnJvci5tZXNzYWdlIHx8ICfsg4HshLgg67aI65+s7Jik6riwIOyLpO2MqCc7IH0pXG4gICAgICAuYWRkQ2FzZShzZWFyY2hUZXN0Q2FzZXMucGVuZGluZywgc3RhdGUgPT4geyBzdGF0ZS5sb2FkaW5nID0gdHJ1ZTsgc3RhdGUuZXJyb3IgPSBudWxsOyB9KVxuICAgICAgLmFkZENhc2Uoc2VhcmNoVGVzdENhc2VzLmZ1bGZpbGxlZCwgKHN0YXRlLCBhY3Rpb24pID0+IHsgc3RhdGUubG9hZGluZyA9IGZhbHNlOyBzdGF0ZS5saXN0ID0gYWN0aW9uLnBheWxvYWQ7IH0pXG4gICAgICAuYWRkQ2FzZShzZWFyY2hUZXN0Q2FzZXMucmVqZWN0ZWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7IHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsgc3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3IubWVzc2FnZSB8fCAn6rKA7IOJIOyLpO2MqCc7IH0pO1xuICB9LFxufSk7XG5cbmV4cG9ydCBjb25zdCB7IHNldFNlYXJjaFBhcmFtcywgY2xlYXJEZXRhaWwgfSA9IHRlc3RDYXNlU2xpY2UuYWN0aW9ucztcbmV4cG9ydCBkZWZhdWx0IHRlc3RDYXNlU2xpY2UucmVkdWNlcjsgIl0sInZlcnNpb24iOjN9