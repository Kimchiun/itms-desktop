aaa318ca7c2ff8ff734638485708607e
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.deleteRelease = exports.updateRelease = exports.createRelease = exports.fetchSuites = exports.fetchReleases = void 0;
const toolkit_1 = require("@reduxjs/toolkit");
const axios_1 = __importDefault(require("../../../utils/axios"));
const initialState = {
    releases: [],
    suites: [],
    loading: false,
    error: null,
};
exports.fetchReleases = (0, toolkit_1.createAsyncThunk)('releases/fetch', async () => {
    const res = await axios_1.default.get('/api/releases');
    return res.data;
});
exports.fetchSuites = (0, toolkit_1.createAsyncThunk)('suites/fetch', async (releaseId) => {
    const res = await axios_1.default.get(`/api/releases/${releaseId}/suites`);
    return res.data;
});
exports.createRelease = (0, toolkit_1.createAsyncThunk)('releases/create', async (data) => {
    const res = await axios_1.default.post('/api/releases', data);
    return res.data;
});
exports.updateRelease = (0, toolkit_1.createAsyncThunk)('releases/update', async ({ id, data }) => {
    const res = await axios_1.default.put(`/api/releases/${id}`, data);
    return res.data;
});
exports.deleteRelease = (0, toolkit_1.createAsyncThunk)('releases/delete', async (id) => {
    await axios_1.default.delete(`/api/releases/${id}`);
    return id;
});
const releaseSlice = (0, toolkit_1.createSlice)({
    name: 'release',
    initialState,
    reducers: {},
    extraReducers: builder => {
        builder
            .addCase(exports.fetchReleases.pending, state => { state.loading = true; state.error = null; })
            .addCase(exports.fetchReleases.fulfilled, (state, action) => { state.loading = false; state.releases = action.payload; })
            .addCase(exports.fetchReleases.rejected, (state, action) => { state.loading = false; state.error = action.error.message || '릴리즈 불러오기 실패'; })
            .addCase(exports.fetchSuites.pending, state => { state.loading = true; state.error = null; })
            .addCase(exports.fetchSuites.fulfilled, (state, action) => { state.loading = false; state.suites = action.payload; })
            .addCase(exports.fetchSuites.rejected, (state, action) => { state.loading = false; state.error = action.error.message || '스위트 불러오기 실패'; })
            // 릴리즈 생성
            .addCase(exports.createRelease.fulfilled, (state, action) => { state.releases.push(action.payload); })
            // 릴리즈 수정
            .addCase(exports.updateRelease.fulfilled, (state, action) => {
            const idx = state.releases.findIndex(r => r.id === action.payload.id);
            if (idx !== -1)
                state.releases[idx] = action.payload;
        })
            // 릴리즈 삭제
            .addCase(exports.deleteRelease.fulfilled, (state, action) => {
            state.releases = state.releases.filter(r => r.id !== action.payload);
        });
    },
});
exports.default = releaseSlice.reducer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0Rlc2t0b3AvbXktcHJvamVjdC9zcmMvcmVuZGVyZXIvZmVhdHVyZXMvUmVsZWFzZVBsYW5uaW5nL3N0b3JlL3JlbGVhc2VTbGljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSw4Q0FBZ0Y7QUFDaEYsaUVBQXVDO0FBNEJ2QyxNQUFNLFlBQVksR0FBaUI7SUFDakMsUUFBUSxFQUFFLEVBQUU7SUFDWixNQUFNLEVBQUUsRUFBRTtJQUNWLE9BQU8sRUFBRSxLQUFLO0lBQ2QsS0FBSyxFQUFFLElBQUk7Q0FDWixDQUFDO0FBRVcsUUFBQSxhQUFhLEdBQUcsSUFBQSwwQkFBZ0IsRUFBQyxnQkFBZ0IsRUFBRSxLQUFLLElBQUksRUFBRTtJQUN6RSxNQUFNLEdBQUcsR0FBRyxNQUFNLGVBQUcsQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDM0MsT0FBTyxHQUFHLENBQUMsSUFBaUIsQ0FBQztBQUMvQixDQUFDLENBQUMsQ0FBQztBQUNVLFFBQUEsV0FBVyxHQUFHLElBQUEsMEJBQWdCLEVBQUMsY0FBYyxFQUFFLEtBQUssRUFBRSxTQUFpQixFQUFFLEVBQUU7SUFDdEYsTUFBTSxHQUFHLEdBQUcsTUFBTSxlQUFHLENBQUMsR0FBRyxDQUFDLGlCQUFpQixTQUFTLFNBQVMsQ0FBQyxDQUFDO0lBQy9ELE9BQU8sR0FBRyxDQUFDLElBQWUsQ0FBQztBQUM3QixDQUFDLENBQUMsQ0FBQztBQUVVLFFBQUEsYUFBYSxHQUFHLElBQUEsMEJBQWdCLEVBQUMsaUJBQWlCLEVBQUUsS0FBSyxFQUFFLElBQXVDLEVBQUUsRUFBRTtJQUNqSCxNQUFNLEdBQUcsR0FBRyxNQUFNLGVBQUcsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2xELE9BQU8sR0FBRyxDQUFDLElBQWUsQ0FBQztBQUM3QixDQUFDLENBQUMsQ0FBQztBQUNVLFFBQUEsYUFBYSxHQUFHLElBQUEsMEJBQWdCLEVBQUMsaUJBQWlCLEVBQUUsS0FBSyxFQUFF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R0FBRyxLQUFLLENBQUMsQ0FBQztnQkFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDdkQsQ0FBQyxDQUFDO1lBQ0YsU0FBUzthQUNSLE9BQU8sQ0FBQyxxQkFBYSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUNsRCxLQUFLLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkUsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsa0JBQWUsWUFBWSxDQUFDLE9BQU8sQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvM2ktYTEtMjAyMS0wMTcvRGVza3RvcC9teS1wcm9qZWN0L3NyYy9yZW5kZXJlci9mZWF0dXJlcy9SZWxlYXNlUGxhbm5pbmcvc3RvcmUvcmVsZWFzZVNsaWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNsaWNlLCBjcmVhdGVBc3luY1RodW5rLCBQYXlsb2FkQWN0aW9uIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5pbXBvcnQgYXBpIGZyb20gJy4uLy4uLy4uL3V0aWxzL2F4aW9zJztcblxuZXhwb3J0IGludGVyZmFjZSBSZWxlYXNlIHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgc3RhcnREYXRlPzogc3RyaW5nO1xuICBlbmREYXRlPzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU3VpdGUge1xuICBpZDogbnVtYmVyO1xuICByZWxlYXNlSWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgZXhlY3V0b3I/OiBzdHJpbmc7XG4gIGVudmlyb25tZW50Pzogc3RyaW5nO1xuICBkdWVEYXRlPzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWxlYXNlU3RhdGUge1xuICByZWxlYXNlczogUmVsZWFzZVtdO1xuICBzdWl0ZXM6IFN1aXRlW107XG4gIGxvYWRpbmc6IGJvb2xlYW47XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xufVxuXG5jb25zdCBpbml0aWFsU3RhdGU6IFJlbGVhc2VTdGF0ZSA9IHtcbiAgcmVsZWFzZXM6IFtdLFxuICBzdWl0ZXM6IFtdLFxuICBsb2FkaW5nOiBmYWxzZSxcbiAgZXJyb3I6IG51bGwsXG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hSZWxlYXNlcyA9IGNyZWF0ZUFzeW5jVGh1bmsoJ3JlbGVhc2VzL2ZldGNoJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KCcvYXBpL3JlbGVhc2VzJyk7XG4gIHJldHVybiByZXMuZGF0YSBhcyBSZWxlYXNlW107XG59KTtcbmV4cG9ydCBjb25zdCBmZXRjaFN1aXRlcyA9IGNyZWF0ZUFzeW5jVGh1bmsoJ3N1aXRlcy9mZXRjaCcsIGFzeW5jIChyZWxlYXNlSWQ6IG51bWJlcikgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvYXBpL3JlbGVhc2VzLyR7cmVsZWFzZUlkfS9zdWl0ZXNgKTtcbiAgcmV0dXJuIHJlcy5kYXRhIGFzIFN1aXRlW107XG59KTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlbGVhc2UgPSBjcmVhdGVBc3luY1RodW5rKCdyZWxlYXNlcy9jcmVhdGUnLCBhc3luYyAoZGF0YTogT21pdDxSZWxlYXNlLCAnaWQnIHwgJ2NyZWF0ZWRBdCc+KSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KCcvYXBpL3JlbGVhc2VzJywgZGF0YSk7XG4gIHJldHVybiByZXMuZGF0YSBhcyBSZWxlYXNlO1xufSk7XG5leHBvcnQgY29uc3QgdXBkYXRlUmVsZWFzZSA9IGNyZWF0ZUFzeW5jVGh1bmsoJ3JlbGVhc2VzL3VwZGF0ZScsIGFzeW5jICh7IGlkLCBkYXRhIH06IHsgaWQ6IG51bWJlcjsgZGF0YTogUGFydGlhbDxPbWl0PFJlbGVhc2UsICdpZCcgfCAnY3JlYXRlZEF0Jz4+IH0pID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnB1dChgL2FwaS9yZWxlYXNlcy8ke2lkfWAsIGRhdGEpO1xuICByZXR1cm4gcmVzLmRhdGEgYXMgUmVsZWFzZTtcbn0pO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVJlbGVhc2UgPSBjcmVhdGVBc3luY1RodW5rKCdyZWxlYXNlcy9kZWxldGUnLCBhc3luYyAoaWQ6IG51bWJlcikgPT4ge1xuICBhd2FpdCBhcGkuZGVsZXRlKGAvYXBpL3JlbGVhc2VzLyR7aWR9YCk7XG4gIHJldHVybiBpZDtcbn0pO1xuXG5jb25zdCByZWxlYXNlU2xpY2UgPSBjcmVhdGVTbGljZSh7XG4gIG5hbWU6ICdyZWxlYXNlJyxcbiAgaW5pdGlhbFN0YXRlLFxuICByZWR1Y2Vyczoge30sXG4gIGV4dHJhUmVkdWNlcnM6IGJ1aWxkZXIgPT4ge1xuICAgIGJ1aWxkZXJcbiAgICAgIC5hZGRDYXNlKGZldGNoUmVsZWFzZXMucGVuZGluZywgc3RhdGUgPT4geyBzdGF0ZS5sb2FkaW5nID0gdHJ1ZTsgc3RhdGUuZXJyb3IgPSBudWxsOyB9KVxuICAgICAgLmFkZENhc2UoZmV0Y2hSZWxlYXNlcy5mdWxmaWxsZWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7IHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsgc3RhdGUucmVsZWFzZXMgPSBhY3Rpb24ucGF5bG9hZDsgfSlcbiAgICAgIC5hZGRDYXNlKGZldGNoUmVsZWFzZXMucmVqZWN0ZWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7IHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsgc3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3IubWVzc2FnZSB8fCAn66a066as7KaIIOu2iOufrOyYpOq4sCDsi6TtjKgnOyB9KVxuICAgICAgLmFkZENhc2UoZmV0Y2hTdWl0ZXMucGVuZGluZywgc3RhdGUgPT4geyBzdGF0ZS5sb2FkaW5nID0gdHJ1ZTsgc3RhdGUuZXJyb3IgPSBudWxsOyB9KVxuICAgICAgLmFkZENhc2UoZmV0Y2hTdWl0ZXMuZnVsZmlsbGVkLCAoc3RhdGUsIGFjdGlvbikgPT4geyBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7IHN0YXRlLnN1aXRlcyA9IGFjdGlvbi5wYXlsb2FkOyB9KVxuICAgICAgLmFkZENhc2UoZmV0Y2hTdWl0ZXMucmVqZWN0ZWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7IHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsgc3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3IubWVzc2FnZSB8fCAn7Iqk7JyE7Yq4IOu2iOufrOyYpOq4sCDsi6TtjKgnOyB9KVxuICAgICAgLy8g66a066as7KaIIOyDneyEsVxuICAgICAgLmFkZENhc2UoY3JlYXRlUmVsZWFzZS5mdWxmaWxsZWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7IHN0YXRlLnJlbGVhc2VzLnB1c2goYWN0aW9uLnBheWxvYWQpOyB9KVxuICAgICAgLy8g66a066as7KaIIOyImOyglVxuICAgICAgLmFkZENhc2UodXBkYXRlUmVsZWFzZS5mdWxmaWxsZWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHN0YXRlLnJlbGVhc2VzLmZpbmRJbmRleChyID0+IHIuaWQgPT09IGFjdGlvbi5wYXlsb2FkLmlkKTtcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHN0YXRlLnJlbGVhc2VzW2lkeF0gPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIH0pXG4gICAgICAvLyDrprTrpqzspogg7IKt7KCcXG4gICAgICAuYWRkQ2FzZShkZWxldGVSZWxlYXNlLmZ1bGZpbGxlZCwgKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgICAgICAgc3RhdGUucmVsZWFzZXMgPSBzdGF0ZS5yZWxlYXNlcy5maWx0ZXIociA9PiByLmlkICE9PSBhY3Rpb24ucGF5bG9hZCk7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByZWxlYXNlU2xpY2UucmVkdWNlcjsgIl0sInZlcnNpb24iOjN9